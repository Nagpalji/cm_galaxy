{"ast":null,"code":"import LRUCache from './lru-cache';\nimport { Class } from '../common';\nimport { objectKey, hashKey, normalizeText } from './util';\n\nfunction zeroSize() {\n  return {\n    width: 0,\n    height: 0,\n    baseline: 0\n  };\n}\n\nvar DEFAULT_OPTIONS = {\n  baselineMarkerSize: 1\n};\nvar defaultMeasureBox;\n\nif (typeof document !== \"undefined\") {\n  defaultMeasureBox = document.createElement(\"div\");\n  defaultMeasureBox.style.cssText = \"position: absolute !important; top: -4000px !important; width: auto !important; height: auto !important;\" + \"padding: 0 !important; margin: 0 !important; border: 0 !important;\" + \"line-height: normal !important; visibility: hidden !important; white-space: pre!important;\";\n}\n\nvar TextMetrics = function (Class) {\n  function TextMetrics(options) {\n    Class.call(this);\n    this._cache = new LRUCache(1000);\n    this.options = Object.assign({}, DEFAULT_OPTIONS, options);\n  }\n\n  if (Class) TextMetrics.__proto__ = Class;\n  TextMetrics.prototype = Object.create(Class && Class.prototype);\n  TextMetrics.prototype.constructor = TextMetrics;\n\n  TextMetrics.prototype.measure = function measure(text, style, options) {\n    if (options === void 0) options = {};\n\n    if (typeof text === 'undefined' || text === null) {\n      return zeroSize();\n    }\n\n    var styleKey = objectKey(style);\n    var cacheKey = hashKey(text + styleKey);\n\n    var cachedResult = this._cache.get(cacheKey);\n\n    if (cachedResult) {\n      return cachedResult;\n    }\n\n    var size = zeroSize();\n    var measureBox = options.box || defaultMeasureBox;\n\n    var baselineMarker = this._baselineMarker().cloneNode(false);\n\n    for (var key in style) {\n      var value = style[key];\n\n      if (typeof value !== \"undefined\") {\n        measureBox.style[key] = value;\n      }\n    }\n\n    var textStr = options.normalizeText !== false ? normalizeText(text) : String(text);\n    measureBox.textContent = textStr;\n    measureBox.appendChild(baselineMarker);\n    document.body.appendChild(measureBox);\n\n    if (textStr.length) {\n      size.width = measureBox.offsetWidth - this.options.baselineMarkerSize;\n      size.height = measureBox.offsetHeight;\n      size.baseline = baselineMarker.offsetTop + this.options.baselineMarkerSize;\n    }\n\n    if (size.width > 0 && size.height > 0) {\n      this._cache.put(cacheKey, size);\n    }\n\n    measureBox.parentNode.removeChild(measureBox);\n    return size;\n  };\n\n  TextMetrics.prototype._baselineMarker = function _baselineMarker() {\n    var marker = document.createElement(\"div\");\n    marker.style.cssText = \"display: inline-block; vertical-align: baseline;width: \" + this.options.baselineMarkerSize + \"px; height: \" + this.options.baselineMarkerSize + \"px;overflow: hidden;\";\n    return marker;\n  };\n\n  return TextMetrics;\n}(Class);\n\nTextMetrics.current = new TextMetrics();\nexport default TextMetrics;","map":{"version":3,"sources":["C:/Users/nsahi/OneDrive/Documents/cyber_media/cm_galaxy/node_modules/@progress/kendo-drawing/dist/es/text-metrics/text-metrics.js"],"names":["LRUCache","Class","objectKey","hashKey","normalizeText","zeroSize","width","height","baseline","DEFAULT_OPTIONS","baselineMarkerSize","defaultMeasureBox","document","createElement","style","cssText","TextMetrics","options","call","_cache","Object","assign","__proto__","prototype","create","constructor","measure","text","styleKey","cacheKey","cachedResult","get","size","measureBox","box","baselineMarker","_baselineMarker","cloneNode","key","value","textStr","String","textContent","appendChild","body","length","offsetWidth","offsetHeight","offsetTop","put","parentNode","removeChild","marker","current"],"mappings":"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","sourcesContent":["import LRUCache from './lru-cache';\r\nimport { Class } from '../common';\r\nimport { objectKey, hashKey, normalizeText } from './util';\r\n\r\nfunction zeroSize() {\r\n    return { width: 0, height: 0, baseline: 0 };\r\n}\r\n\r\nvar DEFAULT_OPTIONS = {\r\n    baselineMarkerSize: 1\r\n};\r\n\r\nvar defaultMeasureBox;\r\n\r\nif (typeof document !== \"undefined\") {\r\n    defaultMeasureBox = document.createElement(\"div\");\r\n    defaultMeasureBox.style.cssText = \"position: absolute !important; top: -4000px !important; width: auto !important; height: auto !important;\" +\r\n              \"padding: 0 !important; margin: 0 !important; border: 0 !important;\" +\r\n              \"line-height: normal !important; visibility: hidden !important; white-space: pre!important;\";\r\n}\r\n\r\nvar TextMetrics = (function (Class) {\r\n    function TextMetrics(options) {\r\n        Class.call(this);\r\n\r\n        this._cache = new LRUCache(1000);\r\n        this.options = Object.assign({}, DEFAULT_OPTIONS, options);\r\n    }\r\n\r\n    if ( Class ) TextMetrics.__proto__ = Class;\r\n    TextMetrics.prototype = Object.create( Class && Class.prototype );\r\n    TextMetrics.prototype.constructor = TextMetrics;\r\n\r\n    TextMetrics.prototype.measure = function measure (text, style, options) {\r\n        if ( options === void 0 ) options = {};\r\n\r\n        if (typeof text === 'undefined' || text === null) {\r\n            return zeroSize();\r\n        }\r\n\r\n        var styleKey = objectKey(style);\r\n        var cacheKey = hashKey(text + styleKey);\r\n        var cachedResult = this._cache.get(cacheKey);\r\n\r\n        if (cachedResult) {\r\n            return cachedResult;\r\n        }\r\n\r\n        var size = zeroSize();\r\n        var measureBox = options.box || defaultMeasureBox;\r\n        var baselineMarker = this._baselineMarker().cloneNode(false);\r\n\r\n        for (var key in style) {\r\n            var value = style[key];\r\n            if (typeof value !== \"undefined\") {\r\n                measureBox.style[key] = value;\r\n            }\r\n        }\r\n\r\n        var textStr = options.normalizeText !== false ? normalizeText(text) : String(text);\r\n\r\n        measureBox.textContent = textStr;\r\n        measureBox.appendChild(baselineMarker);\r\n        document.body.appendChild(measureBox);\r\n\r\n        if (textStr.length) {\r\n            size.width = measureBox.offsetWidth - this.options.baselineMarkerSize;\r\n            size.height = measureBox.offsetHeight;\r\n            size.baseline = baselineMarker.offsetTop + this.options.baselineMarkerSize;\r\n        }\r\n\r\n        if (size.width > 0 && size.height > 0) {\r\n            this._cache.put(cacheKey, size);\r\n        }\r\n\r\n        measureBox.parentNode.removeChild(measureBox);\r\n\r\n        return size;\r\n    };\r\n\r\n    TextMetrics.prototype._baselineMarker = function _baselineMarker () {\r\n        var marker = document.createElement(\"div\");\r\n        marker.style.cssText = \"display: inline-block; vertical-align: baseline;width: \" +\r\n            this.options.baselineMarkerSize + \"px; height: \" + this.options.baselineMarkerSize + \"px;overflow: hidden;\";\r\n\r\n        return marker;\r\n    };\r\n\r\n    return TextMetrics;\r\n}(Class));\r\n\r\nTextMetrics.current = new TextMetrics();\r\n\r\nexport default TextMetrics;\r\n"]},"metadata":{},"sourceType":"module"}