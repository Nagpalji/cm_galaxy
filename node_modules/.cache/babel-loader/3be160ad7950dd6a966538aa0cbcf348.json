{"ast":null,"code":"import _slicedToArray from\"C:/Users/nsahi/OneDrive/Documents/cyber_media/cm_galaxy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";// ** React Imports\nimport{Fragment,useState,useEffect,memo}from'react';// ** Table Columns\nimport{serverSideColumns}from'./data';// ** Store & Actions\nimport{getData}from'./actions';import{useSelector,useDispatch}from'react-redux';// ** Third Party Components\nimport ReactPaginate from'react-paginate';import{ChevronDown}from'react-feather';import DataTable from'react-data-table-component';import{Card,CardHeader,CardTitle,Input,Label,Row,Col,Spinner}from'reactstrap';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DataAudienceOverview=function DataAudienceOverview(){// ** Store Vars\nvar dispatch=useDispatch();var store=useSelector(function(state){return state.dataTables;});// ** States\nvar _useState=useState(1),_useState2=_slicedToArray(_useState,2),currentPage=_useState2[0],setCurrentPage=_useState2[1];var _useState3=useState(7),_useState4=_slicedToArray(_useState3,2),rowsPerPage=_useState4[0],setRowsPerPage=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),searchValue=_useState6[0],setSearchValue=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),pages=_useState8[0],setPages=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),cur=_useState10[0],setCur=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),allData=_useState12[0],setAllData=_useState12[1];var google_region=sessionStorage.getItem(\"google_region_sel\");var google_campaign=sessionStorage.getItem(\"google_campaign_sel\");var google_adgroup=sessionStorage.getItem(\"google_adgroup_sel\");var google_device=sessionStorage.getItem(\"google_device_sel\");sessionStorage.getItem(\"google_region\");// const [store, setStore] = useState([])\nvar brand_name=localStorage.getItem(\"brand_name\");var fett='https://srvr1px.cyberads.io/adword_topcampaign/?brand_name=';var fet=fett+brand_name;var sy=localStorage.getItem(\"sy\");var sm=localStorage.getItem(\"sm\");var sd=localStorage.getItem(\"sd\");var ey=localStorage.getItem(\"ey\");var em=localStorage.getItem(\"em\");var ed=localStorage.getItem(\"ed\");var sy1=\"&sy=\";var sm1=\"&sm=\";var sd1=\"&sd=\";var ey1=\"&ey=\";var em1=\"&em=\";var ed1=\"&ed=\";var region='&region=';var campaign='&campaign=';var adgroup='&adgroup=';var device=\"&device=\";if(ey==='NaN'){ey=sy;}if(em==='NaN'){em=sm;}if(ed==='NaN'){ed=sd;}var page=\"&page=\";var x=1;useState(function(){fetch(fet+sy1+sy+sm1+sm+sd1+sd+ey1+ey+em1+em+ed1+ed+page+x+region+google_region+campaign+google_campaign+adgroup+google_adgroup+device+google_device,{// fetch('https://srvr1px.cyberads.io/adword_clicks/?brand_name=gems&startdate=,${startdate},&enddate=${enddate}', {\nmethod:'GET'}).then(function(res){return res.json();}).then(function(result){// setStore(result)\nsetAllData(result);result.map(function(res){setPages(res.total_pages);//setCur(res.current_page)\n});},function(error){//this.setState({ error });\n});});// ** Get data on mount\nuseEffect(function(){dispatch(getData({page:currentPage,perPage:rowsPerPage,q:searchValue}));},[dispatch]);// ** Function to handle filter\nvar handleFilter=function handleFilter(e){setSearchValue(e.target.value);dispatch(getData({page:currentPage,perPage:rowsPerPage,q:e.target.value}));};// ** Function to handle Pagination and get data\nvar handlePagination=function handlePagination(page){var s=JSON.stringify(page).split(':');var sel=s[1].split('}');var sel_val=parseInt(sel[0])+1;var page1=\"&page=\";//  const pagesel = \"https://srvr1px.cyberads.io/adword_clicks/?brand_name=Asia_pacific&sy=2021&sm=07&sd=01&ey=2021&em=07&ed=03&page=\"\nfetch(fet+sy1+sy+sm1+sm+sd1+sd+ey1+ey+em1+em+ed1+ed+page1+sel_val+region+google_region+campaign+google_campaign+adgroup+google_adgroup+device+google_device,{// fetch('https://srvr1px.cyberads.io/adword_clicks/?brand_name=gems&startdate=,${startdate},&enddate=${enddate}', {\nmethod:'GET'}).then(function(res){return res.json();}).then(function(result){// setStore(result)\nsetAllData(result);result.map(function(res){setPages(res.total_pages);//setCur(res.current_page)\n});},function(error){//this.setState({ error });\n});/*getData({\r\n      page: page.selected + 1,\r\n      perPage: rowsPerPage,\r\n      q: searchValue\r\n    })*/setCurrentPage(page.selected+1);};// ** Function to handle per page\nvar handlePerPage=function handlePerPage(e){dispatch(getData({page:currentPage,perPage:parseInt(e.target.value),q:searchValue}));setRowsPerPage(parseInt(e.target.value));};// ** Custom Pagination\nvar CustomPagination=function CustomPagination(){//const count = Number((pages / rowsPerPage).toFixed(0))\nvar count=pages;return/*#__PURE__*/_jsx(ReactPaginate,{previousLabel:'',nextLabel:'',breakLabel:\"...\",pageCount:count||1,marginPagesDisplayed:2,pageRangeDisplayed:2,activeClassName:\"active\",forcePage:currentPage!==0?currentPage-1:0,onPageChange:function onPageChange(page){return handlePagination(page);},pageClassName:'page-item',nextLinkClassName:'page-link',nextClassName:'page-item next',previousClassName:'page-item prev',previousLinkClassName:'page-link',pageLinkClassName:'page-link',breakClassName:\"page-item\",breakLinkClassName:\"page-link\",containerClassName:'pagination react-paginate separated-pagination pagination-sm justify-content-end pr-1 mt-2'});};// ** Table data to render\nvar dataToRender=function dataToRender(){var filters={q:searchValue};var isFiltered=Object.keys(filters).some(function(k){return filters[k].length>0;});if(store.length>0){return store;}else if(store.length===0&&isFiltered){return[];}else{return allData.slice(0,rowsPerPage);}};if(allData.length===0){return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(Row,{className:\"match-height\",children:[/*#__PURE__*/_jsx(Col,{lg:\"10\",md:\"12\",children:/*#__PURE__*/_jsx(CardHeader,{children:/*#__PURE__*/_jsx(CardTitle,{tag:\"h4\",children:\"Top Campaigns\"})})}),/*#__PURE__*/_jsxs(Col,{lg:\"2\",md:\"12\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"demo-inline-spacing justify-content-between loader_mobileal\",style:{marginLeft:30},children:/*#__PURE__*/_jsx(Spinner,{color:\"primary\"})}),/*#__PURE__*/_jsx(\"div\",{style:{height:\"430px\",visibility:'hidden'}})]})]})})});}else{return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardHeader,{className:\"border-bottom\",children:/*#__PURE__*/_jsx(CardTitle,{tag:\"h4\",children:\"Top Campaigns\"})}),/*#__PURE__*/_jsx(DataTable,{noHeader:true,pagination:true,paginationServer:true,className:\"react-dataTable\",columns:serverSideColumns,sortIcon:/*#__PURE__*/_jsx(ChevronDown,{size:10}),paginationComponent:CustomPagination,data:dataToRender()})]})});}};export default/*#__PURE__*/memo(DataAudienceOverview);","map":{"version":3,"sources":["C:/Users/nsahi/OneDrive/Documents/cyber_media/cm_galaxy/src/views/dashboard/ecommerce/TopCampaign.js"],"names":["Fragment","useState","useEffect","memo","serverSideColumns","getData","useSelector","useDispatch","ReactPaginate","ChevronDown","DataTable","Card","CardHeader","CardTitle","Input","Label","Row","Col","Spinner","DataAudienceOverview","dispatch","store","state","dataTables","currentPage","setCurrentPage","rowsPerPage","setRowsPerPage","searchValue","setSearchValue","pages","setPages","cur","setCur","allData","setAllData","google_region","sessionStorage","getItem","google_campaign","google_adgroup","google_device","brand_name","localStorage","fett","fet","sy","sm","sd","ey","em","ed","sy1","sm1","sd1","ey1","em1","ed1","region","campaign","adgroup","device","page","x","fetch","method","then","res","json","result","map","total_pages","error","perPage","q","handleFilter","e","target","value","handlePagination","s","JSON","stringify","split","sel","sel_val","parseInt","page1","selected","handlePerPage","CustomPagination","count","dataToRender","filters","isFiltered","Object","keys","some","k","length","slice","marginLeft","height","visibility"],"mappings":"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","sourcesContent":["// ** React Imports\r\nimport { Fragment, useState, useEffect, memo } from 'react'\r\n\r\n// ** Table Columns\r\nimport { serverSideColumns } from './data'\r\n\r\n// ** Store & Actions\r\nimport { getData } from './actions'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\n\r\n// ** Third Party Components\r\nimport ReactPaginate from 'react-paginate'\r\nimport { ChevronDown } from 'react-feather'\r\nimport DataTable from 'react-data-table-component'\r\nimport { Card, CardHeader, CardTitle, Input, Label, Row, Col, Spinner } from 'reactstrap'\r\n\r\nconst DataAudienceOverview = () => {\r\n  // ** Store Vars\r\n  const dispatch = useDispatch()\r\n  const store = useSelector(state => state.dataTables)\r\n\r\n  // ** States\r\n  const [currentPage, setCurrentPage] = useState(1)\r\n  const [rowsPerPage, setRowsPerPage] = useState(7)\r\n  const [searchValue, setSearchValue] = useState('')\r\n  const [pages, setPages] = useState('')\r\n  const [cur, setCur] = useState('')\r\n  const [allData, setAllData] = useState([])\r\n  const google_region = sessionStorage.getItem(\"google_region_sel\")\r\n  const google_campaign = sessionStorage.getItem(\"google_campaign_sel\")\r\n  const google_adgroup = sessionStorage.getItem(\"google_adgroup_sel\")\r\n  const google_device = sessionStorage.getItem(\"google_device_sel\")\r\n  sessionStorage.getItem(\"google_region\")\r\n  // const [store, setStore] = useState([])\r\n  const brand_name = localStorage.getItem(\"brand_name\")\r\n  const fett = 'https://srvr1px.cyberads.io/adword_topcampaign/?brand_name='\r\n  const fet = fett + brand_name\r\n  const sy = localStorage.getItem(\"sy\")\r\n  const sm = localStorage.getItem(\"sm\")\r\n  const sd = localStorage.getItem(\"sd\")\r\n  let ey = localStorage.getItem(\"ey\")\r\n  let em = localStorage.getItem(\"em\")\r\n  let ed = localStorage.getItem(\"ed\")\r\n\r\n  const sy1 = \"&sy=\"\r\n  const sm1 = \"&sm=\"\r\n  const sd1 = \"&sd=\"\r\n  const ey1 = \"&ey=\"\r\n  const em1 = \"&em=\"\r\n  const ed1 = \"&ed=\"\r\n  const region = '&region='\r\n  const campaign = '&campaign='\r\n  const adgroup = '&adgroup='\r\n  const device = \"&device=\"\r\n\r\n  if (ey === 'NaN') {\r\n    ey = sy\r\n  }\r\n  if (em === 'NaN') {\r\n    em = sm\r\n  }\r\n  if (ed === 'NaN') {\r\n    ed = sd\r\n  }\r\n  const page = \"&page=\"\r\n  const x = 1\r\n  useState(() => {\r\n\r\n    fetch(fet + sy1 + sy + sm1 + sm + sd1 + sd + ey1 + ey + em1 + em + ed1 + ed + page + x + region + google_region + campaign + google_campaign + adgroup + google_adgroup + device + google_device,\r\n      {\r\n\r\n        // fetch('https://srvr1px.cyberads.io/adword_clicks/?brand_name=gems&startdate=,${startdate},&enddate=${enddate}', {\r\n        method: 'GET'\r\n      })\r\n      .then(res => res.json())\r\n      .then((result) => {\r\n\r\n        // setStore(result)\r\n\r\n        setAllData(result)\r\n        result.map(res => {\r\n          setPages(res.total_pages)\r\n          //setCur(res.current_page)\r\n        })\r\n\r\n      },\r\n        (error) => {\r\n          //this.setState({ error });\r\n        }\r\n      )\r\n  })\r\n\r\n  // ** Get data on mount\r\n  useEffect(() => {\r\n    dispatch(\r\n      getData({\r\n        page: currentPage,\r\n        perPage: rowsPerPage,\r\n        q: searchValue\r\n      })\r\n    )\r\n  }, [dispatch])\r\n\r\n\r\n  // ** Function to handle filter\r\n  const handleFilter = e => {\r\n    setSearchValue(e.target.value)\r\n\r\n    dispatch(\r\n      getData({\r\n        page: currentPage,\r\n        perPage: rowsPerPage,\r\n        q: e.target.value\r\n      })\r\n    )\r\n  }\r\n\r\n  // ** Function to handle Pagination and get data\r\n  const handlePagination = page => {\r\n    const s = JSON.stringify(page).split(':')\r\n    const sel = s[1].split('}')\r\n    const sel_val = parseInt(sel[0]) + 1\r\n    const page1 = \"&page=\"\r\n    //  const pagesel = \"https://srvr1px.cyberads.io/adword_clicks/?brand_name=Asia_pacific&sy=2021&sm=07&sd=01&ey=2021&em=07&ed=03&page=\"\r\n    fetch(fet + sy1 + sy + sm1 + sm + sd1 + sd + ey1 + ey + em1 + em + ed1 + ed + page1 + sel_val + region + google_region + campaign + google_campaign + adgroup + google_adgroup + device + google_device,\r\n      {\r\n\r\n        // fetch('https://srvr1px.cyberads.io/adword_clicks/?brand_name=gems&startdate=,${startdate},&enddate=${enddate}', {\r\n        method: 'GET'\r\n      })\r\n      .then(res => res.json())\r\n      .then((result) => {\r\n        // setStore(result)\r\n\r\n        setAllData(result)\r\n        result.map(res => {\r\n          setPages(res.total_pages)\r\n          //setCur(res.current_page)\r\n        })\r\n\r\n      },\r\n        (error) => {\r\n          //this.setState({ error });\r\n        }\r\n      )\r\n    /*getData({\r\n      page: page.selected + 1,\r\n      perPage: rowsPerPage,\r\n      q: searchValue\r\n    })*/\r\n\r\n    setCurrentPage(page.selected + 1)\r\n  }\r\n\r\n  // ** Function to handle per page\r\n  const handlePerPage = e => {\r\n    dispatch(\r\n      getData({\r\n        page: currentPage,\r\n        perPage: parseInt(e.target.value),\r\n        q: searchValue\r\n      })\r\n    )\r\n    setRowsPerPage(parseInt(e.target.value))\r\n  }\r\n\r\n  // ** Custom Pagination\r\n  const CustomPagination = () => {\r\n\r\n    //const count = Number((pages / rowsPerPage).toFixed(0))\r\n    const count = pages\r\n\r\n    return (\r\n      <ReactPaginate\r\n        previousLabel={''}\r\n        nextLabel={''}\r\n        breakLabel='...'\r\n        pageCount={count || 1}\r\n        marginPagesDisplayed={2}\r\n        pageRangeDisplayed={2}\r\n        activeClassName='active'\r\n        forcePage={currentPage !== 0 ? currentPage - 1 : 0}\r\n        onPageChange={page => handlePagination(page)}\r\n        pageClassName={'page-item'}\r\n        nextLinkClassName={'page-link'}\r\n        nextClassName={'page-item next'}\r\n        previousClassName={'page-item prev'}\r\n        previousLinkClassName={'page-link'}\r\n        pageLinkClassName={'page-link'}\r\n        breakClassName='page-item'\r\n        breakLinkClassName='page-link'\r\n        containerClassName={\r\n          'pagination react-paginate separated-pagination pagination-sm justify-content-end pr-1 mt-2'\r\n        }\r\n      />\r\n    )\r\n  }\r\n\r\n  // ** Table data to render\r\n  const dataToRender = () => {\r\n    const filters = {\r\n      q: searchValue\r\n    }\r\n\r\n    const isFiltered = Object.keys(filters).some(function (k) {\r\n      return filters[k].length > 0\r\n    })\r\n\r\n    if (store.length > 0) {\r\n      return store\r\n    } else if (store.length === 0 && isFiltered) {\r\n      return []\r\n    } else {\r\n      return allData.slice(0, rowsPerPage)\r\n    }\r\n  }\r\n  if (allData.length === 0) {\r\n    return (\r\n      <Fragment>\r\n\r\n        <Card>\r\n          <Row className='match-height'>\r\n            <Col lg='10' md='12'>\r\n              <CardHeader>\r\n                <CardTitle tag='h4'>Top Campaigns</CardTitle>\r\n              </CardHeader>\r\n            </Col>\r\n\r\n            <Col lg='2' md='12'>\r\n              <div className='demo-inline-spacing justify-content-between loader_mobileal' style={{ marginLeft: 30 }}>\r\n                <Spinner color='primary' />\r\n              </div>\r\n              {/* <PieChart containerProps={{ style: { height: \"430px\" } }} highcharts={Highcharts}  /> */}\r\n              <div style={{ height: \"430px\", visibility: 'hidden' }} ></div>\r\n            </Col>\r\n          </Row>\r\n        </Card>\r\n      </Fragment>)\r\n  } else {\r\n    return (\r\n      <Fragment>\r\n        <Card>\r\n          <CardHeader className='border-bottom'>\r\n            <CardTitle tag='h4'>Top Campaigns</CardTitle>\r\n          </CardHeader>\r\n          {/* <Row className='mx-0 mt-1 mb-50'>\r\n          <Col sm='6'>\r\n            <div className='d-flex align-items-center'>\r\n              <Label for='sort-select'>show</Label>\r\n              <Input\r\n                className='dataTable-select'\r\n                type='select'\r\n                id='sort-select'\r\n                value={rowsPerPage}\r\n                onChange={e => handlePerPage(e)}\r\n              >\r\n                <option value={7}>7</option>\r\n                <option value={10}>10</option>\r\n                <option value={25}>25</option>\r\n                <option value={50}>50</option>\r\n                <option value={75}>75</option>\r\n                <option value={100}>100</option>\r\n              </Input>\r\n              <Label for='sort-select'>entries</Label>\r\n            </div>\r\n          </Col>\r\n          <Col className='d-flex align-items-center justify-content-sm-end mt-sm-0 mt-1' sm='6'>\r\n            <Label className='mr-1' for='search-input'>\r\n              Search\r\n            </Label>\r\n            <Input\r\n              className='dataTable-filter'\r\n              type='text'\r\n              bsSize='sm'\r\n              id='search-input'\r\n              value={searchValue}\r\n              onChange={handleFilter}\r\n            />\r\n          </Col>\r\n        </Row> */}\r\n          <DataTable\r\n            noHeader\r\n            pagination\r\n            paginationServer\r\n            className='react-dataTable'\r\n            columns={serverSideColumns}\r\n            sortIcon={<ChevronDown size={10} />}\r\n            paginationComponent={CustomPagination}\r\n            data={dataToRender()}\r\n          />\r\n        </Card>\r\n      </Fragment>\r\n    )\r\n  }\r\n}\r\nexport default memo(DataAudienceOverview)"]},"metadata":{},"sourceType":"module"}