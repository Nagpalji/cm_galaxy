{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { registerForIntl, provideIntlService } from '@progress/kendo-react-intl';\nimport { DomEventsBuilder as ChartDomEventsBuilder, InstanceObserver } from '@progress/kendo-charts';\nimport { canUseDOM } from '@progress/kendo-react-common';\nimport { hasParent } from './utils/main';\nimport { DomEventsBuilder } from './events/dom-events-builder';\nimport { create as createEvent } from './events/chart-event-builder';\nimport { toDomEvent } from './events/dom-event';\nimport { loadTheme } from './theming/theme-service';\nimport createStore from './store/store';\nimport { optionsReducer, themeReducer, observersReducer } from './store/reducer';\nimport { toggle } from './utils/main';\nimport './defaults';\nimport { SeriesTooltip } from './tooltip/Series';\nimport { CrosshairTooltipContainer } from './tooltip/CrosshairContainer';\nimport { ChartContext } from './ChartContext';\nimport { validatePackage } from '@progress/kendo-react-common';\nimport { packageMetadata } from './package-metadata';\n/**\r\n * @hidden\r\n */\n\nvar BaseChart = function (_super) {\n  __extends(BaseChart, _super);\n\n  function BaseChart(props) {\n    var _this = _super.call(this, props) || this;\n    /**\r\n     * @hidden\r\n     */\n\n\n    _this.chartInstance = null;\n    /**\r\n     * @hidden\r\n     */\n\n    _this.surface = null;\n    _this._element = null;\n    _this.optionsStore = {};\n    _this.optionsUnsubscriber = Function.prototype;\n    _this.themeStore = {};\n    _this.themeUnsubscriber = Function.prototype;\n    _this.observersStore = {};\n    _this.suppressTransitions = false;\n    /* Chart handlers */\n\n    /**\r\n     * @hidden\r\n     */\n\n    _this.onRender = function (e) {\n      if (_this.chartInstance !== null) {\n        _this.surface = e.sender.surface;\n\n        _this.trigger('render', e);\n      }\n    };\n    /**\r\n     * @hidden\r\n     */\n\n\n    _this.onLegendItemClick = function (e) {\n      if (_this.chartInstance !== null) {\n        /**\r\n         * In \"controlled\" state the user should toggle the series data visibility\r\n         */\n        if (_this.props.onLegendItemClick) {\n          _this.trigger('legendItemClick', e);\n        } else {\n          var series = _this.optionsStore.getState().series;\n\n          if (!series) {\n            return;\n          }\n\n          var payload = {};\n          var seriesIndex = e.seriesIndex,\n              pointIndex = e.pointIndex;\n          var seriesByIndex = series[seriesIndex];\n\n          if (pointIndex === undefined) {\n            payload = Object.assign({}, seriesByIndex, {\n              visible: toggle(seriesByIndex.visible)\n            });\n          } else {\n            var pv = seriesByIndex.pointVisibility = seriesByIndex.pointVisibility || [];\n            pv[pointIndex] = toggle(pv[pointIndex]);\n            payload = Object.assign({}, seriesByIndex);\n          }\n\n          _this.optionsStore.dispatch({\n            chartCollectionIdxKey: \"series_\".concat(seriesIndex),\n            payload: payload\n          });\n\n          _this.suppressTransitions = true;\n        }\n      }\n    };\n    /* Dom event handlers */\n\n    /**\r\n     * @hidden\r\n     */\n\n\n    _this.onWindowResize = function () {\n      if (_this.chartInstance !== null) {\n        _this.chartInstance.resize();\n      }\n    };\n    /**\r\n     * @hidden\r\n     */\n\n\n    _this.onChartMouseLeave = function (e) {\n      var domEvent = toDomEvent(_this, e);\n\n      var isDefaultPrevented = _this.triggerDomEvent('onMouseLeave', domEvent);\n\n      if (isDefaultPrevented) {\n        e.preventDefault();\n      } else if (_this.chartInstance !== null) {\n        _this.chartInstance.hideElements();\n      }\n    };\n    /**\r\n     * @hidden\r\n     */\n\n\n    _this.onChildMouseLeave = function (e) {\n      var syntheticEvent = e.syntheticEvent;\n\n      if (_this.chartInstance && !hasParent(syntheticEvent.relatedTarget, _this.element)) {\n        _this.chartInstance.hideElements();\n      }\n\n      return false;\n    };\n\n    validatePackage(packageMetadata);\n    _this.optionsStore = createStore(optionsReducer);\n    _this.observersStore = createStore(observersReducer);\n    _this.childrenObserver = new InstanceObserver(_this, {\n      onMouseLeave: 'onChildMouseLeave'\n    });\n    _this.contextValue = {\n      optionsStore: _this.optionsStore,\n      observersStore: _this.observersStore,\n      childrenObserver: _this.childrenObserver\n    };\n    _this.themeStore = createStore(themeReducer);\n    _this.chartObserver = new InstanceObserver(_this, {\n      render: 'onRender',\n      legendItemClick: 'onLegendItemClick'\n    });\n    return _this;\n  }\n\n  Object.defineProperty(BaseChart.prototype, \"element\", {\n    /**\r\n     * @hidden\r\n     */\n    get: function get() {\n      return this._element;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  /**\r\n   * @hidden\r\n   */\n\n  BaseChart.prototype.componentDidMount = function () {\n    var _a;\n\n    var doc = ((_a = this._element) === null || _a === void 0 ? void 0 : _a.ownerDocument) || document;\n    loadTheme(this.themeStore, this.instantiateCoreChart.bind(this), doc);\n    this.optionsUnsubscriber = this.optionsStore.subscribe(this.refresh.bind(this));\n    this.themeUnsubscriber = this.themeStore.subscribe(this.refresh.bind(this));\n    window.addEventListener('resize', this.onWindowResize);\n  };\n  /**\r\n   * @hidden\r\n   */\n\n\n  BaseChart.prototype.componentWillUnmount = function () {\n    this.optionsUnsubscriber();\n    this.themeUnsubscriber();\n\n    if (this.chartInstance !== null) {\n      this.chartInstance.destroy();\n      this.chartInstance = null;\n    }\n\n    window.removeEventListener('resize', this.onWindowResize);\n  };\n  /**\r\n   * @hidden\r\n   */\n\n\n  BaseChart.prototype.componentDidUpdate = function (prevProps) {\n    var _a = this.props,\n        dir = _a.dir,\n        children = _a.children,\n        spreadProps = __rest(_a, [\"dir\", \"children\"]);\n\n    if (this.chartInstance !== null) {\n      var currentIntlService = provideIntlService(this);\n      var chartService = this.chartInstance.chartService;\n      var localeChanged = currentIntlService.locale !== chartService._intlService.locale;\n      var shouldUpdate = Object.entries(prevProps).filter(function (keyValue) {\n        return keyValue[0] !== 'dir' && keyValue[0] !== 'children';\n      }).some(function (keyValue) {\n        var key = keyValue[0],\n            value = keyValue[1];\n        return !(spreadProps.hasOwnProperty(key) && spreadProps[key] === value);\n      });\n\n      if (localeChanged) {\n        this.chartInstance.chartService._intlService = currentIntlService;\n        this.chartInstance.chartService.format._intlService = currentIntlService;\n\n        if (!shouldUpdate) {\n          this.chartInstance.noTransitionsRedraw();\n        }\n      }\n\n      if (shouldUpdate) {\n        this.refresh();\n      }\n\n      if (prevProps.dir !== dir) {\n        this.chartInstance.setDirection(this.getDirection(dir));\n      }\n    }\n  };\n  /**\r\n   * @hidden\r\n   */\n\n\n  BaseChart.prototype.render = function () {\n    var _this = this;\n\n    var _a = this.props,\n        _b = _a.style,\n        style = _b === void 0 ? {} : _b,\n        className = _a.className,\n        wrapper = _a.wrapper,\n        children = _a.children;\n    var chartStyles = Object.assign({}, style, {\n      position: 'relative'\n    });\n    var content = React.createElement(wrapper, {\n      className: className,\n      style: chartStyles,\n      key: 'chartElement'\n    }, React.createElement(\"div\", {\n      onMouseLeave: this.onChartMouseLeave,\n      ref: function ref(el) {\n        return _this._element = el;\n      },\n      className: \"k-chart-surface\"\n    }, children));\n    return React.createElement(ChartContext.Provider, {\n      value: this.contextValue\n    }, React.createElement(SeriesTooltip, {\n      key: \"seriesTooltip\"\n    }), React.createElement(CrosshairTooltipContainer, {\n      key: \"crosshairTooltips\"\n    }), content);\n  };\n  /**\r\n   * @hidden\r\n   */\n\n\n  BaseChart.prototype.getDirection = function (dir) {\n    var _this = this;\n\n    var directionFromWindow = function directionFromWindow() {\n      return canUseDOM && window.getComputedStyle(_this.element).direction;\n    };\n\n    var direction = dir !== undefined ? dir : directionFromWindow() || 'ltr';\n    return direction === 'rtl';\n  };\n  /**\r\n   * @hidden\r\n   */\n\n\n  BaseChart.prototype.getChartOptions = function () {\n    var _a = this.props,\n        renderAs = _a.renderAs,\n        pannable = _a.pannable,\n        zoomable = _a.zoomable,\n        paneDefaults = _a.paneDefaults,\n        panes = _a.panes,\n        transitions = _a.transitions,\n        seriesColors = _a.seriesColors,\n        seriesDefaults = _a.seriesDefaults,\n        axisDefaults = _a.axisDefaults,\n        deriveOptionsFromParent = _a.deriveOptionsFromParent;\n    var chartOptions = {}; // undefined clears chart defaults which leads to several issues\n\n    if (renderAs !== undefined) {\n      chartOptions.renderAs = renderAs;\n    }\n\n    if (pannable !== undefined) {\n      chartOptions.pannable = pannable;\n    }\n\n    if (zoomable !== undefined) {\n      chartOptions.zoomable = zoomable;\n    }\n\n    if (paneDefaults !== undefined) {\n      chartOptions.paneDefaults = paneDefaults;\n    }\n\n    if (panes !== undefined) {\n      chartOptions.panes = panes;\n    }\n\n    if (transitions !== undefined) {\n      chartOptions.transitions = transitions;\n    }\n\n    if (seriesColors !== undefined) {\n      chartOptions.seriesColors = seriesColors;\n    }\n\n    if (seriesDefaults !== undefined) {\n      chartOptions.seriesDefaults = seriesDefaults;\n    }\n\n    if (axisDefaults !== undefined) {\n      chartOptions.axisDefaults = axisDefaults;\n    }\n\n    chartOptions = Object.assign(chartOptions, this.optionsStore.getState());\n\n    if (deriveOptionsFromParent) {\n      chartOptions = deriveOptionsFromParent(chartOptions);\n    }\n\n    return chartOptions;\n  };\n  /**\r\n   * @hidden\r\n   */\n\n\n  BaseChart.prototype.refresh = function () {\n    if (this.chartInstance !== null) {\n      var themeOptions = this.themeStore.getState();\n      var chartOptions = this.getChartOptions();\n      var transitions = chartOptions.transitions;\n\n      if (this.suppressTransitions) {\n        chartOptions.transitions = false;\n      }\n\n      if (this.props.onRefresh) {\n        this.props.onRefresh.call(undefined, chartOptions, themeOptions, this.chartInstance);\n      } else {\n        this.chartInstance.setOptions(chartOptions, themeOptions);\n      }\n\n      if (this.suppressTransitions) {\n        chartOptions.transitions = transitions;\n        this.suppressTransitions = false;\n      }\n    }\n  };\n  /**\r\n   * @hidden\r\n   */\n\n\n  BaseChart.prototype.instantiateCoreChart = function () {\n    var _a = this.props,\n        dir = _a.dir,\n        chartConstructor = _a.chartConstructor;\n    var chartOptions = this.getChartOptions();\n    this.chartInstance = new chartConstructor(this.element, chartOptions, this.themeStore.getState(), {\n      rtl: this.getDirection(dir),\n      intlService: provideIntlService(this),\n      observer: this.chartObserver,\n      sender: this\n    });\n  };\n  /* Triggers public dom event handlers */\n\n  /**\r\n   * @hidden\r\n   */\n\n\n  BaseChart.prototype.trigger = function (name, e) {\n    var target = this.props.getTarget();\n    var eventObject = createEvent(name, e, target);\n    var handler = 'on' + name.charAt(0).toUpperCase() + name.slice(1);\n    var observers = this.observersStore.getState();\n    var isDefaultPrevented = false;\n\n    for (var idx = 0; idx < observers.length; idx++) {\n      if (observers[idx].trigger(name, e)) {\n        isDefaultPrevented = true;\n      }\n    }\n    /* We have not prevented the event internally, now pass it to the user */\n\n\n    if (isDefaultPrevented === false && eventObject && this.props.hasOwnProperty(handler)) {\n      this.props[handler].call(undefined, eventObject);\n      return eventObject.isDefaultPrevented && eventObject.isDefaultPrevented();\n    }\n\n    return isDefaultPrevented;\n  };\n  /* Used by (event)InstanceObserver to check the wrapper for supported events */\n\n  /**\r\n   * @hidden\r\n   */\n\n\n  BaseChart.prototype.requiresHandlers = function (names) {\n    for (var idx = 0; idx < names.length; idx++) {\n      var name_1 = names[idx];\n      var handler = 'on' + name_1.charAt(0).toUpperCase() + name_1.slice(1);\n\n      if (this.props.hasOwnProperty(handler)) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n  /* Triggers private dom event handlers */\n\n  /**\r\n   * @hidden\r\n   */\n\n\n  BaseChart.prototype.triggerDomEvent = function (name, e) {\n    var observers = this.observersStore.getState();\n    var isDefaultPrevented = false;\n\n    for (var idx = 0; idx < observers.length; idx++) {\n      if (observers[idx].trigger(name, e)) {\n        isDefaultPrevented = true;\n      }\n    }\n\n    return isDefaultPrevented;\n  };\n  /**\r\n   * @hidden\r\n   */\n\n\n  BaseChart.propTypes = {\n    dir: PropTypes.string,\n    renderAs: PropTypes.oneOf(['svg', 'canvas'])\n  };\n  /**\r\n   * @hidden\r\n   */\n\n  BaseChart.defaultProps = {\n    renderAs: 'svg'\n  };\n  return BaseChart;\n}(React.Component);\n\nexport { BaseChart };\nregisterForIntl(BaseChart);\nChartDomEventsBuilder.register(DomEventsBuilder);","map":{"version":3,"sources":["C:/Users/nsahi/OneDrive/Documents/cyber_media/cm_galaxy/node_modules/@progress/kendo-react-charts/dist/es/BaseChart.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","__rest","s","e","t","indexOf","getOwnPropertySymbols","i","length","propertyIsEnumerable","React","PropTypes","registerForIntl","provideIntlService","DomEventsBuilder","ChartDomEventsBuilder","InstanceObserver","canUseDOM","hasParent","createEvent","toDomEvent","loadTheme","createStore","optionsReducer","themeReducer","observersReducer","toggle","SeriesTooltip","CrosshairTooltipContainer","ChartContext","validatePackage","packageMetadata","BaseChart","_super","props","_this","chartInstance","surface","_element","optionsStore","optionsUnsubscriber","Function","themeStore","themeUnsubscriber","observersStore","suppressTransitions","onRender","sender","trigger","onLegendItemClick","series","getState","payload","seriesIndex","pointIndex","seriesByIndex","undefined","assign","visible","pv","pointVisibility","dispatch","chartCollectionIdxKey","concat","onWindowResize","resize","onChartMouseLeave","domEvent","isDefaultPrevented","triggerDomEvent","preventDefault","hideElements","onChildMouseLeave","syntheticEvent","relatedTarget","element","childrenObserver","onMouseLeave","contextValue","chartObserver","render","legendItemClick","defineProperty","get","enumerable","configurable","componentDidMount","_a","doc","ownerDocument","document","instantiateCoreChart","bind","subscribe","refresh","window","addEventListener","componentWillUnmount","destroy","removeEventListener","componentDidUpdate","prevProps","dir","children","spreadProps","currentIntlService","chartService","localeChanged","locale","_intlService","shouldUpdate","entries","filter","keyValue","some","key","value","format","noTransitionsRedraw","setDirection","getDirection","_b","style","className","wrapper","chartStyles","position","content","createElement","ref","el","Provider","directionFromWindow","getComputedStyle","direction","getChartOptions","renderAs","pannable","zoomable","paneDefaults","panes","transitions","seriesColors","seriesDefaults","axisDefaults","deriveOptionsFromParent","chartOptions","themeOptions","onRefresh","setOptions","chartConstructor","rtl","intlService","observer","name","target","getTarget","eventObject","handler","charAt","toUpperCase","slice","observers","idx","requiresHandlers","names","name_1","propTypes","string","oneOf","defaultProps","Component","register"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __rest = (this && this.__rest) || function (s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n};\r\nimport * as React from 'react';\r\nimport * as PropTypes from 'prop-types';\r\nimport { registerForIntl, provideIntlService } from '@progress/kendo-react-intl';\r\nimport { DomEventsBuilder as ChartDomEventsBuilder, InstanceObserver } from '@progress/kendo-charts';\r\nimport { canUseDOM } from '@progress/kendo-react-common';\r\nimport { hasParent } from './utils/main';\r\nimport { DomEventsBuilder } from './events/dom-events-builder';\r\nimport { create as createEvent } from './events/chart-event-builder';\r\nimport { toDomEvent } from './events/dom-event';\r\nimport { loadTheme } from './theming/theme-service';\r\nimport createStore from './store/store';\r\nimport { optionsReducer, themeReducer, observersReducer } from './store/reducer';\r\nimport { toggle } from './utils/main';\r\nimport './defaults';\r\nimport { SeriesTooltip } from './tooltip/Series';\r\nimport { CrosshairTooltipContainer } from './tooltip/CrosshairContainer';\r\nimport { ChartContext } from './ChartContext';\r\nimport { validatePackage } from '@progress/kendo-react-common';\r\nimport { packageMetadata } from './package-metadata';\r\n/**\r\n * @hidden\r\n */\r\nvar BaseChart = /** @class */ (function (_super) {\r\n    __extends(BaseChart, _super);\r\n    function BaseChart(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        /**\r\n         * @hidden\r\n         */\r\n        _this.chartInstance = null;\r\n        /**\r\n         * @hidden\r\n         */\r\n        _this.surface = null;\r\n        _this._element = null;\r\n        _this.optionsStore = {};\r\n        _this.optionsUnsubscriber = Function.prototype;\r\n        _this.themeStore = {};\r\n        _this.themeUnsubscriber = Function.prototype;\r\n        _this.observersStore = {};\r\n        _this.suppressTransitions = false;\r\n        /* Chart handlers */\r\n        /**\r\n         * @hidden\r\n         */\r\n        _this.onRender = function (e) {\r\n            if (_this.chartInstance !== null) {\r\n                _this.surface = e.sender.surface;\r\n                _this.trigger('render', e);\r\n            }\r\n        };\r\n        /**\r\n         * @hidden\r\n         */\r\n        _this.onLegendItemClick = function (e) {\r\n            if (_this.chartInstance !== null) {\r\n                /**\r\n                 * In \"controlled\" state the user should toggle the series data visibility\r\n                 */\r\n                if (_this.props.onLegendItemClick) {\r\n                    _this.trigger('legendItemClick', e);\r\n                }\r\n                else {\r\n                    var series = _this.optionsStore.getState().series;\r\n                    if (!series) {\r\n                        return;\r\n                    }\r\n                    var payload = {};\r\n                    var seriesIndex = e.seriesIndex, pointIndex = e.pointIndex;\r\n                    var seriesByIndex = series[seriesIndex];\r\n                    if (pointIndex === undefined) {\r\n                        payload = Object.assign({}, seriesByIndex, { visible: toggle(seriesByIndex.visible) });\r\n                    }\r\n                    else {\r\n                        var pv = seriesByIndex.pointVisibility = seriesByIndex.pointVisibility || [];\r\n                        pv[pointIndex] = toggle(pv[pointIndex]);\r\n                        payload = Object.assign({}, seriesByIndex);\r\n                    }\r\n                    _this.optionsStore.dispatch({\r\n                        chartCollectionIdxKey: \"series_\".concat(seriesIndex),\r\n                        payload: payload\r\n                    });\r\n                    _this.suppressTransitions = true;\r\n                }\r\n            }\r\n        };\r\n        /* Dom event handlers */\r\n        /**\r\n         * @hidden\r\n         */\r\n        _this.onWindowResize = function () {\r\n            if (_this.chartInstance !== null) {\r\n                _this.chartInstance.resize();\r\n            }\r\n        };\r\n        /**\r\n         * @hidden\r\n         */\r\n        _this.onChartMouseLeave = function (e) {\r\n            var domEvent = toDomEvent(_this, e);\r\n            var isDefaultPrevented = _this.triggerDomEvent('onMouseLeave', domEvent);\r\n            if (isDefaultPrevented) {\r\n                e.preventDefault();\r\n            }\r\n            else if (_this.chartInstance !== null) {\r\n                _this.chartInstance.hideElements();\r\n            }\r\n        };\r\n        /**\r\n         * @hidden\r\n         */\r\n        _this.onChildMouseLeave = function (e) {\r\n            var syntheticEvent = e.syntheticEvent;\r\n            if (_this.chartInstance && !hasParent(syntheticEvent.relatedTarget, _this.element)) {\r\n                _this.chartInstance.hideElements();\r\n            }\r\n            return false;\r\n        };\r\n        validatePackage(packageMetadata);\r\n        _this.optionsStore = createStore(optionsReducer);\r\n        _this.observersStore = createStore(observersReducer);\r\n        _this.childrenObserver = new InstanceObserver(_this, { onMouseLeave: 'onChildMouseLeave' });\r\n        _this.contextValue = {\r\n            optionsStore: _this.optionsStore,\r\n            observersStore: _this.observersStore,\r\n            childrenObserver: _this.childrenObserver\r\n        };\r\n        _this.themeStore = createStore(themeReducer);\r\n        _this.chartObserver = new InstanceObserver(_this, { render: 'onRender', legendItemClick: 'onLegendItemClick' });\r\n        return _this;\r\n    }\r\n    Object.defineProperty(BaseChart.prototype, \"element\", {\r\n        /**\r\n         * @hidden\r\n         */\r\n        get: function () {\r\n            return this._element;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * @hidden\r\n     */\r\n    BaseChart.prototype.componentDidMount = function () {\r\n        var _a;\r\n        var doc = ((_a = this._element) === null || _a === void 0 ? void 0 : _a.ownerDocument) || document;\r\n        loadTheme(this.themeStore, this.instantiateCoreChart.bind(this), doc);\r\n        this.optionsUnsubscriber = this.optionsStore.subscribe(this.refresh.bind(this));\r\n        this.themeUnsubscriber = this.themeStore.subscribe(this.refresh.bind(this));\r\n        window.addEventListener('resize', this.onWindowResize);\r\n    };\r\n    /**\r\n     * @hidden\r\n     */\r\n    BaseChart.prototype.componentWillUnmount = function () {\r\n        this.optionsUnsubscriber();\r\n        this.themeUnsubscriber();\r\n        if (this.chartInstance !== null) {\r\n            this.chartInstance.destroy();\r\n            this.chartInstance = null;\r\n        }\r\n        window.removeEventListener('resize', this.onWindowResize);\r\n    };\r\n    /**\r\n     * @hidden\r\n     */\r\n    BaseChart.prototype.componentDidUpdate = function (prevProps) {\r\n        var _a = this.props, dir = _a.dir, children = _a.children, spreadProps = __rest(_a, [\"dir\", \"children\"]);\r\n        if (this.chartInstance !== null) {\r\n            var currentIntlService = provideIntlService(this);\r\n            var chartService = this.chartInstance.chartService;\r\n            var localeChanged = currentIntlService.locale !== chartService._intlService.locale;\r\n            var shouldUpdate = Object.entries(prevProps)\r\n                .filter(function (keyValue) { return (keyValue[0] !== 'dir' && keyValue[0] !== 'children'); })\r\n                .some(function (keyValue) {\r\n                var key = keyValue[0], value = keyValue[1];\r\n                return !(spreadProps.hasOwnProperty(key) && spreadProps[key] === value);\r\n            });\r\n            if (localeChanged) {\r\n                this.chartInstance.chartService._intlService = currentIntlService;\r\n                this.chartInstance.chartService.format._intlService = currentIntlService;\r\n                if (!shouldUpdate) {\r\n                    this.chartInstance.noTransitionsRedraw();\r\n                }\r\n            }\r\n            if (shouldUpdate) {\r\n                this.refresh();\r\n            }\r\n            if (prevProps.dir !== dir) {\r\n                this.chartInstance.setDirection(this.getDirection(dir));\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * @hidden\r\n     */\r\n    BaseChart.prototype.render = function () {\r\n        var _this = this;\r\n        var _a = this.props, _b = _a.style, style = _b === void 0 ? {} : _b, className = _a.className, wrapper = _a.wrapper, children = _a.children;\r\n        var chartStyles = Object.assign({}, style, { position: 'relative' });\r\n        var content = React.createElement(wrapper, {\r\n            className: className,\r\n            style: chartStyles,\r\n            key: 'chartElement'\r\n        }, (React.createElement(\"div\", { onMouseLeave: this.onChartMouseLeave, ref: function (el) { return _this._element = el; }, className: \"k-chart-surface\" }, children)));\r\n        return (React.createElement(ChartContext.Provider, { value: this.contextValue },\r\n            React.createElement(SeriesTooltip, { key: \"seriesTooltip\" }),\r\n            React.createElement(CrosshairTooltipContainer, { key: \"crosshairTooltips\" }),\r\n            content));\r\n    };\r\n    /**\r\n     * @hidden\r\n     */\r\n    BaseChart.prototype.getDirection = function (dir) {\r\n        var _this = this;\r\n        var directionFromWindow = function () { return canUseDOM && window.getComputedStyle(_this.element).direction; };\r\n        var direction = dir !== undefined ? dir : (directionFromWindow() || 'ltr');\r\n        return direction === 'rtl';\r\n    };\r\n    /**\r\n     * @hidden\r\n     */\r\n    BaseChart.prototype.getChartOptions = function () {\r\n        var _a = this.props, renderAs = _a.renderAs, pannable = _a.pannable, zoomable = _a.zoomable, paneDefaults = _a.paneDefaults, panes = _a.panes, transitions = _a.transitions, seriesColors = _a.seriesColors, seriesDefaults = _a.seriesDefaults, axisDefaults = _a.axisDefaults, deriveOptionsFromParent = _a.deriveOptionsFromParent;\r\n        var chartOptions = {};\r\n        // undefined clears chart defaults which leads to several issues\r\n        if (renderAs !== undefined) {\r\n            chartOptions.renderAs = renderAs;\r\n        }\r\n        if (pannable !== undefined) {\r\n            chartOptions.pannable = pannable;\r\n        }\r\n        if (zoomable !== undefined) {\r\n            chartOptions.zoomable = zoomable;\r\n        }\r\n        if (paneDefaults !== undefined) {\r\n            chartOptions.paneDefaults = paneDefaults;\r\n        }\r\n        if (panes !== undefined) {\r\n            chartOptions.panes = panes;\r\n        }\r\n        if (transitions !== undefined) {\r\n            chartOptions.transitions = transitions;\r\n        }\r\n        if (seriesColors !== undefined) {\r\n            chartOptions.seriesColors = seriesColors;\r\n        }\r\n        if (seriesDefaults !== undefined) {\r\n            chartOptions.seriesDefaults = seriesDefaults;\r\n        }\r\n        if (axisDefaults !== undefined) {\r\n            chartOptions.axisDefaults = axisDefaults;\r\n        }\r\n        chartOptions = Object.assign(chartOptions, this.optionsStore.getState());\r\n        if (deriveOptionsFromParent) {\r\n            chartOptions = deriveOptionsFromParent(chartOptions);\r\n        }\r\n        return chartOptions;\r\n    };\r\n    /**\r\n     * @hidden\r\n     */\r\n    BaseChart.prototype.refresh = function () {\r\n        if (this.chartInstance !== null) {\r\n            var themeOptions = this.themeStore.getState();\r\n            var chartOptions = this.getChartOptions();\r\n            var transitions = chartOptions.transitions;\r\n            if (this.suppressTransitions) {\r\n                chartOptions.transitions = false;\r\n            }\r\n            if (this.props.onRefresh) {\r\n                this.props.onRefresh.call(undefined, chartOptions, themeOptions, this.chartInstance);\r\n            }\r\n            else {\r\n                this.chartInstance.setOptions(chartOptions, themeOptions);\r\n            }\r\n            if (this.suppressTransitions) {\r\n                chartOptions.transitions = transitions;\r\n                this.suppressTransitions = false;\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * @hidden\r\n     */\r\n    BaseChart.prototype.instantiateCoreChart = function () {\r\n        var _a = this.props, dir = _a.dir, chartConstructor = _a.chartConstructor;\r\n        var chartOptions = this.getChartOptions();\r\n        this.chartInstance = new chartConstructor(this.element, chartOptions, this.themeStore.getState(), {\r\n            rtl: this.getDirection(dir),\r\n            intlService: provideIntlService(this),\r\n            observer: this.chartObserver,\r\n            sender: this\r\n        });\r\n    };\r\n    /* Triggers public dom event handlers */\r\n    /**\r\n     * @hidden\r\n     */\r\n    BaseChart.prototype.trigger = function (name, e) {\r\n        var target = this.props.getTarget();\r\n        var eventObject = createEvent(name, e, target);\r\n        var handler = 'on' + name.charAt(0).toUpperCase() + name.slice(1);\r\n        var observers = this.observersStore.getState();\r\n        var isDefaultPrevented = false;\r\n        for (var idx = 0; idx < observers.length; idx++) {\r\n            if (observers[idx].trigger(name, e)) {\r\n                isDefaultPrevented = true;\r\n            }\r\n        }\r\n        /* We have not prevented the event internally, now pass it to the user */\r\n        if (isDefaultPrevented === false\r\n            && eventObject\r\n            && this.props.hasOwnProperty(handler)) {\r\n            this.props[handler].call(undefined, eventObject);\r\n            return eventObject.isDefaultPrevented && eventObject.isDefaultPrevented();\r\n        }\r\n        return isDefaultPrevented;\r\n    };\r\n    /* Used by (event)InstanceObserver to check the wrapper for supported events */\r\n    /**\r\n     * @hidden\r\n     */\r\n    BaseChart.prototype.requiresHandlers = function (names) {\r\n        for (var idx = 0; idx < names.length; idx++) {\r\n            var name_1 = names[idx];\r\n            var handler = 'on' + name_1.charAt(0).toUpperCase() + name_1.slice(1);\r\n            if (this.props.hasOwnProperty(handler)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    /* Triggers private dom event handlers */\r\n    /**\r\n     * @hidden\r\n     */\r\n    BaseChart.prototype.triggerDomEvent = function (name, e) {\r\n        var observers = this.observersStore.getState();\r\n        var isDefaultPrevented = false;\r\n        for (var idx = 0; idx < observers.length; idx++) {\r\n            if (observers[idx].trigger(name, e)) {\r\n                isDefaultPrevented = true;\r\n            }\r\n        }\r\n        return isDefaultPrevented;\r\n    };\r\n    /**\r\n     * @hidden\r\n     */\r\n    BaseChart.propTypes = {\r\n        dir: PropTypes.string,\r\n        renderAs: PropTypes.oneOf(['svg', 'canvas'])\r\n    };\r\n    /**\r\n     * @hidden\r\n     */\r\n    BaseChart.defaultProps = {\r\n        renderAs: 'svg'\r\n    };\r\n    return BaseChart;\r\n}(React.Component));\r\nexport { BaseChart };\r\nregisterForIntl(BaseChart);\r\nChartDomEventsBuilder.register(DomEventsBuilder);\r\n"]},"metadata":{},"sourceType":"module"}