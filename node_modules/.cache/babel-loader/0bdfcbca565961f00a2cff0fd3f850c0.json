{"ast":null,"code":"import _toConsumableArray from\"C:/Users/nsahi/OneDrive/Documents/cyber_media/cm_galaxy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"C:/Users/nsahi/OneDrive/Documents/cyber_media/cm_galaxy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";// ** React Imports\nimport{useState}from'react';// ** Custom Components\nimport Avatar from'@components/avatar';// ** Store & Actions\nimport{useDispatch}from'react-redux';import{selectChat}from'./store/actions';// ** Utils\nimport{formatDateToMonthShort}from'@utils';// ** Third Party Components\nimport classnames from'classnames';import PerfectScrollbar from'react-perfect-scrollbar';import{X,Search,CheckSquare,Bell,User,Trash}from'react-feather';import{CardText,InputGroup,InputGroupAddon,Input,InputGroupText,Badge,CustomInput,Button}from'reactstrap';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SidebarLeft=function SidebarLeft(props){// ** Props & Store\nvar store=props.store,sidebar=props.sidebar,handleSidebar=props.handleSidebar,userSidebarLeft=props.userSidebarLeft,handleUserSidebarLeft=props.handleUserSidebarLeft;var chats=store.chats,contacts=store.contacts,userProfile=store.userProfile;// ** Dispatch\nvar dispatch=useDispatch();// ** State\nvar _useState=useState(''),_useState2=_slicedToArray(_useState,2),about=_useState2[0],setAbout=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),query=_useState4[0],setQuery=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),active=_useState6[0],setActive=_useState6[1];var _useState7=useState('online'),_useState8=_slicedToArray(_useState7,2),status=_useState8[0],setStatus=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),filteredChat=_useState10[0],setFilteredChat=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),filteredContacts=_useState12[0],setFilteredContacts=_useState12[1];// ** Handles User Chat Click\nvar handleUserClick=function handleUserClick(type,id){dispatch(selectChat(id));setActive({type:type,id:id});if(sidebar===true){handleSidebar();}};// ** Renders Chat\nvar renderChats=function renderChats(){if(chats&&chats.length){if(query.length&&!filteredChat.length){return/*#__PURE__*/_jsx(\"li\",{className:\"no-results show\",children:/*#__PURE__*/_jsx(\"h6\",{className:\"mb-0\",children:\"No Chats Found\"})});}else{var arrToMap=query.length&&filteredChat.length?filteredChat:chats;return arrToMap.map(function(item){var time=formatDateToMonthShort(item.chat.lastMessage?item.chat.lastMessage.time:new Date());return/*#__PURE__*/_jsxs(\"li\",{className:classnames({active:active.type==='chat'&&active.id===item.id}),onClick:function onClick(){return handleUserClick('chat',item.id);},children:[/*#__PURE__*/_jsx(Avatar,{img:item.avatar,imgHeight:\"42\",imgWidth:\"42\",status:item.status}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-info flex-grow-1\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"mb-0\",children:item.fullName}),/*#__PURE__*/_jsx(CardText,{className:\"text-truncate\",children:item.chat.lastMessage?item.chat.lastMessage.message:chats[chats.length-1].message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-meta text-nowrap\",children:[/*#__PURE__*/_jsx(\"small\",{className:\"float-right mb-25 chat-time ml-25\",children:time}),item.chat.unseenMsgs>=1?/*#__PURE__*/_jsx(Badge,{className:\"float-right\",color:\"danger\",pill:true,children:item.chat.unseenMsgs}):null]})]},item.id);});}}else{return null;}};// ** Renders Contact\nvar renderContacts=function renderContacts(){if(contacts&&contacts.length){if(query.length&&!filteredContacts.length){return/*#__PURE__*/_jsx(\"li\",{className:\"no-results show\",children:/*#__PURE__*/_jsx(\"h6\",{className:\"mb-0\",children:\"No Chats Found\"})});}else{var arrToMap=query.length&&filteredContacts.length?filteredContacts:contacts;return arrToMap.map(function(item){return/*#__PURE__*/_jsxs(\"li\",{className:classnames({active:active.type==='contact'&&active.id===item.id}),onClick:function onClick(){return handleUserClick('contact',item.id);},children:[/*#__PURE__*/_jsx(Avatar,{img:item.avatar,imgHeight:\"42\",imgWidth:\"42\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-info flex-grow-1\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"mb-0\",children:item.fullName}),/*#__PURE__*/_jsx(CardText,{className:\"text-truncate\",children:item.about})]})]},item.fullName);});}}else{return null;}};// ** Handles Filter\nvar handleFilter=function handleFilter(e){setQuery(e.target.value);var searchFilterFunction=function searchFilterFunction(contact){return contact.fullName.toLowerCase().includes(e.target.value.toLowerCase());};var filteredChatsArr=chats.filter(searchFilterFunction);var filteredContactssArr=contacts.filter(searchFilterFunction);setFilteredChat(_toConsumableArray(filteredChatsArr));setFilteredContacts(_toConsumableArray(filteredContactssArr));};return store?/*#__PURE__*/_jsx(\"div\",{className:\"sidebar-left\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"sidebar\",children:[/*#__PURE__*/_jsxs(\"div\",{className:classnames('chat-profile-sidebar',{show:userSidebarLeft}),children:[/*#__PURE__*/_jsxs(\"header\",{className:\"chat-profile-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"close-icon\",onClick:handleUserSidebarLeft,children:/*#__PURE__*/_jsx(X,{size:14})}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-profile-sidebar\",children:[/*#__PURE__*/_jsx(Avatar,{className:\"box-shadow-1 avatar-border\",img:userProfile.avatar,status:status,size:\"xl\"}),/*#__PURE__*/_jsx(\"h4\",{className:\"chat-user-name\",children:userProfile.fullName}),/*#__PURE__*/_jsx(\"span\",{className:\"user-post\",children:userProfile.role})]})]}),/*#__PURE__*/_jsxs(PerfectScrollbar,{className:\"profile-sidebar-area\",options:{wheelPropagation:false},children:[/*#__PURE__*/_jsx(\"h6\",{className:\"section-label mb-1\",children:\"About\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"about-user\",children:[/*#__PURE__*/_jsx(Input,{rows:\"5\",defaultValue:userProfile.about,type:\"textarea\",onChange:function onChange(e){return setAbout(e.target.value);},className:classnames('char-textarea',{'text-danger':about&&about.length>120})}),/*#__PURE__*/_jsxs(\"small\",{className:\"counter-value float-right\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"char-count\",children:userProfile.about?userProfile.about.length:0}),\"/ 120\"]})]}),/*#__PURE__*/_jsx(\"h6\",{className:\"section-label mb-1 mt-3\",children:\"Status\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"list-unstyled user-status\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"pb-1\",children:/*#__PURE__*/_jsx(CustomInput,{type:\"radio\",className:\"custom-control-primary\",id:\"online\",label:\"Online\",onChange:function onChange(e){return setStatus('online');},checked:status==='online'})}),/*#__PURE__*/_jsx(\"li\",{className:\"pb-1\",children:/*#__PURE__*/_jsx(CustomInput,{type:\"radio\",className:\"custom-control-danger\",id:\"busy\",label:\"Do Not Disturb\",onChange:function onChange(e){return setStatus('busy');},checked:status==='busy'})}),/*#__PURE__*/_jsx(\"li\",{className:\"pb-1\",children:/*#__PURE__*/_jsx(CustomInput,{type:\"radio\",className:\"custom-control-warning\",id:\"away\",label:\"Away\",onChange:function onChange(e){return setStatus('away');},checked:status==='away'})}),/*#__PURE__*/_jsx(\"li\",{className:\"pb-1\",children:/*#__PURE__*/_jsx(CustomInput,{type:\"radio\",className:\"custom-control-secondary\",id:\"offline\",label:\"Offline\",onChange:function onChange(e){return setStatus('offline');},checked:status==='offline'})})]}),/*#__PURE__*/_jsx(\"h6\",{className:\"section-label mb-1 mt-2\",children:\"Settings\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"list-unstyled\",children:[/*#__PURE__*/_jsxs(\"li\",{className:\"d-flex justify-content-between align-items-center mb-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(CheckSquare,{className:\"mr-75\",size:\"18\"}),/*#__PURE__*/_jsx(\"span\",{className:\"align-middle\",children:\"Two-step Verification\"})]}),/*#__PURE__*/_jsx(CustomInput,{type:\"switch\",id:\"verification\",name:\"verification\",label:\"\",defaultChecked:true})]}),/*#__PURE__*/_jsxs(\"li\",{className:\"d-flex justify-content-between align-items-center mb-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(Bell,{className:\"mr-75\",size:\"18\"}),/*#__PURE__*/_jsx(\"span\",{className:\"align-middle\",children:\"Notification\"})]}),/*#__PURE__*/_jsx(CustomInput,{type:\"switch\",id:\"notifications\",name:\"notifications\",label:\"\"})]}),/*#__PURE__*/_jsxs(\"li\",{className:\"d-flex align-items-center cursor-pointer mb-1\",children:[/*#__PURE__*/_jsx(User,{className:\"mr-75\",size:\"18\"}),/*#__PURE__*/_jsx(\"span\",{className:\"align-middle\",children:\"Invite Friends\"})]}),/*#__PURE__*/_jsxs(\"li\",{className:\"d-flex align-items-center cursor-pointer\",children:[/*#__PURE__*/_jsx(Trash,{className:\"mr-75\",size:\"18\"}),/*#__PURE__*/_jsx(\"span\",{className:\"align-middle\",children:\"Delete Account\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-3\",children:/*#__PURE__*/_jsx(Button,{color:\"primary\",children:\"Logout\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:classnames('sidebar-content',{show:sidebar===true}),children:[/*#__PURE__*/_jsx(\"div\",{className:\"sidebar-close-icon\",onClick:handleSidebar,children:/*#__PURE__*/_jsx(X,{size:14})}),/*#__PURE__*/_jsx(\"div\",{className:\"chat-fixed-search\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center w-100\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"sidebar-profile-toggle\",onClick:handleUserSidebarLeft,children:Object.keys(userProfile).length?/*#__PURE__*/_jsx(Avatar,{className:\"avatar-border\",img:userProfile.avatar,status:status,imgHeight:\"42\",imgWidth:\"42\"}):null}),/*#__PURE__*/_jsxs(InputGroup,{className:\"input-group-merge ml-1 w-100\",children:[/*#__PURE__*/_jsx(InputGroupAddon,{addonType:\"prepend\",children:/*#__PURE__*/_jsx(InputGroupText,{className:\"round\",children:/*#__PURE__*/_jsx(Search,{className:\"text-muted\",size:14})})}),/*#__PURE__*/_jsx(Input,{value:query,className:\"round\",placeholder:\"Search or start a new chat\",onChange:handleFilter})]})]})}),/*#__PURE__*/_jsxs(PerfectScrollbar,{className:\"chat-user-list-wrapper list-group\",options:{wheelPropagation:false},children:[/*#__PURE__*/_jsx(\"h4\",{className:\"chat-list-title\",children:\"Chats\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"chat-users-list chat-list media-list\",children:renderChats()}),/*#__PURE__*/_jsx(\"h4\",{className:\"chat-list-title\",children:\"Contacts\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"chat-users-list contact-list media-list\",children:renderContacts()})]})]})]})}):null;};export default SidebarLeft;","map":{"version":3,"sources":["C:/Users/nsahi/OneDrive/Documents/cyber_media/cm_galaxy/src/views/apps/chat/SidebarLeft.js"],"names":["useState","Avatar","useDispatch","selectChat","formatDateToMonthShort","classnames","PerfectScrollbar","X","Search","CheckSquare","Bell","User","Trash","CardText","InputGroup","InputGroupAddon","Input","InputGroupText","Badge","CustomInput","Button","SidebarLeft","props","store","sidebar","handleSidebar","userSidebarLeft","handleUserSidebarLeft","chats","contacts","userProfile","dispatch","about","setAbout","query","setQuery","active","setActive","status","setStatus","filteredChat","setFilteredChat","filteredContacts","setFilteredContacts","handleUserClick","type","id","renderChats","length","arrToMap","map","item","time","chat","lastMessage","Date","avatar","fullName","message","unseenMsgs","renderContacts","handleFilter","e","target","value","searchFilterFunction","contact","toLowerCase","includes","filteredChatsArr","filter","filteredContactssArr","show","role","wheelPropagation","Object","keys"],"mappings":"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","sourcesContent":["// ** React Imports\r\nimport { useState } from 'react'\r\n\r\n// ** Custom Components\r\nimport Avatar from '@components/avatar'\r\n\r\n// ** Store & Actions\r\nimport { useDispatch } from 'react-redux'\r\nimport { selectChat } from './store/actions'\r\n\r\n// ** Utils\r\nimport { formatDateToMonthShort } from '@utils'\r\n\r\n// ** Third Party Components\r\nimport classnames from 'classnames'\r\nimport PerfectScrollbar from 'react-perfect-scrollbar'\r\nimport { X, Search, CheckSquare, Bell, User, Trash } from 'react-feather'\r\nimport { CardText, InputGroup, InputGroupAddon, Input, InputGroupText, Badge, CustomInput, Button } from 'reactstrap'\r\n\r\nconst SidebarLeft = props => {\r\n  // ** Props & Store\r\n  const { store, sidebar, handleSidebar, userSidebarLeft, handleUserSidebarLeft } = props\r\n  const { chats, contacts, userProfile } = store\r\n\r\n  // ** Dispatch\r\n  const dispatch = useDispatch()\r\n\r\n  // ** State\r\n  const [about, setAbout] = useState('')\r\n  const [query, setQuery] = useState('')\r\n  const [active, setActive] = useState({})\r\n  const [status, setStatus] = useState('online')\r\n  const [filteredChat, setFilteredChat] = useState([])\r\n  const [filteredContacts, setFilteredContacts] = useState([])\r\n\r\n  // ** Handles User Chat Click\r\n  const handleUserClick = (type, id) => {\r\n    dispatch(selectChat(id))\r\n    setActive({ type, id })\r\n    if (sidebar === true) {\r\n      handleSidebar()\r\n    }\r\n  }\r\n\r\n  // ** Renders Chat\r\n  const renderChats = () => {\r\n    if (chats && chats.length) {\r\n      if (query.length && !filteredChat.length) {\r\n        return (\r\n          <li className='no-results show'>\r\n            <h6 className='mb-0'>No Chats Found</h6>\r\n          </li>\r\n        )\r\n      } else {\r\n        const arrToMap = query.length && filteredChat.length ? filteredChat : chats\r\n\r\n        return arrToMap.map(item => {\r\n          const time = formatDateToMonthShort(item.chat.lastMessage ? item.chat.lastMessage.time : new Date())\r\n\r\n          return (\r\n            <li\r\n              className={classnames({\r\n                active: active.type === 'chat' && active.id === item.id\r\n              })}\r\n              key={item.id}\r\n              onClick={() => handleUserClick('chat', item.id)}\r\n            >\r\n              <Avatar img={item.avatar} imgHeight='42' imgWidth='42' status={item.status} />\r\n              <div className='chat-info flex-grow-1'>\r\n                <h5 className='mb-0'>{item.fullName}</h5>\r\n                <CardText className='text-truncate'>\r\n                  {item.chat.lastMessage ? item.chat.lastMessage.message : chats[chats.length - 1].message}\r\n                </CardText>\r\n              </div>\r\n              <div className='chat-meta text-nowrap'>\r\n                <small className='float-right mb-25 chat-time ml-25'>{time}</small>\r\n                {item.chat.unseenMsgs >= 1 ? (\r\n                  <Badge className='float-right' color='danger' pill>\r\n                    {item.chat.unseenMsgs}\r\n                  </Badge>\r\n                ) : null}\r\n              </div>\r\n            </li>\r\n          )\r\n        })\r\n      }\r\n    } else {\r\n      return null\r\n    }\r\n  }\r\n\r\n  // ** Renders Contact\r\n  const renderContacts = () => {\r\n    if (contacts && contacts.length) {\r\n      if (query.length && !filteredContacts.length) {\r\n        return (\r\n          <li className='no-results show'>\r\n            <h6 className='mb-0'>No Chats Found</h6>\r\n          </li>\r\n        )\r\n      } else {\r\n        const arrToMap = query.length && filteredContacts.length ? filteredContacts : contacts\r\n        return arrToMap.map(item => {\r\n          return (\r\n            <li\r\n              className={classnames({\r\n                active: active.type === 'contact' && active.id === item.id\r\n              })}\r\n              key={item.fullName}\r\n              onClick={() => handleUserClick('contact', item.id)}\r\n            >\r\n              <Avatar img={item.avatar} imgHeight='42' imgWidth='42' />\r\n              <div className='chat-info flex-grow-1'>\r\n                <h5 className='mb-0'>{item.fullName}</h5>\r\n                <CardText className='text-truncate'>{item.about}</CardText>\r\n              </div>\r\n            </li>\r\n          )\r\n        })\r\n      }\r\n    } else {\r\n      return null\r\n    }\r\n  }\r\n\r\n  // ** Handles Filter\r\n  const handleFilter = e => {\r\n    setQuery(e.target.value)\r\n    const searchFilterFunction = contact => contact.fullName.toLowerCase().includes(e.target.value.toLowerCase())\r\n    const filteredChatsArr = chats.filter(searchFilterFunction)\r\n    const filteredContactssArr = contacts.filter(searchFilterFunction)\r\n    setFilteredChat([...filteredChatsArr])\r\n    setFilteredContacts([...filteredContactssArr])\r\n  }\r\n\r\n  return store ? (\r\n    <div className='sidebar-left'>\r\n      <div className='sidebar'>\r\n        <div\r\n          className={classnames('chat-profile-sidebar', {\r\n            show: userSidebarLeft\r\n          })}\r\n        >\r\n          <header className='chat-profile-header'>\r\n            <div className='close-icon' onClick={handleUserSidebarLeft}>\r\n              <X size={14} />\r\n            </div>\r\n            <div className='header-profile-sidebar'>\r\n              <Avatar className='box-shadow-1 avatar-border' img={userProfile.avatar} status={status} size='xl' />\r\n              <h4 className='chat-user-name'>{userProfile.fullName}</h4>\r\n              <span className='user-post'>{userProfile.role}</span>\r\n            </div>\r\n          </header>\r\n          <PerfectScrollbar className='profile-sidebar-area' options={{ wheelPropagation: false }}>\r\n            <h6 className='section-label mb-1'>About</h6>\r\n            <div className='about-user'>\r\n              <Input\r\n                rows='5'\r\n                defaultValue={userProfile.about}\r\n                type='textarea'\r\n                onChange={e => setAbout(e.target.value)}\r\n                className={classnames('char-textarea', {\r\n                  'text-danger': about && about.length > 120\r\n                })}\r\n              />\r\n              <small className='counter-value float-right'>\r\n                <span className='char-count'>{userProfile.about ? userProfile.about.length : 0}</span>/ 120\r\n              </small>\r\n            </div>\r\n            <h6 className='section-label mb-1 mt-3'>Status</h6>\r\n            <ul className='list-unstyled user-status'>\r\n              <li className='pb-1'>\r\n                <CustomInput\r\n                  type='radio'\r\n                  className='custom-control-primary'\r\n                  id='online'\r\n                  label='Online'\r\n                  onChange={e => setStatus('online')}\r\n                  checked={status === 'online'}\r\n                />\r\n              </li>\r\n              <li className='pb-1'>\r\n                <CustomInput\r\n                  type='radio'\r\n                  className='custom-control-danger'\r\n                  id='busy'\r\n                  label='Do Not Disturb'\r\n                  onChange={e => setStatus('busy')}\r\n                  checked={status === 'busy'}\r\n                />\r\n              </li>\r\n              <li className='pb-1'>\r\n                <CustomInput\r\n                  type='radio'\r\n                  className='custom-control-warning'\r\n                  id='away'\r\n                  label='Away'\r\n                  onChange={e => setStatus('away')}\r\n                  checked={status === 'away'}\r\n                />\r\n              </li>\r\n              <li className='pb-1'>\r\n                <CustomInput\r\n                  type='radio'\r\n                  className='custom-control-secondary'\r\n                  id='offline'\r\n                  label='Offline'\r\n                  onChange={e => setStatus('offline')}\r\n                  checked={status === 'offline'}\r\n                />\r\n              </li>\r\n            </ul>\r\n            <h6 className='section-label mb-1 mt-2'>Settings</h6>\r\n            <ul className='list-unstyled'>\r\n              <li className='d-flex justify-content-between align-items-center mb-1'>\r\n                <div className='d-flex align-items-center'>\r\n                  <CheckSquare className='mr-75' size='18' />\r\n                  <span className='align-middle'>Two-step Verification</span>\r\n                </div>\r\n                <CustomInput type='switch' id='verification' name='verification' label='' defaultChecked />\r\n              </li>\r\n              <li className='d-flex justify-content-between align-items-center mb-1'>\r\n                <div className='d-flex align-items-center'>\r\n                  <Bell className='mr-75' size='18' />\r\n                  <span className='align-middle'>Notification</span>\r\n                </div>\r\n                <CustomInput type='switch' id='notifications' name='notifications' label='' />\r\n              </li>\r\n              <li className='d-flex align-items-center cursor-pointer mb-1'>\r\n                <User className='mr-75' size='18' />\r\n                <span className='align-middle'>Invite Friends</span>\r\n              </li>\r\n              <li className='d-flex align-items-center cursor-pointer'>\r\n                <Trash className='mr-75' size='18' />\r\n                <span className='align-middle'>Delete Account</span>\r\n              </li>\r\n            </ul>\r\n            <div className='mt-3'>\r\n              <Button color='primary'>Logout</Button>\r\n            </div>\r\n          </PerfectScrollbar>\r\n        </div>\r\n        <div\r\n          className={classnames('sidebar-content', {\r\n            show: sidebar === true\r\n          })}\r\n        >\r\n          <div className='sidebar-close-icon' onClick={handleSidebar}>\r\n            <X size={14} />\r\n          </div>\r\n          <div className='chat-fixed-search'>\r\n            <div className='d-flex align-items-center w-100'>\r\n              <div className='sidebar-profile-toggle' onClick={handleUserSidebarLeft}>\r\n                {Object.keys(userProfile).length ? (\r\n                  <Avatar\r\n                    className='avatar-border'\r\n                    img={userProfile.avatar}\r\n                    status={status}\r\n                    imgHeight='42'\r\n                    imgWidth='42'\r\n                  />\r\n                ) : null}\r\n              </div>\r\n              <InputGroup className='input-group-merge ml-1 w-100'>\r\n                <InputGroupAddon addonType='prepend'>\r\n                  <InputGroupText className='round'>\r\n                    <Search className='text-muted' size={14} />\r\n                  </InputGroupText>\r\n                </InputGroupAddon>\r\n                <Input\r\n                  value={query}\r\n                  className='round'\r\n                  placeholder='Search or start a new chat'\r\n                  onChange={handleFilter}\r\n                />\r\n              </InputGroup>\r\n            </div>\r\n          </div>\r\n          <PerfectScrollbar className='chat-user-list-wrapper list-group' options={{ wheelPropagation: false }}>\r\n            <h4 className='chat-list-title'>Chats</h4>\r\n            <ul className='chat-users-list chat-list media-list'>{renderChats()}</ul>\r\n            <h4 className='chat-list-title'>Contacts</h4>\r\n            <ul className='chat-users-list contact-list media-list'>{renderContacts()}</ul>\r\n          </PerfectScrollbar>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  ) : null\r\n}\r\n\r\nexport default SidebarLeft\r\n"]},"metadata":{},"sourceType":"module"}