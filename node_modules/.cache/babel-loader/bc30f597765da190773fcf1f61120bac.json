{"ast":null,"code":"import PathNode from './path-node';\nimport { createPromise } from '../util';\n\nvar ImageNode = function (PathNode) {\n  function ImageNode(srcElement, cors) {\n    PathNode.call(this, srcElement);\n    this.onLoad = this.onLoad.bind(this);\n    this.onError = this.onError.bind(this);\n    this.loading = createPromise();\n    var img = this.img = new Image();\n    var src = srcElement.src();\n\n    if (cors && !/^data:/i.test(src)) {\n      img.crossOrigin = cors;\n    }\n\n    if (src) {\n      img.src = src;\n    }\n\n    if (img.complete) {\n      this.onLoad();\n    } else {\n      img.onload = this.onLoad;\n      img.onerror = this.onError;\n    }\n  }\n\n  if (PathNode) ImageNode.__proto__ = PathNode;\n  ImageNode.prototype = Object.create(PathNode && PathNode.prototype);\n  ImageNode.prototype.constructor = ImageNode;\n\n  ImageNode.prototype.renderTo = function renderTo(ctx) {\n    if (this.loading.state() === \"resolved\") {\n      ctx.save();\n      this.setTransform(ctx);\n      this.setClip(ctx);\n      this.drawImage(ctx);\n      ctx.restore();\n    }\n  };\n\n  ImageNode.prototype.optionsChange = function optionsChange(e) {\n    if (e.field === \"src\") {\n      this.loading = createPromise();\n      this.img.src = this.srcElement.src();\n    } else {\n      PathNode.prototype.optionsChange.call(this, e);\n    }\n  };\n\n  ImageNode.prototype.onLoad = function onLoad() {\n    this.loading.resolve();\n    this.invalidate();\n  };\n\n  ImageNode.prototype.onError = function onError() {\n    this.loading.reject(new Error(\"Unable to load image '\" + this.img.src + \"'. Check for connectivity and verify CORS headers.\"));\n  };\n\n  ImageNode.prototype.drawImage = function drawImage(ctx) {\n    var rect = this.srcElement.rect();\n    var topLeft = rect.topLeft();\n    ctx.drawImage(this.img, topLeft.x, topLeft.y, rect.width(), rect.height());\n  };\n\n  return ImageNode;\n}(PathNode);\n\nexport default ImageNode;","map":{"version":3,"sources":["C:/Users/nsahi/OneDrive/Documents/cyber_media/cm_galaxy/node_modules/@progress/kendo-drawing/dist/es/canvas/image-node.js"],"names":["PathNode","createPromise","ImageNode","srcElement","cors","call","onLoad","bind","onError","loading","img","Image","src","test","crossOrigin","complete","onload","onerror","__proto__","prototype","Object","create","constructor","renderTo","ctx","state","save","setTransform","setClip","drawImage","restore","optionsChange","e","field","resolve","invalidate","reject","Error","rect","topLeft","x","y","width","height"],"mappings":"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","sourcesContent":["import PathNode from './path-node';\r\nimport { createPromise } from '../util';\r\n\r\nvar ImageNode = (function (PathNode) {\r\n    function ImageNode(srcElement, cors) {\r\n        PathNode.call(this, srcElement);\r\n\r\n        this.onLoad = this.onLoad.bind(this);\r\n        this.onError = this.onError.bind(this);\r\n\r\n        this.loading = createPromise();\r\n\r\n        var img = this.img = new Image();\r\n        var src = srcElement.src();\r\n\r\n        if (cors && !(/^data:/i.test(src))) {\r\n            img.crossOrigin = cors;\r\n        }\r\n\r\n        if (src) {\r\n            img.src = src;\r\n        }\r\n\r\n        if (img.complete) {\r\n            this.onLoad();\r\n        } else {\r\n            img.onload = this.onLoad;\r\n            img.onerror = this.onError;\r\n        }\r\n    }\r\n\r\n    if ( PathNode ) ImageNode.__proto__ = PathNode;\r\n    ImageNode.prototype = Object.create( PathNode && PathNode.prototype );\r\n    ImageNode.prototype.constructor = ImageNode;\r\n\r\n    ImageNode.prototype.renderTo = function renderTo (ctx) {\r\n        if (this.loading.state() === \"resolved\") {\r\n            ctx.save();\r\n\r\n            this.setTransform(ctx);\r\n            this.setClip(ctx);\r\n\r\n            this.drawImage(ctx);\r\n\r\n            ctx.restore();\r\n        }\r\n    };\r\n\r\n    ImageNode.prototype.optionsChange = function optionsChange (e) {\r\n        if (e.field === \"src\") {\r\n            this.loading = createPromise();\r\n            this.img.src = this.srcElement.src();\r\n        } else {\r\n            PathNode.prototype.optionsChange.call(this, e);\r\n        }\r\n    };\r\n\r\n    ImageNode.prototype.onLoad = function onLoad () {\r\n        this.loading.resolve();\r\n        this.invalidate();\r\n    };\r\n\r\n    ImageNode.prototype.onError = function onError () {\r\n        this.loading.reject(new Error(\r\n            \"Unable to load image '\" + this.img.src +\r\n            \"'. Check for connectivity and verify CORS headers.\"\r\n        ));\r\n    };\r\n\r\n    ImageNode.prototype.drawImage = function drawImage (ctx) {\r\n        var rect = this.srcElement.rect();\r\n        var topLeft = rect.topLeft();\r\n\r\n        ctx.drawImage(\r\n            this.img, topLeft.x, topLeft.y, rect.width(), rect.height()\r\n        );\r\n    };\r\n\r\n    return ImageNode;\r\n}(PathNode));\r\n\r\nexport default ImageNode;\r\n"]},"metadata":{},"sourceType":"module"}