{"ast":null,"code":"import { drawing as draw, throttle, geometry } from '@progress/kendo-drawing';\nimport { RootElement, Title, CategoryAxis, Point } from '../core';\nimport Highlight from './highlight';\nimport Pannable from './pan-and-zoom/pannable';\nimport ZoomSelection from './pan-and-zoom/zoom-selection';\nimport MousewheelZoom from './pan-and-zoom/mousewheel-zoom';\nimport Legend from './legend/legend';\nimport PlotAreaFactory from './plotarea/plotarea-factory';\nimport Selection from './selection';\nimport SeriesBinder from './series-binder';\nimport Tooltip from './tooltip/tooltip';\nimport SharedTooltip from './tooltip/shared-tooltip';\nimport CategoricalPlotArea from './plotarea/categorical-plotarea';\nimport PlotAreaBase from './plotarea/plotarea-base';\nimport { ChartService, DomEventsBuilder } from '../services';\nimport getField from './utils/get-field';\nimport isDateAxis from './utils/is-date-axis';\nimport getDateField from './utils/get-date-field';\nimport { ChartPane, ChartPlotArea, findAxisByName } from './api-elements';\nimport { X, Y, VALUE, DEFAULT_WIDTH, DEFAULT_HEIGHT, DEFAULT_SERIES_OPACITY } from '../common/constants';\nimport { addClass, Class, setDefaultOptions, deepExtend, defined, find, isObject, isFunction, elementSize, elementOffset, elementScale, elementStyles, eventCoordinates, bindEvents, unbindEvents, mousewheelDelta, FontLoader, inArray, last, round, HashMap, valueOrDefault } from '../common';\nimport { dateComparer } from '../date-utils';\nimport { DRAG_START, DRAG, DRAG_END, ZOOM_START, ZOOM, ZOOM_END, SELECT_START, SELECT, SELECT_END, PLOT_AREA_HOVER, PLOT_AREA_LEAVE, RENDER, CATEGORY, PIE, DONUT, FUNNEL, COLUMN, MOUSEWHEEL, MOUSEWHEEL_DELAY, MOUSEWHEEL_ZOOM_RATE, SHOW_TOOLTIP, SERIES_HOVER } from './constants';\nimport './animations';\nimport './register-charts';\nvar AXIS_NAMES = [CATEGORY, VALUE, X, Y];\nvar MOUSEMOVE = \"mousemove\";\nvar CONTEXTMENU = \"contextmenu\";\nvar MOUSELEAVE = \"mouseleave\";\nvar MOUSEMOVE_DELAY = 20;\n\nvar Chart = function (Class) {\n  function Chart(element, userOptions, themeOptions, context) {\n    var this$1 = this;\n    if (context === void 0) context = {};\n    Class.call(this);\n    this.observers = [];\n    this.addObserver(context.observer);\n    this.chartService = new ChartService(this, context);\n    this.chartService.theme = themeOptions;\n\n    this._initElement(element);\n\n    var options = deepExtend({}, this.options, userOptions);\n    this._originalOptions = deepExtend({}, options);\n    this._theme = themeOptions;\n\n    this._initTheme(options, themeOptions);\n\n    this._initHandlers();\n\n    this._initSurface();\n\n    this.bindCategories();\n    FontLoader.preloadFonts(userOptions, function () {\n      this$1.fontLoaded = true;\n\n      if (!this$1._destroyed) {\n        this$1.trigger('init');\n\n        this$1._redraw();\n\n        this$1._attachEvents();\n      }\n    });\n  }\n\n  if (Class) Chart.__proto__ = Class;\n  Chart.prototype = Object.create(Class && Class.prototype);\n  Chart.prototype.constructor = Chart;\n\n  Chart.prototype._initElement = function _initElement(element) {\n    this._setElementClass(element);\n\n    element.style.position = \"relative\";\n\n    while (element.firstChild) {\n      element.removeChild(element.firstChild);\n    }\n\n    this.element = element;\n  };\n\n  Chart.prototype._setElementClass = function _setElementClass(element) {\n    addClass(element, \"k-chart\");\n  };\n\n  Chart.prototype._initTheme = function _initTheme(options, themeOptions) {\n    var seriesCopies = [];\n    var series = options.series || [];\n\n    for (var i = 0; i < series.length; i++) {\n      seriesCopies.push(Object.assign({}, series[i]));\n    }\n\n    options.series = seriesCopies;\n    resolveAxisAliases(options);\n    this.applyDefaults(options, themeOptions); // Clean up default if not overriden by data attributes\n\n    if (options.seriesColors === null) {\n      delete options.seriesColors;\n    }\n\n    this.options = deepExtend({}, themeOptions, options);\n    this.applySeriesColors();\n  };\n\n  Chart.prototype.getSize = function getSize() {\n    var chartArea = this.options.chartArea || {};\n    var width = chartArea.width ? parseInt(chartArea.width, 10) : Math.floor(this.element.offsetWidth);\n    var height = chartArea.height ? parseInt(chartArea.height, 10) : Math.floor(this.element.offsetHeight);\n    return {\n      width: width,\n      height: height\n    };\n  };\n\n  Chart.prototype.resize = function resize(force) {\n    var size = this.getSize();\n    var currentSize = this._size;\n    var hasSize = size.width > 0 || size.height > 0;\n\n    if (force || hasSize && (!currentSize || size.width !== currentSize.width || size.height !== currentSize.height)) {\n      this._size = size;\n\n      this._resize(size, force);\n\n      this.trigger(\"resize\", size);\n    } else if (hasSize && this._selections && find(this._selections, function (s) {\n      return !s.visible;\n    })) {\n      this._destroySelections();\n\n      this._setupSelection();\n    }\n  };\n\n  Chart.prototype._resize = function _resize() {\n    this._noTransitionsRedraw();\n  };\n\n  Chart.prototype.redraw = function redraw(paneName) {\n    this.applyDefaults(this.options);\n    this.applySeriesColors();\n\n    if (paneName) {\n      var plotArea = this._model._plotArea;\n      var pane = plotArea.findPane(paneName);\n      plotArea.redraw(pane);\n    } else {\n      this._redraw();\n    }\n  };\n\n  Chart.prototype.getAxis = function getAxis(name) {\n    return findAxisByName(name, this._plotArea.axes);\n  };\n\n  Chart.prototype.findAxisByName = function findAxisByName(name) {\n    return this.getAxis(name);\n  };\n\n  Chart.prototype.findPaneByName = function findPaneByName(name) {\n    var panes = this._plotArea.panes;\n\n    for (var idx = 0; idx < panes.length; idx++) {\n      if (panes[idx].options.name === name) {\n        return new ChartPane(panes[idx]);\n      }\n    }\n  };\n\n  Chart.prototype.findPaneByIndex = function findPaneByIndex(idx) {\n    var panes = this._plotArea.panes;\n\n    if (panes[idx]) {\n      return new ChartPane(panes[idx]);\n    }\n  };\n\n  Chart.prototype.plotArea = function plotArea() {\n    return new ChartPlotArea(this._plotArea);\n  };\n\n  Chart.prototype.toggleHighlight = function toggleHighlight(show, filter) {\n    var plotArea = this._plotArea;\n    var firstSeries = (plotArea.srcSeries || plotArea.series || [])[0];\n    var points;\n\n    if (isFunction(filter)) {\n      points = plotArea.filterPoints(filter);\n    } else {\n      var seriesName, categoryName;\n\n      if (isObject(filter)) {\n        seriesName = filter.series;\n        categoryName = filter.category;\n      } else {\n        seriesName = categoryName = filter;\n      }\n\n      if (firstSeries.type === DONUT) {\n        points = pointByCategoryName(plotArea.pointsBySeriesName(seriesName), categoryName);\n      } else if (firstSeries.type === PIE || firstSeries.type === FUNNEL) {\n        points = pointByCategoryName((plotArea.charts[0] || {}).points, categoryName);\n      } else {\n        points = plotArea.pointsBySeriesName(seriesName);\n      }\n    }\n\n    if (points) {\n      this.togglePointsHighlight(show, points);\n    }\n  };\n\n  Chart.prototype.togglePointsHighlight = function togglePointsHighlight(show, points) {\n    var highlight = this._highlight;\n\n    for (var idx = 0; idx < points.length; idx++) {\n      highlight.togglePointHighlight(points[idx], show);\n    }\n  };\n\n  Chart.prototype.showTooltip = function showTooltip(filter) {\n    var shared = this._sharedTooltip();\n\n    var ref = this;\n    var tooltip = ref._tooltip;\n    var plotArea = ref._plotArea;\n    var point, categoryIndex;\n\n    if (isFunction(filter)) {\n      point = plotArea.findPoint(filter);\n\n      if (point && shared) {\n        categoryIndex = point.categoryIx;\n      }\n    } else if (shared && defined(filter)) {\n      categoryIndex = plotArea.categoryAxis.categoryIndex(filter);\n    }\n\n    if (shared) {\n      if (categoryIndex >= 0) {\n        var points = this._plotArea.pointsByCategoryIndex(categoryIndex);\n\n        tooltip.showAt(points);\n      }\n    } else if (point) {\n      tooltip.show(point);\n    }\n  };\n\n  Chart.prototype.hideTooltip = function hideTooltip() {\n    this._tooltip.hide();\n  };\n\n  Chart.prototype._initSurface = function _initSurface() {\n    var surface = this.surface;\n\n    var wrap = this._surfaceWrap();\n\n    var chartArea = this.options.chartArea || {};\n\n    if (chartArea.width) {\n      elementSize(wrap, {\n        width: chartArea.width\n      });\n    }\n\n    if (chartArea.height) {\n      elementSize(wrap, {\n        height: chartArea.height\n      });\n    }\n\n    if (!surface || surface.options.type !== this.options.renderAs) {\n      this._destroySurface();\n\n      this.surface = draw.Surface.create(wrap, {\n        type: this.options.renderAs\n      });\n      this.surface.bind(\"mouseenter\", this._surfaceMouseenterHandler);\n      this.surface.bind(\"mouseleave\", this._surfaceMouseleaveHandler);\n    } else {\n      this.surface.clear();\n      this.surface.resize();\n    }\n  };\n\n  Chart.prototype._surfaceWrap = function _surfaceWrap() {\n    return this.element;\n  };\n\n  Chart.prototype._redraw = function _redraw() {\n    var model = this._getModel();\n\n    this._size = {\n      width: model.options.width,\n      height: model.options.height\n    };\n\n    this._destroyView();\n\n    this._model = model;\n    this._plotArea = model._plotArea;\n    model.renderVisual();\n\n    if (this.options.transitions !== false) {\n      model.traverse(function (element) {\n        if (element.animation) {\n          element.animation.setup();\n        }\n      });\n    }\n\n    this._initSurface();\n\n    this.surface.draw(model.visual);\n\n    if (this.options.transitions !== false) {\n      model.traverse(function (element) {\n        if (element.animation) {\n          element.animation.play();\n        }\n      });\n    }\n\n    this._tooltip = this._createTooltip();\n    this._highlight = new Highlight();\n\n    this._setupSelection();\n\n    this._createPannable();\n\n    this._createZoomSelection();\n\n    this._createMousewheelZoom();\n\n    this.trigger(RENDER);\n    triggerPaneRender(this._plotArea.panes);\n\n    if (!this._navState) {\n      this._cancelDomEvents();\n    }\n  };\n\n  Chart.prototype.exportVisual = function exportVisual(exportOptions) {\n    var visual;\n\n    if (exportOptions && (exportOptions.width || exportOptions.height || exportOptions.options)) {\n      var currentOptions = this.options;\n      var options = deepExtend({}, exportOptions.options, {\n        chartArea: {\n          width: exportOptions.width,\n          height: exportOptions.height\n        }\n      });\n      clearMissingValues(this._originalOptions, options);\n      this.options = deepExtend({}, this._originalOptions, options);\n\n      this._initTheme(this.options, this._theme);\n\n      this.bindCategories();\n\n      var model = this._getModel();\n\n      model.renderVisual();\n      triggerPaneRender(model._plotArea.panes);\n      visual = model.visual;\n      this.options = currentOptions;\n    } else {\n      visual = this.surface.exportVisual();\n    }\n\n    return visual;\n  };\n\n  Chart.prototype._sharedTooltip = function _sharedTooltip() {\n    return this._plotArea instanceof CategoricalPlotArea && this.options.tooltip && this.options.tooltip.shared;\n  };\n\n  Chart.prototype._createPannable = function _createPannable() {\n    var options = this.options;\n\n    if (options.pannable !== false) {\n      this._pannable = new Pannable(this._plotArea, options.pannable);\n    }\n  };\n\n  Chart.prototype._createZoomSelection = function _createZoomSelection() {\n    var zoomable = this.options.zoomable;\n    var selection = (zoomable || {}).selection;\n\n    if (zoomable !== false && selection !== false) {\n      this._zoomSelection = new ZoomSelection(this, selection);\n    }\n  };\n\n  Chart.prototype._createMousewheelZoom = function _createMousewheelZoom() {\n    var zoomable = this.options.zoomable;\n    var mousewheel = (zoomable || {}).mousewheel;\n\n    if (zoomable !== false && mousewheel !== false) {\n      this._mousewheelZoom = new MousewheelZoom(this, mousewheel);\n    }\n  };\n\n  Chart.prototype._toggleDragZoomEvents = function _toggleDragZoomEvents() {\n    var pannable = this.options.pannable;\n    var zoomable = this.options.zoomable;\n    var selection = (zoomable || {}).selection;\n    var mousewheel = (zoomable || {}).mousewheel;\n    var allowDrag = !pannable && (zoomable === false || selection === false) && !this.requiresHandlers([DRAG_START, DRAG, DRAG_END]);\n    var allowZoom = (zoomable === false || mousewheel === false) && !this.requiresHandlers([ZOOM_START, ZOOM, ZOOM_END]);\n    var element = this.element;\n\n    if (this._dragZoomEnabled && allowDrag && allowZoom) {\n      element.style.touchAction = this._touchAction || '';\n      this._dragZoomEnabled = false;\n    } else if (!this._dragZoomEnabled && !(allowDrag && allowZoom)) {\n      element.style.touchAction = \"none\";\n      this._dragZoomEnabled = true;\n    }\n\n    this._toggleDomEvents(!allowDrag, !allowZoom);\n  };\n\n  Chart.prototype._toggleDomEvents = function _toggleDomEvents(drag, zoom) {\n    var domEvents = this.domEvents;\n\n    if (!domEvents) {\n      return;\n    }\n\n    if (domEvents.toggleDrag) {\n      domEvents.toggleDrag(drag);\n    }\n\n    if (domEvents.toggleZoom) {\n      domEvents.toggleZoom(zoom);\n    }\n  };\n\n  Chart.prototype._createTooltip = function _createTooltip() {\n    var ref = this;\n    var tooltipOptions = ref.options.tooltip;\n    var tooltip;\n\n    if (this._sharedTooltip()) {\n      tooltip = this._createSharedTooltip(tooltipOptions);\n    } else {\n      tooltip = new Tooltip(this.chartService, tooltipOptions);\n    }\n\n    return tooltip;\n  };\n\n  Chart.prototype._createSharedTooltip = function _createSharedTooltip(options) {\n    return new SharedTooltip(this._plotArea, options);\n  };\n\n  Chart.prototype.applyDefaults = function applyDefaults(options, themeOptions) {\n    applyAxisDefaults(options, themeOptions);\n    applySeriesDefaults(options, themeOptions);\n  };\n\n  Chart.prototype.applySeriesColors = function applySeriesColors() {\n    var options = this.options;\n    var series = options.series;\n    var colors = options.seriesColors || [];\n\n    for (var i = 0; i < series.length; i++) {\n      var currentSeries = series[i];\n      var seriesColor = colors[i % colors.length];\n      var defaults = currentSeries._defaults;\n      currentSeries.color = currentSeries.color || seriesColor;\n\n      if (defaults) {\n        defaults.color = defaults.color || seriesColor;\n      }\n    }\n  };\n\n  Chart.prototype._getModel = function _getModel() {\n    var options = this.options;\n\n    var plotArea = this._createPlotArea();\n\n    var model = new RootElement(this._modelOptions());\n    model.chart = this;\n    model._plotArea = plotArea;\n    var title = Title.buildTitle(options.title);\n    var subtitle = Title.buildTitle(options.subtitle, {\n      align: options.title.align,\n      position: options.title.position\n    });\n    model.append.apply(model, Title.orderTitles([title, subtitle]));\n\n    if (options.legend && options.legend.visible) {\n      model.append(new Legend(plotArea.options.legend, this.chartService));\n    }\n\n    model.append(plotArea);\n    model.reflow();\n    return model;\n  };\n\n  Chart.prototype._modelOptions = function _modelOptions() {\n    var options = this.options;\n    var size = this.getSize();\n    return deepExtend({\n      transitions: options.transitions,\n      width: size.width || DEFAULT_WIDTH,\n      height: size.height || DEFAULT_HEIGHT\n    }, options.chartArea);\n  };\n\n  Chart.prototype._createPlotArea = function _createPlotArea(skipSeries) {\n    var options = this.options;\n    var plotArea = PlotAreaFactory.current.create(skipSeries ? [] : options.series, options, this.chartService);\n    return plotArea;\n  };\n\n  Chart.prototype._setupSelection = function _setupSelection() {\n    var this$1 = this;\n    var ref = this;\n    var axes = ref._plotArea.axes;\n    var selections = this._selections = [];\n\n    for (var i = 0; i < axes.length; i++) {\n      var axis = axes[i];\n      var options = axis.options;\n\n      if (axis instanceof CategoryAxis && options.select && !options.vertical) {\n        var range = axis.range();\n        var selection = new Selection(this$1, axis, deepExtend({\n          min: range.min,\n          max: range.max\n        }, options.select));\n        selections.push(selection);\n      }\n    }\n  };\n\n  Chart.prototype._selectStart = function _selectStart(e) {\n    return this.trigger(SELECT_START, e);\n  };\n\n  Chart.prototype._select = function _select(e) {\n    return this.trigger(SELECT, e);\n  };\n\n  Chart.prototype._selectEnd = function _selectEnd(e) {\n    return this.trigger(SELECT_END, e);\n  };\n\n  Chart.prototype._initHandlers = function _initHandlers() {\n    this._clickHandler = this._click.bind(this);\n    this._mousewheelHandler = this._mousewheel.bind(this);\n    this._mouseleaveHandler = this._mouseleave.bind(this);\n    this._surfaceMouseenterHandler = this._mouseover.bind(this);\n    this._surfaceMouseleaveHandler = this._mouseout.bind(this);\n    this._mousemove = throttle(this._mousemove.bind(this), MOUSEMOVE_DELAY);\n  };\n\n  Chart.prototype.addObserver = function addObserver(observer) {\n    if (observer) {\n      this.observers.push(observer);\n    }\n  };\n\n  Chart.prototype.removeObserver = function removeObserver(observer) {\n    var index = this.observers.indexOf(observer);\n\n    if (index >= 0) {\n      this.observers.splice(index, 1);\n    }\n  };\n\n  Chart.prototype.requiresHandlers = function requiresHandlers(eventNames) {\n    var observers = this.observers;\n\n    for (var idx = 0; idx < observers.length; idx++) {\n      if (observers[idx].requiresHandlers(eventNames)) {\n        return true;\n      }\n    }\n  };\n\n  Chart.prototype.trigger = function trigger(name, args) {\n    if (args === void 0) args = {};\n\n    if (name === SHOW_TOOLTIP) {\n      args.anchor.point = this._toDocumentCoordinates(args.anchor.point);\n    }\n\n    args.sender = this;\n    var observers = this.observers;\n    var isDefaultPrevented = false;\n\n    for (var idx = 0; idx < observers.length; idx++) {\n      if (observers[idx].trigger(name, args)) {\n        isDefaultPrevented = true;\n      }\n    }\n\n    return isDefaultPrevented;\n  };\n\n  Chart.prototype._attachEvents = function _attachEvents() {\n    var obj, obj$1;\n    var element = this.element;\n    this._touchAction = element.style.touchAction;\n    bindEvents(element, (obj = {}, obj[CONTEXTMENU] = this._clickHandler, obj[MOUSEWHEEL] = this._mousewheelHandler, obj[MOUSELEAVE] = this._mouseleaveHandler, obj));\n\n    if (this._shouldAttachMouseMove()) {\n      bindEvents(element, (obj$1 = {}, obj$1[MOUSEMOVE] = this._mousemove, obj$1));\n    }\n\n    this.domEvents = DomEventsBuilder.create(this.element, {\n      start: this._start.bind(this),\n      move: this._move.bind(this),\n      end: this._end.bind(this),\n      tap: this._tap.bind(this),\n      gesturestart: this._gesturestart.bind(this),\n      gesturechange: this._gesturechange.bind(this),\n      gestureend: this._gestureend.bind(this)\n    });\n\n    this._toggleDragZoomEvents();\n  };\n\n  Chart.prototype._mouseleave = function _mouseleave(e) {\n    if (this._hoveredPoint) {\n      this._hoveredPoint.out(this, e);\n\n      this._hoveredPoint = null;\n    }\n\n    if (this._plotAreaHovered) {\n      this._plotAreaHovered = false;\n      this.trigger(PLOT_AREA_LEAVE);\n    }\n  };\n\n  Chart.prototype._cancelDomEvents = function _cancelDomEvents() {\n    if (this.domEvents && this.domEvents.cancel) {\n      this.domEvents.cancel();\n    }\n  };\n\n  Chart.prototype._gesturestart = function _gesturestart(e) {\n    if (this._mousewheelZoom && !this._stopChartHandlers(e)) {\n      this._gestureDistance = e.distance;\n\n      this._unsetActivePoint();\n\n      this.surface.suspendTracking();\n    }\n  };\n\n  Chart.prototype._gestureend = function _gestureend(e) {\n    if (this._zooming && !this._stopChartHandlers(e)) {\n      if (this.surface) {\n        this.surface.resumeTracking();\n      }\n\n      this._zooming = false;\n      this.trigger(ZOOM_END, {});\n    }\n  };\n\n  Chart.prototype._gesturechange = function _gesturechange(e) {\n    var mousewheelZoom = this._mousewheelZoom;\n\n    if (mousewheelZoom && !this._stopChartHandlers(e)) {\n      e.preventDefault();\n      var previousGestureDistance = this._gestureDistance;\n      var scaleDelta = -e.distance / previousGestureDistance + 1;\n\n      if (Math.abs(scaleDelta) >= 0.1) {\n        scaleDelta = Math.round(scaleDelta * 10);\n        this._gestureDistance = e.distance;\n        var args = {\n          delta: scaleDelta,\n          axisRanges: axisRanges(this._plotArea.axes),\n          originalEvent: e\n        };\n\n        if (this._zooming || !this.trigger(ZOOM_START, args)) {\n          var coords = this._eventCoordinates(e);\n\n          if (!this._zooming) {\n            this._zooming = true;\n          }\n\n          var ranges = args.axisRanges = mousewheelZoom.updateRanges(scaleDelta, coords);\n\n          if (ranges && !this.trigger(ZOOM, args)) {\n            mousewheelZoom.zoom();\n          }\n        }\n      }\n    }\n  };\n\n  Chart.prototype._mouseout = function _mouseout(e) {\n    if (e.element) {\n      var element = this._drawingChartElement(e.element, e);\n\n      if (element && element.leave) {\n        element.leave(this, e.originalEvent);\n      }\n    }\n  };\n\n  Chart.prototype._start = function _start(e) {\n    var coords = this._eventCoordinates(e);\n\n    if (this._stopChartHandlers(e) || !this._plotArea.backgroundContainsPoint(coords)) {\n      return;\n    }\n\n    if (this.requiresHandlers([DRAG_START, DRAG, DRAG_END])) {\n      this._startNavigation(e, coords, DRAG_START);\n    }\n\n    if (this._pannable && this._pannable.start(e)) {\n      this.surface.suspendTracking();\n\n      this._unsetActivePoint();\n\n      this._suppressHover = true;\n      this.chartService.panning = true;\n    }\n\n    if (this._zoomSelection) {\n      if (this._zoomSelection.start(e)) {\n        this.trigger(ZOOM_START, {\n          axisRanges: axisRanges(this._plotArea.axes),\n          originalEvent: e\n        });\n      }\n    }\n  };\n\n  Chart.prototype._move = function _move(e) {\n    var ref = this;\n    var state = ref._navState;\n    var pannable = ref._pannable;\n\n    if (this._stopChartHandlers(e)) {\n      return;\n    }\n\n    if (pannable) {\n      var ranges = pannable.move(e);\n\n      if (ranges && !this.trigger(DRAG, {\n        axisRanges: ranges,\n        originalEvent: e\n      })) {\n        pannable.pan();\n      }\n    } else if (state) {\n      var ranges$1 = {};\n      var axes = state.axes;\n\n      for (var i = 0; i < axes.length; i++) {\n        var currentAxis = axes[i];\n        var axisName = currentAxis.options.name;\n\n        if (axisName) {\n          var axis = currentAxis.options.vertical ? e.y : e.x;\n          var delta = axis.startLocation - axis.location;\n\n          if (delta !== 0) {\n            ranges$1[currentAxis.options.name] = currentAxis.translateRange(delta);\n          }\n        }\n      }\n\n      state.axisRanges = ranges$1;\n      this.trigger(DRAG, {\n        axisRanges: ranges$1,\n        originalEvent: e\n      });\n    }\n\n    if (this._zoomSelection) {\n      this._zoomSelection.move(e);\n    }\n  };\n\n  Chart.prototype._end = function _end(e) {\n    if (this._stopChartHandlers(e)) {\n      return;\n    }\n\n    var pannable = this._pannable;\n\n    if (pannable && pannable.end(e)) {\n      this.surface.resumeTracking();\n      this.trigger(DRAG_END, {\n        axisRanges: axisRanges(this._plotArea.axes),\n        originalEvent: e\n      });\n      this._suppressHover = false;\n      this.chartService.panning = false;\n    } else {\n      this._endNavigation(e, DRAG_END);\n    }\n\n    if (this._zoomSelection) {\n      var ranges = this._zoomSelection.end(e);\n\n      if (ranges && !this.trigger(ZOOM, {\n        axisRanges: ranges,\n        originalEvent: e\n      })) {\n        this._zoomSelection.zoom();\n\n        this.trigger(ZOOM_END, {\n          axisRanges: ranges,\n          originalEvent: e\n        });\n      }\n    }\n  };\n\n  Chart.prototype._stopChartHandlers = function _stopChartHandlers(e) {\n    var selections = this._selections || [];\n\n    if (!selections.length) {\n      return false;\n    }\n\n    var coords = this._eventCoordinates(e);\n\n    var pane = this._plotArea.paneByPoint(coords);\n\n    if (pane) {\n      for (var idx = 0; idx < selections.length; idx++) {\n        if (selections[idx].onPane(pane)) {\n          return true;\n        }\n      }\n    }\n  };\n\n  Chart.prototype._mousewheelZoomRate = function _mousewheelZoomRate() {\n    var zoomable = this.options.zoomable;\n    var mousewheel = (zoomable || {}).mousewheel || {};\n    return valueOrDefault(mousewheel.rate, MOUSEWHEEL_ZOOM_RATE);\n  };\n\n  Chart.prototype._mousewheel = function _mousewheel(e) {\n    var this$1 = this;\n    var delta = mousewheelDelta(e);\n    var mousewheelZoom = this._mousewheelZoom;\n\n    var coords = this._eventCoordinates(e);\n\n    if (this._stopChartHandlers(e) || !this._plotArea.backgroundContainsPoint(coords)) {\n      return;\n    }\n\n    if (mousewheelZoom) {\n      var args = {\n        delta: delta,\n        axisRanges: axisRanges(this._plotArea.axes),\n        originalEvent: e\n      };\n\n      if (this._zooming || !this.trigger(ZOOM_START, args)) {\n        e.preventDefault();\n\n        if (!this._zooming) {\n          this._unsetActivePoint();\n\n          this.surface.suspendTracking();\n          this._zooming = true;\n        }\n\n        if (this._mwTimeout) {\n          clearTimeout(this._mwTimeout);\n        }\n\n        args.axisRanges = mousewheelZoom.updateRanges(delta, coords);\n\n        if (args.axisRanges && !this.trigger(ZOOM, args)) {\n          mousewheelZoom.zoom();\n        }\n\n        this._mwTimeout = setTimeout(function () {\n          this$1.trigger(ZOOM_END, args);\n          this$1._zooming = false;\n\n          if (this$1.surface) {\n            this$1.surface.resumeTracking();\n          }\n        }, MOUSEWHEEL_DELAY);\n      }\n    } else {\n      var state = this._navState;\n\n      if (!state) {\n        var prevented = this._startNavigation(e, coords, ZOOM_START);\n\n        if (!prevented) {\n          state = this._navState;\n        }\n      }\n\n      if (state) {\n        var totalDelta = state.totalDelta || delta;\n        state.totalDelta = totalDelta + delta;\n        var axes = this._navState.axes;\n        var ranges = {};\n\n        for (var i = 0; i < axes.length; i++) {\n          var currentAxis = axes[i];\n          var axisName = currentAxis.options.name;\n\n          if (axisName) {\n            ranges[axisName] = currentAxis.scaleRange(-totalDelta * this$1._mousewheelZoomRate(), coords);\n          }\n        }\n\n        this.trigger(ZOOM, {\n          delta: delta,\n          axisRanges: ranges,\n          originalEvent: e\n        });\n\n        if (this._mwTimeout) {\n          clearTimeout(this._mwTimeout);\n        }\n\n        this._mwTimeout = setTimeout(function () {\n          this$1._endNavigation(e, ZOOM_END);\n        }, MOUSEWHEEL_DELAY);\n      }\n    }\n  };\n\n  Chart.prototype._startNavigation = function _startNavigation(e, coords, chartEvent) {\n    var plotArea = this._model._plotArea;\n    var pane = plotArea.findPointPane(coords);\n    var axes = plotArea.axes.slice(0);\n\n    if (!pane) {\n      return;\n    }\n\n    var ranges = axisRanges(axes);\n    var prevented = this.trigger(chartEvent, {\n      axisRanges: ranges,\n      originalEvent: e\n    });\n\n    if (prevented) {\n      this._cancelDomEvents();\n    } else {\n      this._suppressHover = true;\n\n      this._unsetActivePoint();\n\n      this._navState = {\n        axisRanges: ranges,\n        pane: pane,\n        axes: axes\n      };\n    }\n  };\n\n  Chart.prototype._endNavigation = function _endNavigation(e, chartEvent) {\n    if (this._navState) {\n      this.trigger(chartEvent, {\n        axisRanges: this._navState.axisRanges,\n        originalEvent: e\n      });\n      this._suppressHover = false;\n      this._navState = null;\n    }\n  };\n\n  Chart.prototype._getChartElement = function _getChartElement(e, match) {\n    var element = this.surface.eventTarget(e);\n\n    if (element) {\n      return this._drawingChartElement(element, e, match);\n    }\n  };\n\n  Chart.prototype._drawingChartElement = function _drawingChartElement(element, e, match) {\n    var current = element;\n    var chartElement;\n\n    while (current && !chartElement) {\n      chartElement = current.chartElement;\n      current = current.parent;\n    }\n\n    if (chartElement) {\n      if (chartElement.aliasFor) {\n        chartElement = chartElement.aliasFor(e, this._eventCoordinates(e));\n      }\n\n      if (match) {\n        chartElement = chartElement.closest(match);\n\n        if (chartElement && chartElement.aliasFor) {\n          chartElement = chartElement.aliasFor();\n        }\n      }\n\n      return chartElement;\n    }\n  };\n\n  Chart.prototype._eventCoordinates = function _eventCoordinates(e) {\n    var coordinates = eventCoordinates(e);\n    return this._toModelCoordinates(coordinates.x, coordinates.y);\n  };\n\n  Chart.prototype._elementPadding = function _elementPadding() {\n    if (!this._padding) {\n      var ref = elementStyles(this.element, [\"paddingLeft\", \"paddingTop\"]);\n      var paddingLeft = ref.paddingLeft;\n      var paddingTop = ref.paddingTop;\n      this._padding = {\n        top: paddingTop,\n        left: paddingLeft\n      };\n    }\n\n    return this._padding;\n  };\n\n  Chart.prototype._toDocumentCoordinates = function _toDocumentCoordinates(point) {\n    var padding = this._elementPadding();\n\n    var offset = elementOffset(this.element);\n    return {\n      left: round(point.x + padding.left + offset.left),\n      top: round(point.y + padding.top + offset.top)\n    };\n  }; // TODO: Breaking change due to peer version change\n  // Reuse by exposing _surfacePoint on Surface\n\n\n  Chart.prototype._toModelCoordinates = function _toModelCoordinates(clientX, clientY) {\n    var element = this.element;\n    var offset = elementOffset(element);\n\n    var padding = this._elementPadding();\n\n    var inverseTransform = elementScale(element).invert();\n    var point = new geometry.Point(clientX - offset.left - padding.left, clientY - offset.top - padding.top).transform(inverseTransform);\n    return new Point(point.x, point.y);\n  };\n\n  Chart.prototype._tap = function _tap(e) {\n    var this$1 = this;\n    var drawingElement = this.surface.eventTarget(e);\n\n    var element = this._drawingChartElement(drawingElement, e);\n\n    var sharedTooltip = this._sharedTooltip();\n\n    if (!this._startHover(drawingElement, e) && !sharedTooltip) {\n      this._unsetActivePoint();\n    }\n\n    if (sharedTooltip) {\n      this._trackSharedTooltip(this._eventCoordinates(e), e, true);\n    }\n\n    this._propagateClick(element, e); //part of fix for hover issue on windows touch\n\n\n    this.handlingTap = true;\n    setTimeout(function () {\n      this$1.handlingTap = false;\n    }, 0);\n  };\n\n  Chart.prototype._click = function _click(e) {\n    var element = this._getChartElement(e);\n\n    this._propagateClick(element, e);\n  };\n\n  Chart.prototype._propagateClick = function _propagateClick(element, e) {\n    var this$1 = this;\n    var current = element;\n\n    while (current) {\n      if (current.click) {\n        current.click(this$1, e);\n      }\n\n      current = current.parent;\n    }\n  };\n\n  Chart.prototype._startHover = function _startHover(element, e) {\n    if (this._suppressHover) {\n      return false;\n    }\n\n    var point = this._drawingChartElement(element, e, function (element) {\n      return (element.hover || element.over) && !(element instanceof PlotAreaBase);\n    });\n\n    var activePoint = this._activePoint;\n    var multipleSeries = this._plotArea.series.length > 1;\n\n    var hasInactiveOpacity = this._hasInactiveOpacity();\n\n    this._updateHoveredPoint(point, e);\n\n    if (point && activePoint !== point && point.hover) {\n      this._activePoint = point;\n\n      if (!this._sharedTooltip() && !point.hover(this, e)) {\n        this._displayTooltip(point);\n\n        if (hasInactiveOpacity) {\n          this._displayInactiveOpacity(point, multipleSeries);\n        } else {\n          this._highlight.show(point);\n        }\n      }\n    } else if (!point && hasInactiveOpacity) {\n      if (multipleSeries && this._activeChartInstance) {\n        this._updateSeriesOpacity(point, true);\n\n        this._applySeriesOpacity(this._activeChartInstance.children, null, true);\n\n        this._activeChartInstance = null;\n      }\n\n      this._highlight && this._highlight.hide();\n      this._activePoint = null;\n    }\n\n    return point;\n  };\n\n  Chart.prototype._displayTooltip = function _displayTooltip(point) {\n    var tooltipOptions = deepExtend({}, this.options.tooltip, point.options.tooltip);\n\n    if (tooltipOptions.visible) {\n      this._tooltip.show(point);\n    }\n  };\n\n  Chart.prototype._displayInactiveOpacity = function _displayInactiveOpacity(activePoint, multipleSeries, highlightPoints) {\n    var chartInstance = this._activeChartInstance = this._chartInstanceFromPoint(activePoint);\n\n    if (!chartInstance) {\n      return;\n    }\n\n    if (multipleSeries) {\n      this._updateSeriesOpacity(activePoint);\n\n      this._applySeriesOpacity(chartInstance.children, null, true);\n\n      this._applySeriesOpacity(chartInstance.children, activePoint.series);\n\n      this._highlight.show(highlightPoints || activePoint);\n    } else {\n      var inactivePoints;\n\n      if (!chartInstance.supportsPointInactiveOpacity()) {\n        this._highlight.show(activePoint);\n\n        return;\n      }\n\n      inactivePoints = this._getInactivePoints(activePoint, chartInstance);\n\n      if (inactivePoints && inactivePoints.length) {\n        this._highlight.show(inactivePoints, 1 - this._getInactiveOpacityForSeries(activePoint.series));\n      }\n    }\n  };\n\n  Chart.prototype._getInactivePoints = function _getInactivePoints(activePoint, chartInstance) {\n    var allPoints = this._getAllPointsOfType(chartInstance, activePoint.constructor);\n\n    return allPoints.filter(function (point) {\n      return point !== activePoint;\n    });\n  };\n\n  Chart.prototype._getAllPointsOfType = function _getAllPointsOfType(container, type) {\n    var this$1 = this;\n    var points = [];\n\n    for (var i = 0; i < container.children.length; i++) {\n      var element = container.children[i];\n\n      if (element.constructor === type) {\n        points.push(element);\n      } else if (element.children && element.children.length) {\n        points = points.concat(this$1._getAllPointsOfType(element, type));\n      }\n    }\n\n    return points;\n  };\n\n  Chart.prototype._updateHoveredPoint = function _updateHoveredPoint(point, e) {\n    var hoveredPoint = this._hoveredPoint;\n\n    if (hoveredPoint && hoveredPoint !== point) {\n      hoveredPoint.out(this, e);\n      this._hoveredPoint = null;\n    }\n\n    if (point && hoveredPoint !== point && point.over) {\n      this._hoveredPoint = point;\n      point.over(this, e);\n    }\n  };\n\n  Chart.prototype._updateSeriesOpacity = function _updateSeriesOpacity(point, resetOpacity) {\n    var this$1 = this;\n    var plotArea = this._plotArea;\n    var length = plotArea.series.length;\n\n    for (var i = 0; i < length; i++) {\n      var currSeries = plotArea.series[i];\n\n      var defaultOpacity = this$1._getDefaultOpacityForSeries(currSeries);\n\n      var inactiveOpacity = this$1._getInactiveOpacityForSeries(currSeries);\n\n      if (!resetOpacity && currSeries !== point.series) {\n        currSeries.defaultOpacity = defaultOpacity;\n        currSeries.opacity = inactiveOpacity;\n\n        if (currSeries.line) {\n          currSeries.line.opacity = inactiveOpacity;\n        }\n      } else {\n        currSeries.opacity = defaultOpacity;\n\n        if (currSeries.line) {\n          currSeries.line.opacity = defaultOpacity;\n        }\n      }\n    }\n  };\n\n  Chart.prototype._applySeriesOpacity = function _applySeriesOpacity(elements, activeSeries, reset, series) {\n    var this$1 = this;\n\n    for (var i = 0; i < elements.length; i++) {\n      var element = elements[i];\n      var currSeries = element.series || series;\n      var shouldHighlight = currSeries && (currSeries.highlight || {}).visible;\n\n      if (shouldHighlight && element.visual) {\n        var opacity = series ? series.opacity : element.series.opacity;\n\n        if (currSeries !== activeSeries || reset) {\n          element.visual.opacity(reset ? 1 : opacity);\n        }\n      }\n\n      if (element.children && element.children.length) {\n        this$1._applySeriesOpacity(element.children, activeSeries, reset, element.series);\n      }\n    }\n  };\n\n  Chart.prototype._chartInstanceFromPoint = function _chartInstanceFromPoint(point) {\n    var chartInstance = point.parent;\n\n    while (chartInstance && !chartInstance.plotArea) {\n      chartInstance = chartInstance.parent;\n    }\n\n    return chartInstance;\n  };\n\n  Chart.prototype._hasInactiveOpacity = function _hasInactiveOpacity() {\n    var hasDefaultInactiveOpacity = this.options.seriesDefaults.highlight.inactiveOpacity !== undefined;\n    var hasInactiveOpacity = this.options.series.filter(function (s) {\n      return s.highlight.inactiveOpacity !== undefined;\n    }).length > 0;\n    return hasDefaultInactiveOpacity || hasInactiveOpacity;\n  };\n\n  Chart.prototype._getInactiveOpacityForSeries = function _getInactiveOpacityForSeries(series) {\n    var defaultInactiveOpacity = this.options.seriesDefaults.highlight.inactiveOpacity;\n    var seriesInactiveOpacity = series.highlight.inactiveOpacity;\n    return seriesInactiveOpacity || defaultInactiveOpacity || series.opacity || DEFAULT_SERIES_OPACITY;\n  };\n\n  Chart.prototype._getDefaultOpacityForSeries = function _getDefaultOpacityForSeries(series) {\n    return series.defaultOpacity || series.opacity || DEFAULT_SERIES_OPACITY;\n  };\n\n  Chart.prototype._mouseover = function _mouseover(e) {\n    var obj;\n\n    var point = this._startHover(e.element, e.originalEvent);\n\n    if (point && point.tooltipTracking && !this._mouseMoveTrackHandler && !this._sharedTooltip()) {\n      this._mouseMoveTrackHandler = this._mouseMoveTracking.bind(this);\n      bindEvents(document, (obj = {}, obj[MOUSEMOVE] = this._mouseMoveTrackHandler, obj));\n    }\n  };\n\n  Chart.prototype._mouseMoveTracking = function _mouseMoveTracking(e) {\n    var obj;\n    var ref = this;\n    var options = ref.options;\n    var tooltip = ref._tooltip;\n    var highlight = ref._highlight;\n    var point = ref._activePoint;\n\n    var coords = this._eventCoordinates(e);\n\n    if (this._plotArea.box.containsPoint(coords)) {\n      if (point && point.tooltipTracking && point.series && point.parent.getNearestPoint) {\n        var seriesPoint = point.parent.getNearestPoint(coords.x, coords.y, point.seriesIx);\n\n        if (seriesPoint && seriesPoint !== point) {\n          this._activePoint = seriesPoint;\n\n          if (!seriesPoint.hover(this, e)) {\n            var tooltipOptions = deepExtend({}, options.tooltip, seriesPoint.options.tooltip);\n\n            if (tooltipOptions.visible) {\n              tooltip.show(seriesPoint);\n            }\n\n            highlight.show(seriesPoint);\n          }\n        }\n      }\n    } else {\n      unbindEvents(document, (obj = {}, obj[MOUSEMOVE] = this._mouseMoveTrackHandler, obj));\n\n      this._unsetActivePoint();\n\n      this._mouseMoveTrackHandler = null;\n    }\n  };\n\n  Chart.prototype._mousemove = function _mousemove(e) {\n    var coords = this._eventCoordinates(e);\n\n    var plotArea = this._plotArea;\n\n    this._trackCrosshairs(coords);\n\n    if (plotArea.hover) {\n      var overPlotArea = plotArea.backgroundContainsPoint(coords);\n\n      if (overPlotArea) {\n        this._plotAreaHovered = true;\n\n        this._plotArea.hover(this, e);\n      } else if (this._plotAreaHovered && !overPlotArea) {\n        this._plotAreaHovered = false;\n        this.trigger(PLOT_AREA_LEAVE);\n      }\n    }\n\n    if (this._sharedTooltip()) {\n      this._trackSharedTooltip(coords, e);\n    }\n  };\n\n  Chart.prototype._trackCrosshairs = function _trackCrosshairs(coords) {\n    var crosshairs = this._plotArea.crosshairs;\n\n    for (var i = 0; i < crosshairs.length; i++) {\n      var current = crosshairs[i];\n\n      if (current.box.containsPoint(coords)) {\n        current.showAt(coords);\n      } else {\n        current.hide();\n      }\n    }\n  };\n\n  Chart.prototype._trackSharedTooltip = function _trackSharedTooltip(coords, e, toggle) {\n    if (this._suppressHover) {\n      return;\n    }\n\n    var ref = this;\n    var tooltipOptions = ref.options.tooltip;\n    var plotArea = ref._plotArea;\n    var categoryAxis = ref._plotArea.categoryAxis;\n    var tooltip = ref._tooltip;\n    var highlight = ref._highlight;\n\n    if (plotArea.backgroundContainsPoint(coords)) {\n      var index = categoryAxis.pointCategoryIndex(coords);\n\n      if (index !== this._tooltipCategoryIx || !this._sharedHighlight && toggle) {\n        var points = plotArea.pointsByCategoryIndex(index);\n        var pointArgs = points.map(function (point) {\n          return point.eventArgs(e);\n        });\n        var hoverArgs = pointArgs[0] || {};\n        hoverArgs.categoryPoints = pointArgs;\n\n        if (points.length > 0 && !this.trigger(SERIES_HOVER, hoverArgs)) {\n          if (tooltipOptions.visible) {\n            tooltip.showAt(points, coords);\n          }\n\n          highlight.show(points);\n          this._sharedHighlight = true;\n        } else {\n          tooltip.hide();\n        }\n\n        this._tooltipCategoryIx = index;\n      } else if (toggle && this._sharedHighlight) {\n        highlight.hide();\n        tooltip.hide();\n        this._sharedHighlight = false;\n      }\n    } else if (this._sharedHighlight) {\n      highlight.hide();\n      tooltip.hide();\n      this._tooltipCategoryIx = null;\n      this._sharedHighlight = false;\n    }\n  };\n\n  Chart.prototype.hideElements = function hideElements(options) {\n    var plotArea = this._plotArea;\n\n    this._mousemove.cancel();\n\n    plotArea.hideCrosshairs();\n\n    this._unsetActivePoint(options);\n  };\n\n  Chart.prototype._unsetActivePoint = function _unsetActivePoint(options) {\n    var ref = this;\n    var tooltip = ref._tooltip;\n    var highlight = ref._highlight;\n    this._activePoint = null;\n    this._hoveredPoint = null;\n\n    if (tooltip && !(options && options.keepTooltipOpen)) {\n      tooltip.hide();\n    }\n\n    this._tooltipCategoryIx = null;\n    this._sharedHighlight = false;\n\n    if (highlight) {\n      highlight.hide();\n    }\n  };\n\n  Chart.prototype._deferRedraw = function _deferRedraw() {\n    this._redraw();\n  };\n\n  Chart.prototype._clearRedrawTimeout = function _clearRedrawTimeout() {\n    if (this._redrawTimeout) {\n      clearInterval(this._redrawTimeout);\n      this._redrawTimeout = null;\n    }\n  };\n\n  Chart.prototype.bindCategories = function bindCategories() {\n    var this$1 = this;\n    var options = this.options;\n    var definitions = [].concat(options.categoryAxis);\n\n    for (var axisIx = 0; axisIx < definitions.length; axisIx++) {\n      var axis = definitions[axisIx];\n\n      if (axis.autoBind !== false) {\n        this$1.bindCategoryAxisFromSeries(axis, axisIx);\n      }\n    }\n  };\n\n  Chart.prototype.bindCategoryAxisFromSeries = function bindCategoryAxisFromSeries(axis, axisIx) {\n    var this$1 = this;\n    var series = this.options.series;\n    var seriesLength = series.length;\n    var uniqueCategories = new HashMap(); //perf improvement in case type category with dates\n\n    var items = [];\n    var bindable = false;\n    var dateAxis;\n\n    for (var seriesIx = 0; seriesIx < seriesLength; seriesIx++) {\n      var s = series[seriesIx];\n      var onAxis = s.categoryAxis === axis.name || !s.categoryAxis && axisIx === 0;\n      var data = s.data;\n      var dataLength = data.length;\n      var bind = s.categoryField && onAxis;\n      bindable = bind || bindable;\n\n      if (bind && dataLength > 0) {\n        dateAxis = isDateAxis(axis, getField(s.categoryField, data[0]));\n        var getFn = dateAxis ? getDateField : getField;\n\n        for (var dataIx = 0; dataIx < dataLength; dataIx++) {\n          var dataRow = data[dataIx];\n          var category = getFn(s.categoryField, dataRow, this$1.chartService.intl);\n\n          if (dateAxis || !uniqueCategories.get(category)) {\n            items.push([category, dataRow]);\n\n            if (!dateAxis) {\n              uniqueCategories.set(category, true);\n            }\n          }\n        }\n      }\n    }\n\n    if (items.length > 0) {\n      if (dateAxis) {\n        items = uniqueDates(items, function (a, b) {\n          return dateComparer(a[0], b[0]);\n        });\n      }\n\n      var result = transpose(items);\n      axis.categories = result[0];\n    } else if (bindable) {\n      axis.categories = [];\n    }\n  };\n\n  Chart.prototype._isBindable = function _isBindable(series) {\n    var valueFields = SeriesBinder.current.valueFields(series);\n    var result = true;\n\n    for (var i = 0; i < valueFields.length; i++) {\n      var field = valueFields[i];\n\n      if (field === VALUE) {\n        field = \"field\";\n      } else {\n        field = field + \"Field\";\n      }\n\n      if (!defined(series[field])) {\n        result = false;\n        break;\n      }\n    }\n\n    return result;\n  };\n\n  Chart.prototype._noTransitionsRedraw = function _noTransitionsRedraw() {\n    var options = this.options;\n    var transitionsState;\n\n    if (options.transitions !== false) {\n      options.transitions = false;\n      transitionsState = true;\n    }\n\n    this._redraw();\n\n    if (transitionsState) {\n      options.transitions = true;\n    }\n  };\n\n  Chart.prototype._legendItemHover = function _legendItemHover(seriesIndex, pointIndex) {\n    var ref = this;\n    var plotArea = ref._plotArea;\n    var highlight = ref._highlight;\n    var currentSeries = (plotArea.srcSeries || plotArea.series)[seriesIndex];\n    var items;\n\n    if (inArray(currentSeries.type, [PIE, DONUT, FUNNEL])) {\n      items = plotArea.findPoint(function (point) {\n        return point.series.index === seriesIndex && point.index === pointIndex;\n      });\n    } else {\n      items = plotArea.pointsBySeriesIndex(seriesIndex);\n    }\n\n    if (this._hasInactiveOpacity() && currentSeries.visible && items) {\n      var multipleSeries = plotArea.series.length > 1;\n      var point = items.length ? items[0] : items;\n\n      this._displayInactiveOpacity(point, multipleSeries, items);\n    } else {\n      highlight.show(items);\n    }\n  };\n\n  Chart.prototype._shouldAttachMouseMove = function _shouldAttachMouseMove() {\n    return this._plotArea.crosshairs.length || this._tooltip && this._sharedTooltip() || this.requiresHandlers([PLOT_AREA_HOVER, PLOT_AREA_LEAVE]);\n  };\n\n  Chart.prototype.updateMouseMoveHandler = function updateMouseMoveHandler() {\n    var obj, obj$1;\n    unbindEvents(this.element, (obj = {}, obj[MOUSEMOVE] = this._mousemove, obj));\n\n    if (this._shouldAttachMouseMove()) {\n      bindEvents(this.element, (obj$1 = {}, obj$1[MOUSEMOVE] = this._mousemove, obj$1));\n    }\n  };\n\n  Chart.prototype.applyOptions = function applyOptions(options, theme) {\n    clearMissingValues(this._originalOptions, options);\n    this._originalOptions = deepExtend(this._originalOptions, options);\n    this.options = deepExtend({}, this._originalOptions);\n\n    if (theme) {\n      this._theme = theme;\n      this.chartService.theme = theme;\n    }\n\n    this._initTheme(this.options, this._theme);\n\n    this._toggleDragZoomEvents();\n  };\n\n  Chart.prototype.setOptions = function setOptions(options, theme) {\n    this.applyOptions(options, theme);\n    this.bindCategories();\n    this.redraw();\n    this.updateMouseMoveHandler();\n  };\n\n  Chart.prototype.setDirection = function setDirection(rtl) {\n    this.chartService.rtl = Boolean(rtl);\n\n    if (this.surface && this.surface.type === 'svg') {\n      this._destroySurface();\n    }\n  };\n\n  Chart.prototype.setIntlService = function setIntlService(intl) {\n    this.chartService.intl = intl;\n  };\n\n  Chart.prototype.noTransitionsRedraw = function noTransitionsRedraw() {\n    this._noTransitionsRedraw();\n  };\n\n  Chart.prototype.destroy = function destroy() {\n    var obj, obj$1;\n    this._destroyed = true;\n    unbindEvents(this.element, (obj = {}, obj[CONTEXTMENU] = this._clickHandler, obj[MOUSEWHEEL] = this._mousewheelHandler, obj[MOUSEMOVE] = this._mousemove, obj[MOUSELEAVE] = this._mouseleaveHandler, obj));\n\n    if (this.domEvents) {\n      this.domEvents.destroy();\n      delete this.domEvents;\n    }\n\n    if (this._mouseMoveTrackHandler) {\n      unbindEvents(document, (obj$1 = {}, obj$1[MOUSEMOVE] = this._mouseMoveTrackHandler, obj$1));\n    }\n\n    this._destroyView();\n\n    this._destroySurface();\n\n    this._clearRedrawTimeout();\n  };\n\n  Chart.prototype._destroySurface = function _destroySurface() {\n    var surface = this.surface;\n\n    if (surface) {\n      surface.unbind(\"mouseenter\", this._surfaceMouseenterHandler);\n      surface.unbind(\"mouseleave\", this._surfaceMouseleaveHandler);\n      surface.destroy();\n      this.surface = null;\n    }\n  };\n\n  Chart.prototype._destroySelections = function _destroySelections() {\n    var selections = this._selections;\n\n    if (selections) {\n      while (selections.length > 0) {\n        selections.shift().destroy();\n      }\n    }\n  };\n\n  Chart.prototype._destroyView = function _destroyView() {\n    var model = this._model;\n\n    if (model) {\n      model.destroy();\n      this._model = null;\n    }\n\n    this._unsetActivePoint();\n\n    this._destroySelections();\n\n    if (this._tooltip) {\n      this._tooltip.destroy();\n    }\n\n    if (this._highlight) {\n      this._highlight.destroy();\n    }\n\n    if (this._zoomSelection) {\n      this._zoomSelection.destroy();\n\n      delete this._zoomSelection;\n    }\n\n    if (this._pannable) {\n      this._pannable.destroy();\n\n      delete this._pannable;\n    }\n\n    if (this._mousewheelZoom) {\n      this._mousewheelZoom.destroy();\n\n      delete this._mousewheelZoom;\n    }\n  };\n\n  return Chart;\n}(Class);\n\nfunction resolveAxisAliases(options) {\n  var aliases = AXIS_NAMES;\n\n  for (var idx = 0; idx < aliases.length; idx++) {\n    var alias = aliases[idx] + \"Axes\";\n\n    if (options[alias]) {\n      options[aliases[idx] + \"Axis\"] = options[alias];\n      delete options[alias];\n    }\n  }\n}\n\nfunction pointByCategoryName(points, name) {\n  if (points) {\n    for (var idx = 0; idx < points.length; idx++) {\n      if (points[idx].category === name) {\n        return [points[idx]];\n      }\n    }\n  }\n}\n\nfunction applyAxisDefaults(options, themeOptions) {\n  var themeAxisDefaults = (themeOptions || {}).axisDefaults || {};\n  var axisName, axisDefaults, axes;\n\n  function mapAxisOptions(axisOptions) {\n    var axisColor = (axisOptions || {}).color || axisDefaults.color;\n    var result = deepExtend({}, themeAxisDefaults, themeAxisDefaults[axisName], axisDefaults, axisDefaults[axisName], {\n      line: {\n        color: axisColor\n      },\n      labels: {\n        color: axisColor\n      },\n      title: {\n        color: axisColor\n      }\n    }, axisOptions);\n    delete result[axisName];\n    return result;\n  }\n\n  for (var idx = 0; idx < AXIS_NAMES.length; idx++) {\n    axisName = AXIS_NAMES[idx] + \"Axis\";\n    axisDefaults = options.axisDefaults || {};\n    axes = [].concat(options[axisName]);\n    axes = axes.map(mapAxisOptions);\n    options[axisName] = axes.length > 1 ? axes : axes[0];\n  }\n}\n\nfunction applySeriesDefaults(options, themeOptions) {\n  var series = options.series;\n  var seriesLength = series.length;\n  var seriesDefaults = options.seriesDefaults;\n  var commonDefaults = deepExtend({}, options.seriesDefaults);\n  var themeSeriesDefaults = themeOptions ? deepExtend({}, themeOptions.seriesDefaults) : {};\n  var commonThemeDefaults = deepExtend({}, themeSeriesDefaults);\n  cleanupNestedSeriesDefaults(commonDefaults);\n  cleanupNestedSeriesDefaults(commonThemeDefaults);\n\n  for (var i = 0; i < seriesLength; i++) {\n    var seriesType = series[i].type || options.seriesDefaults.type;\n    var baseOptions = deepExtend({\n      data: []\n    }, commonThemeDefaults, themeSeriesDefaults[seriesType], {\n      tooltip: options.tooltip\n    }, commonDefaults, seriesDefaults[seriesType]);\n    series[i]._defaults = baseOptions;\n    series[i] = deepExtend({}, baseOptions, series[i]);\n    series[i].data = series[i].data || [];\n  }\n}\n\nfunction cleanupNestedSeriesDefaults(seriesDefaults) {\n  delete seriesDefaults.bar;\n  delete seriesDefaults.column;\n  delete seriesDefaults.rangeColumn;\n  delete seriesDefaults.line;\n  delete seriesDefaults.verticalLine;\n  delete seriesDefaults.pie;\n  delete seriesDefaults.donut;\n  delete seriesDefaults.area;\n  delete seriesDefaults.verticalArea;\n  delete seriesDefaults.scatter;\n  delete seriesDefaults.scatterLine;\n  delete seriesDefaults.bubble;\n  delete seriesDefaults.candlestick;\n  delete seriesDefaults.ohlc;\n  delete seriesDefaults.boxPlot;\n  delete seriesDefaults.bullet;\n  delete seriesDefaults.verticalBullet;\n  delete seriesDefaults.polarArea;\n  delete seriesDefaults.polarLine;\n  delete seriesDefaults.radarArea;\n  delete seriesDefaults.radarLine;\n  delete seriesDefaults.waterfall;\n}\n\nfunction axisRanges(axes) {\n  var ranges = {};\n\n  for (var i = 0; i < axes.length; i++) {\n    var axis = axes[i];\n    var axisName = axis.options.name;\n\n    if (axisName) {\n      ranges[axisName] = axis.range();\n    }\n  }\n\n  return ranges;\n}\n\nfunction sortDates(dates, comparer) {\n  if (comparer === void 0) comparer = dateComparer;\n\n  for (var i = 1, length = dates.length; i < length; i++) {\n    if (comparer(dates[i], dates[i - 1]) < 0) {\n      dates.sort(comparer);\n      break;\n    }\n  }\n\n  return dates;\n}\n\nfunction uniqueDates(srcDates, comparer) {\n  if (comparer === void 0) comparer = dateComparer;\n  var dates = sortDates(srcDates, comparer);\n  var length = dates.length;\n  var result = length > 0 ? [dates[0]] : [];\n\n  for (var i = 1; i < length; i++) {\n    if (comparer(dates[i], last(result)) !== 0) {\n      result.push(dates[i]);\n    }\n  }\n\n  return result;\n}\n\nfunction transpose(rows) {\n  var rowCount = rows.length;\n  var result = [];\n\n  for (var rowIx = 0; rowIx < rowCount; rowIx++) {\n    var row = rows[rowIx];\n    var colCount = row.length;\n\n    for (var colIx = 0; colIx < colCount; colIx++) {\n      result[colIx] = result[colIx] || [];\n      result[colIx].push(row[colIx]);\n    }\n  }\n\n  return result;\n}\n\nvar DATA_FIELDS = ['data', 'categories'];\n\nfunction clearMissingValues(originalOptions, options) {\n  for (var field in options) {\n    if (!inArray(field, DATA_FIELDS) && options.hasOwnProperty(field)) {\n      var fieldValue = options[field];\n      var originalValue = originalOptions[field];\n\n      if (defined(originalValue)) {\n        var nullValue = fieldValue === null;\n\n        if (nullValue || !defined(fieldValue)) {\n          delete originalOptions[field];\n\n          if (nullValue) {\n            delete options[field];\n          }\n        } else if (originalValue && isObject(fieldValue)) {\n          if (isObject(originalValue)) {\n            clearMissingValues(originalValue, fieldValue);\n          }\n        }\n      }\n    }\n  }\n}\n\nfunction triggerPaneRender(panes) {\n  for (var idx = 0; idx < panes.length; idx++) {\n    panes[idx].notifyRender();\n  }\n}\n\nsetDefaultOptions(Chart, {\n  renderAs: \"\",\n  chartArea: {},\n  legend: {\n    visible: true,\n    labels: {}\n  },\n  categoryAxis: {},\n  seriesDefaults: {\n    type: COLUMN,\n    data: [],\n    highlight: {\n      visible: true\n    },\n    labels: {},\n    negativeValues: {\n      visible: false\n    }\n  },\n  series: [],\n  seriesColors: null,\n  tooltip: {\n    visible: false\n  },\n  transitions: true,\n  valueAxis: {},\n  plotArea: {},\n  title: {},\n  xAxis: {},\n  yAxis: {},\n  panes: [{}],\n  pannable: false,\n  zoomable: false\n});\nexport default Chart;","map":{"version":3,"sources":["C:/Users/nsahi/OneDrive/Documents/cyber_media/cm_galaxy/node_modules/@progress/kendo-charts/dist/es/chart/chart.js"],"names":["drawing","draw","throttle","geometry","RootElement","Title","CategoryAxis","Point","Highlight","Pannable","ZoomSelection","MousewheelZoom","Legend","PlotAreaFactory","Selection","SeriesBinder","Tooltip","SharedTooltip","CategoricalPlotArea","PlotAreaBase","ChartService","DomEventsBuilder","getField","isDateAxis","getDateField","ChartPane","ChartPlotArea","findAxisByName","X","Y","VALUE","DEFAULT_WIDTH","DEFAULT_HEIGHT","DEFAULT_SERIES_OPACITY","addClass","Class","setDefaultOptions","deepExtend","defined","find","isObject","isFunction","elementSize","elementOffset","elementScale","elementStyles","eventCoordinates","bindEvents","unbindEvents","mousewheelDelta","FontLoader","inArray","last","round","HashMap","valueOrDefault","dateComparer","DRAG_START","DRAG","DRAG_END","ZOOM_START","ZOOM","ZOOM_END","SELECT_START","SELECT","SELECT_END","PLOT_AREA_HOVER","PLOT_AREA_LEAVE","RENDER","CATEGORY","PIE","DONUT","FUNNEL","COLUMN","MOUSEWHEEL","MOUSEWHEEL_DELAY","MOUSEWHEEL_ZOOM_RATE","SHOW_TOOLTIP","SERIES_HOVER","AXIS_NAMES","MOUSEMOVE","CONTEXTMENU","MOUSELEAVE","MOUSEMOVE_DELAY","Chart","element","userOptions","themeOptions","context","this$1","call","observers","addObserver","observer","chartService","theme","_initElement","options","_originalOptions","_theme","_initTheme","_initHandlers","_initSurface","bindCategories","preloadFonts","fontLoaded","_destroyed","trigger","_redraw","_attachEvents","__proto__","prototype","Object","create","constructor","_setElementClass","style","position","firstChild","removeChild","seriesCopies","series","i","length","push","assign","resolveAxisAliases","applyDefaults","seriesColors","applySeriesColors","getSize","chartArea","width","parseInt","Math","floor","offsetWidth","height","offsetHeight","resize","force","size","currentSize","_size","hasSize","_resize","_selections","s","visible","_destroySelections","_setupSelection","_noTransitionsRedraw","redraw","paneName","plotArea","_model","_plotArea","pane","findPane","getAxis","name","axes","findPaneByName","panes","idx","findPaneByIndex","toggleHighlight","show","filter","firstSeries","srcSeries","points","filterPoints","seriesName","categoryName","category","type","pointByCategoryName","pointsBySeriesName","charts","togglePointsHighlight","highlight","_highlight","togglePointHighlight","showTooltip","shared","_sharedTooltip","ref","tooltip","_tooltip","point","categoryIndex","findPoint","categoryIx","categoryAxis","pointsByCategoryIndex","showAt","hideTooltip","hide","surface","wrap","_surfaceWrap","renderAs","_destroySurface","Surface","bind","_surfaceMouseenterHandler","_surfaceMouseleaveHandler","clear","model","_getModel","_destroyView","renderVisual","transitions","traverse","animation","setup","visual","play","_createTooltip","_createPannable","_createZoomSelection","_createMousewheelZoom","triggerPaneRender","_navState","_cancelDomEvents","exportVisual","exportOptions","currentOptions","clearMissingValues","pannable","_pannable","zoomable","selection","_zoomSelection","mousewheel","_mousewheelZoom","_toggleDragZoomEvents","allowDrag","requiresHandlers","allowZoom","_dragZoomEnabled","touchAction","_touchAction","_toggleDomEvents","drag","zoom","domEvents","toggleDrag","toggleZoom","tooltipOptions","_createSharedTooltip","applyAxisDefaults","applySeriesDefaults","colors","currentSeries","seriesColor","defaults","_defaults","color","_createPlotArea","_modelOptions","chart","title","buildTitle","subtitle","align","append","apply","orderTitles","legend","reflow","skipSeries","current","selections","axis","select","vertical","range","min","max","_selectStart","e","_select","_selectEnd","_clickHandler","_click","_mousewheelHandler","_mousewheel","_mouseleaveHandler","_mouseleave","_mouseover","_mouseout","_mousemove","removeObserver","index","indexOf","splice","eventNames","args","anchor","_toDocumentCoordinates","sender","isDefaultPrevented","obj","obj$1","_shouldAttachMouseMove","start","_start","move","_move","end","_end","tap","_tap","gesturestart","_gesturestart","gesturechange","_gesturechange","gestureend","_gestureend","_hoveredPoint","out","_plotAreaHovered","cancel","_stopChartHandlers","_gestureDistance","distance","_unsetActivePoint","suspendTracking","_zooming","resumeTracking","mousewheelZoom","preventDefault","previousGestureDistance","scaleDelta","abs","delta","axisRanges","originalEvent","coords","_eventCoordinates","ranges","updateRanges","_drawingChartElement","leave","backgroundContainsPoint","_startNavigation","_suppressHover","panning","state","pan","ranges$1","currentAxis","axisName","y","x","startLocation","location","translateRange","_endNavigation","paneByPoint","onPane","_mousewheelZoomRate","rate","_mwTimeout","clearTimeout","setTimeout","prevented","totalDelta","scaleRange","chartEvent","findPointPane","slice","_getChartElement","match","eventTarget","chartElement","parent","aliasFor","closest","coordinates","_toModelCoordinates","_elementPadding","_padding","paddingLeft","paddingTop","top","left","padding","offset","clientX","clientY","inverseTransform","invert","transform","drawingElement","sharedTooltip","_startHover","_trackSharedTooltip","_propagateClick","handlingTap","click","hover","over","activePoint","_activePoint","multipleSeries","hasInactiveOpacity","_hasInactiveOpacity","_updateHoveredPoint","_displayTooltip","_displayInactiveOpacity","_activeChartInstance","_updateSeriesOpacity","_applySeriesOpacity","children","highlightPoints","chartInstance","_chartInstanceFromPoint","inactivePoints","supportsPointInactiveOpacity","_getInactivePoints","_getInactiveOpacityForSeries","allPoints","_getAllPointsOfType","container","concat","hoveredPoint","resetOpacity","currSeries","defaultOpacity","_getDefaultOpacityForSeries","inactiveOpacity","opacity","line","elements","activeSeries","reset","shouldHighlight","hasDefaultInactiveOpacity","seriesDefaults","undefined","defaultInactiveOpacity","seriesInactiveOpacity","tooltipTracking","_mouseMoveTrackHandler","_mouseMoveTracking","document","box","containsPoint","getNearestPoint","seriesPoint","seriesIx","_trackCrosshairs","overPlotArea","crosshairs","toggle","pointCategoryIndex","_tooltipCategoryIx","_sharedHighlight","pointArgs","map","eventArgs","hoverArgs","categoryPoints","hideElements","hideCrosshairs","keepTooltipOpen","_deferRedraw","_clearRedrawTimeout","_redrawTimeout","clearInterval","definitions","axisIx","autoBind","bindCategoryAxisFromSeries","seriesLength","uniqueCategories","items","bindable","dateAxis","onAxis","data","dataLength","categoryField","getFn","dataIx","dataRow","intl","get","set","uniqueDates","a","b","result","transpose","categories","_isBindable","valueFields","field","transitionsState","_legendItemHover","seriesIndex","pointIndex","pointsBySeriesIndex","updateMouseMoveHandler","applyOptions","setOptions","setDirection","rtl","Boolean","setIntlService","noTransitionsRedraw","destroy","unbind","shift","aliases","alias","themeAxisDefaults","axisDefaults","mapAxisOptions","axisOptions","axisColor","labels","commonDefaults","themeSeriesDefaults","commonThemeDefaults","cleanupNestedSeriesDefaults","seriesType","baseOptions","bar","column","rangeColumn","verticalLine","pie","donut","area","verticalArea","scatter","scatterLine","bubble","candlestick","ohlc","boxPlot","bullet","verticalBullet","polarArea","polarLine","radarArea","radarLine","waterfall","sortDates","dates","comparer","sort","srcDates","rows","rowCount","rowIx","row","colCount","colIx","DATA_FIELDS","originalOptions","hasOwnProperty","fieldValue","originalValue","nullValue","notifyRender","negativeValues","valueAxis","xAxis","yAxis"],"mappings":"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","sourcesContent":["import { drawing as draw, throttle, geometry } from '@progress/kendo-drawing';\r\n\r\nimport { RootElement, Title, CategoryAxis, Point } from '../core';\r\n\r\nimport Highlight from './highlight';\r\nimport Pannable from './pan-and-zoom/pannable';\r\nimport ZoomSelection from './pan-and-zoom/zoom-selection';\r\nimport MousewheelZoom from './pan-and-zoom/mousewheel-zoom';\r\nimport Legend from './legend/legend';\r\nimport PlotAreaFactory from './plotarea/plotarea-factory';\r\nimport Selection from './selection';\r\nimport SeriesBinder from './series-binder';\r\nimport Tooltip from './tooltip/tooltip';\r\nimport SharedTooltip from './tooltip/shared-tooltip';\r\nimport CategoricalPlotArea from './plotarea/categorical-plotarea';\r\nimport PlotAreaBase from './plotarea/plotarea-base';\r\nimport { ChartService, DomEventsBuilder } from '../services';\r\nimport getField from './utils/get-field';\r\nimport isDateAxis from './utils/is-date-axis';\r\nimport getDateField from './utils/get-date-field';\r\nimport { ChartPane, ChartPlotArea, findAxisByName } from './api-elements';\r\n\r\nimport { X, Y, VALUE, DEFAULT_WIDTH, DEFAULT_HEIGHT, DEFAULT_SERIES_OPACITY } from '../common/constants';\r\nimport { addClass, Class, setDefaultOptions, deepExtend, defined, find, isObject, isFunction, elementSize, elementOffset,\r\n         elementScale, elementStyles, eventCoordinates, bindEvents, unbindEvents, mousewheelDelta, FontLoader, inArray, last, round,\r\n         HashMap, valueOrDefault } from '../common';\r\n\r\nimport { dateComparer } from '../date-utils';\r\n\r\nimport { DRAG_START, DRAG, DRAG_END, ZOOM_START, ZOOM, ZOOM_END, SELECT_START, SELECT, SELECT_END, PLOT_AREA_HOVER, PLOT_AREA_LEAVE,\r\n    RENDER, CATEGORY, PIE, DONUT, FUNNEL, COLUMN, MOUSEWHEEL, MOUSEWHEEL_DELAY, MOUSEWHEEL_ZOOM_RATE, SHOW_TOOLTIP, SERIES_HOVER } from './constants';\r\n\r\nimport './animations';\r\nimport './register-charts';\r\n\r\nvar AXIS_NAMES = [ CATEGORY, VALUE, X, Y ];\r\n\r\nvar MOUSEMOVE = \"mousemove\";\r\nvar CONTEXTMENU = \"contextmenu\";\r\nvar MOUSELEAVE = \"mouseleave\";\r\nvar MOUSEMOVE_DELAY = 20;\r\n\r\nvar Chart = (function (Class) {\r\n    function Chart(element, userOptions, themeOptions, context) {\r\n        var this$1 = this;\r\n        if ( context === void 0 ) context = {};\r\n\r\n        Class.call(this);\r\n\r\n        this.observers = [];\r\n        this.addObserver(context.observer);\r\n        this.chartService = new ChartService(this, context);\r\n        this.chartService.theme = themeOptions;\r\n\r\n        this._initElement(element);\r\n\r\n        var options = deepExtend({}, this.options, userOptions);\r\n        this._originalOptions = deepExtend({}, options);\r\n        this._theme = themeOptions;\r\n        this._initTheme(options, themeOptions);\r\n\r\n        this._initHandlers();\r\n        this._initSurface();\r\n\r\n        this.bindCategories();\r\n        FontLoader.preloadFonts(userOptions, function () {\r\n            this$1.fontLoaded = true;\r\n            if (!this$1._destroyed) {\r\n                this$1.trigger('init');\r\n                this$1._redraw();\r\n                this$1._attachEvents();\r\n            }\r\n        });\r\n    }\r\n\r\n    if ( Class ) Chart.__proto__ = Class;\r\n    Chart.prototype = Object.create( Class && Class.prototype );\r\n    Chart.prototype.constructor = Chart;\r\n\r\n    Chart.prototype._initElement = function _initElement (element) {\r\n        this._setElementClass(element);\r\n        element.style.position = \"relative\";\r\n        while (element.firstChild) {\r\n            element.removeChild(element.firstChild);\r\n        }\r\n        this.element = element;\r\n    };\r\n\r\n    Chart.prototype._setElementClass = function _setElementClass (element) {\r\n        addClass(element, \"k-chart\");\r\n    };\r\n\r\n    Chart.prototype._initTheme = function _initTheme (options, themeOptions) {\r\n        var seriesCopies = [];\r\n        var series = options.series || [];\r\n\r\n        for (var i = 0; i < series.length; i++) {\r\n            seriesCopies.push(Object.assign({}, series[i]));\r\n        }\r\n        options.series = seriesCopies;\r\n\r\n        resolveAxisAliases(options);\r\n        this.applyDefaults(options, themeOptions);\r\n\r\n        // Clean up default if not overriden by data attributes\r\n        if (options.seriesColors === null) {\r\n            delete options.seriesColors;\r\n        }\r\n\r\n        this.options = deepExtend({}, themeOptions, options);\r\n        this.applySeriesColors();\r\n    };\r\n\r\n    Chart.prototype.getSize = function getSize () {\r\n        var chartArea = this.options.chartArea || {};\r\n        var width = chartArea.width ? parseInt(chartArea.width, 10) : Math.floor(this.element.offsetWidth);\r\n        var height = chartArea.height ? parseInt(chartArea.height, 10) : Math.floor(this.element.offsetHeight);\r\n\r\n        return {\r\n            width: width,\r\n            height: height\r\n        };\r\n    };\r\n\r\n    Chart.prototype.resize = function resize (force) {\r\n        var size = this.getSize();\r\n        var currentSize = this._size;\r\n        var hasSize = size.width > 0 || size.height > 0;\r\n\r\n        if (force || hasSize && (!currentSize || size.width !== currentSize.width || size.height !== currentSize.height)) {\r\n            this._size = size;\r\n            this._resize(size, force);\r\n            this.trigger(\"resize\", size);\r\n        } else if (hasSize && this._selections && find(this._selections, function (s) { return !s.visible; })) {\r\n            this._destroySelections();\r\n            this._setupSelection();\r\n        }\r\n    };\r\n\r\n    Chart.prototype._resize = function _resize () {\r\n        this._noTransitionsRedraw();\r\n    };\r\n\r\n    Chart.prototype.redraw = function redraw (paneName) {\r\n        this.applyDefaults(this.options);\r\n        this.applySeriesColors();\r\n\r\n        if (paneName) {\r\n            var plotArea = this._model._plotArea;\r\n            var pane = plotArea.findPane(paneName);\r\n            plotArea.redraw(pane);\r\n        } else {\r\n            this._redraw();\r\n        }\r\n    };\r\n\r\n    Chart.prototype.getAxis = function getAxis (name) {\r\n        return findAxisByName(name, this._plotArea.axes);\r\n    };\r\n\r\n    Chart.prototype.findAxisByName = function findAxisByName (name) {\r\n        return this.getAxis(name);\r\n    };\r\n\r\n    Chart.prototype.findPaneByName = function findPaneByName (name) {\r\n        var panes = this._plotArea.panes;\r\n\r\n        for (var idx = 0; idx < panes.length; idx++) {\r\n            if (panes[idx].options.name === name) {\r\n                return new ChartPane(panes[idx]);\r\n            }\r\n        }\r\n    };\r\n\r\n    Chart.prototype.findPaneByIndex = function findPaneByIndex (idx) {\r\n        var panes = this._plotArea.panes;\r\n        if (panes[idx]) {\r\n            return new ChartPane(panes[idx]);\r\n        }\r\n    };\r\n\r\n    Chart.prototype.plotArea = function plotArea () {\r\n        return new ChartPlotArea(this._plotArea);\r\n    };\r\n\r\n    Chart.prototype.toggleHighlight = function toggleHighlight (show, filter) {\r\n        var plotArea = this._plotArea;\r\n        var firstSeries = (plotArea.srcSeries || plotArea.series || [])[0];\r\n        var points;\r\n\r\n        if (isFunction(filter)) {\r\n            points = plotArea.filterPoints(filter);\r\n        } else {\r\n            var seriesName, categoryName;\r\n            if (isObject(filter)) {\r\n                seriesName = filter.series;\r\n                categoryName = filter.category;\r\n            } else {\r\n                seriesName = categoryName = filter;\r\n            }\r\n\r\n            if (firstSeries.type === DONUT) {\r\n                points = pointByCategoryName(plotArea.pointsBySeriesName(seriesName), categoryName);\r\n            } else if (firstSeries.type === PIE || firstSeries.type === FUNNEL) {\r\n                points = pointByCategoryName((plotArea.charts[0] || {}).points, categoryName);\r\n            } else {\r\n                points = plotArea.pointsBySeriesName(seriesName);\r\n            }\r\n        }\r\n\r\n        if (points) {\r\n            this.togglePointsHighlight(show, points);\r\n        }\r\n    };\r\n\r\n    Chart.prototype.togglePointsHighlight = function togglePointsHighlight (show, points) {\r\n        var highlight = this._highlight;\r\n        for (var idx = 0; idx < points.length; idx++) {\r\n            highlight.togglePointHighlight(points[idx], show);\r\n        }\r\n    };\r\n\r\n    Chart.prototype.showTooltip = function showTooltip (filter) {\r\n        var shared = this._sharedTooltip();\r\n        var ref = this;\r\n        var tooltip = ref._tooltip;\r\n        var plotArea = ref._plotArea;\r\n        var point, categoryIndex;\r\n\r\n        if (isFunction(filter)) {\r\n            point = plotArea.findPoint(filter);\r\n            if (point && shared) {\r\n                categoryIndex = point.categoryIx;\r\n            }\r\n        } else if (shared && defined(filter)) {\r\n            categoryIndex = plotArea.categoryAxis.categoryIndex(filter);\r\n        }\r\n\r\n        if (shared) {\r\n            if (categoryIndex >= 0) {\r\n                var points = this._plotArea.pointsByCategoryIndex(categoryIndex);\r\n                tooltip.showAt(points);\r\n            }\r\n        } else if (point) {\r\n            tooltip.show(point);\r\n        }\r\n    };\r\n\r\n    Chart.prototype.hideTooltip = function hideTooltip () {\r\n        this._tooltip.hide();\r\n    };\r\n\r\n    Chart.prototype._initSurface = function _initSurface () {\r\n        var surface = this.surface;\r\n        var wrap = this._surfaceWrap();\r\n\r\n        var chartArea = this.options.chartArea || {};\r\n        if (chartArea.width) {\r\n            elementSize(wrap, { width: chartArea.width });\r\n        }\r\n        if (chartArea.height) {\r\n            elementSize(wrap, { height: chartArea.height });\r\n        }\r\n\r\n        if (!surface || surface.options.type !== this.options.renderAs) {\r\n            this._destroySurface();\r\n\r\n            this.surface = draw.Surface.create(wrap, {\r\n                type: this.options.renderAs\r\n            });\r\n\r\n            this.surface.bind(\"mouseenter\", this._surfaceMouseenterHandler);\r\n            this.surface.bind(\"mouseleave\", this._surfaceMouseleaveHandler);\r\n\r\n        } else {\r\n            this.surface.clear();\r\n            this.surface.resize();\r\n        }\r\n    };\r\n\r\n    Chart.prototype._surfaceWrap = function _surfaceWrap () {\r\n        return this.element;\r\n    };\r\n\r\n    Chart.prototype._redraw = function _redraw () {\r\n        var model = this._getModel();\r\n        this._size = {\r\n            width: model.options.width,\r\n            height: model.options.height\r\n        };\r\n\r\n        this._destroyView();\r\n\r\n        this._model = model;\r\n        this._plotArea = model._plotArea;\r\n\r\n        model.renderVisual();\r\n\r\n        if (this.options.transitions !== false) {\r\n            model.traverse(function(element) {\r\n                if (element.animation) {\r\n                    element.animation.setup();\r\n                }\r\n            });\r\n        }\r\n\r\n        this._initSurface();\r\n        this.surface.draw(model.visual);\r\n\r\n        if (this.options.transitions !== false) {\r\n            model.traverse(function(element) {\r\n                if (element.animation) {\r\n                    element.animation.play();\r\n                }\r\n            });\r\n        }\r\n\r\n        this._tooltip = this._createTooltip();\r\n        this._highlight = new Highlight();\r\n        this._setupSelection();\r\n        this._createPannable();\r\n        this._createZoomSelection();\r\n        this._createMousewheelZoom();\r\n\r\n        this.trigger(RENDER);\r\n        triggerPaneRender(this._plotArea.panes);\r\n\r\n        if (!this._navState) {\r\n            this._cancelDomEvents();\r\n        }\r\n    };\r\n\r\n    Chart.prototype.exportVisual = function exportVisual (exportOptions) {\r\n        var visual;\r\n        if (exportOptions && (exportOptions.width || exportOptions.height || exportOptions.options)) {\r\n            var currentOptions = this.options;\r\n            var options = deepExtend({}, exportOptions.options, {\r\n                chartArea: {\r\n                    width: exportOptions.width,\r\n                    height: exportOptions.height\r\n                }\r\n            });\r\n\r\n            clearMissingValues(this._originalOptions, options);\r\n            this.options = deepExtend({}, this._originalOptions, options);\r\n            this._initTheme(this.options, this._theme);\r\n            this.bindCategories();\r\n\r\n            var model = this._getModel();\r\n\r\n            model.renderVisual();\r\n            triggerPaneRender(model._plotArea.panes);\r\n\r\n            visual = model.visual;\r\n\r\n            this.options = currentOptions;\r\n        } else {\r\n            visual = this.surface.exportVisual();\r\n        }\r\n\r\n        return visual;\r\n    };\r\n\r\n    Chart.prototype._sharedTooltip = function _sharedTooltip () {\r\n        return this._plotArea instanceof CategoricalPlotArea && this.options.tooltip && this.options.tooltip.shared;\r\n    };\r\n\r\n    Chart.prototype._createPannable = function _createPannable () {\r\n        var options = this.options;\r\n        if (options.pannable !== false) {\r\n            this._pannable = new Pannable(this._plotArea, options.pannable);\r\n        }\r\n    };\r\n\r\n    Chart.prototype._createZoomSelection = function _createZoomSelection () {\r\n        var zoomable = this.options.zoomable;\r\n        var selection = (zoomable || {}).selection;\r\n        if (zoomable !== false && selection !== false) {\r\n            this._zoomSelection = new ZoomSelection(this, selection);\r\n        }\r\n    };\r\n\r\n    Chart.prototype._createMousewheelZoom = function _createMousewheelZoom () {\r\n        var zoomable = this.options.zoomable;\r\n        var mousewheel = (zoomable || {}).mousewheel;\r\n        if (zoomable !== false && mousewheel !== false) {\r\n            this._mousewheelZoom = new MousewheelZoom(this, mousewheel);\r\n        }\r\n    };\r\n\r\n    Chart.prototype._toggleDragZoomEvents = function _toggleDragZoomEvents () {\r\n        var pannable = this.options.pannable;\r\n        var zoomable = this.options.zoomable;\r\n        var selection = (zoomable || {}).selection;\r\n        var mousewheel = (zoomable || {}).mousewheel;\r\n        var allowDrag = !pannable && (zoomable === false || selection === false) && !this.requiresHandlers([ DRAG_START, DRAG, DRAG_END ]);\r\n        var allowZoom = (zoomable === false || mousewheel === false) && !this.requiresHandlers([ ZOOM_START, ZOOM, ZOOM_END ]);\r\n        var element = this.element;\r\n\r\n        if (this._dragZoomEnabled && allowDrag && allowZoom) {\r\n            element.style.touchAction = this._touchAction || '';\r\n            this._dragZoomEnabled = false;\r\n        } else if (!this._dragZoomEnabled && !(allowDrag && allowZoom)) {\r\n            element.style.touchAction = \"none\";\r\n\r\n            this._dragZoomEnabled = true;\r\n        }\r\n\r\n        this._toggleDomEvents(!allowDrag, !allowZoom);\r\n    };\r\n\r\n    Chart.prototype._toggleDomEvents = function _toggleDomEvents (drag, zoom) {\r\n        var domEvents = this.domEvents;\r\n        if (!domEvents) {\r\n            return;\r\n        }\r\n\r\n        if (domEvents.toggleDrag) {\r\n            domEvents.toggleDrag(drag);\r\n        }\r\n\r\n        if (domEvents.toggleZoom) {\r\n            domEvents.toggleZoom(zoom);\r\n        }\r\n    };\r\n\r\n    Chart.prototype._createTooltip = function _createTooltip () {\r\n        var ref = this;\r\n        var tooltipOptions = ref.options.tooltip;\r\n        var tooltip;\r\n\r\n        if (this._sharedTooltip()) {\r\n            tooltip = this._createSharedTooltip(tooltipOptions);\r\n        } else {\r\n            tooltip = new Tooltip(this.chartService, tooltipOptions);\r\n        }\r\n\r\n        return tooltip;\r\n    };\r\n\r\n    Chart.prototype._createSharedTooltip = function _createSharedTooltip (options) {\r\n        return new SharedTooltip(this._plotArea, options);\r\n    };\r\n\r\n    Chart.prototype.applyDefaults = function applyDefaults (options, themeOptions) {\r\n        applyAxisDefaults(options, themeOptions);\r\n        applySeriesDefaults(options, themeOptions);\r\n    };\r\n\r\n    Chart.prototype.applySeriesColors = function applySeriesColors () {\r\n        var options = this.options;\r\n        var series = options.series;\r\n        var colors = options.seriesColors || [];\r\n\r\n        for (var i = 0; i < series.length; i++) {\r\n            var currentSeries = series[i];\r\n            var seriesColor = colors[i % colors.length];\r\n            var defaults = currentSeries._defaults;\r\n\r\n            currentSeries.color = currentSeries.color || seriesColor;\r\n            if (defaults) {\r\n                defaults.color = defaults.color || seriesColor;\r\n            }\r\n        }\r\n    };\r\n\r\n    Chart.prototype._getModel = function _getModel () {\r\n        var options = this.options;\r\n        var plotArea = this._createPlotArea();\r\n        var model = new RootElement(this._modelOptions());\r\n        model.chart = this;\r\n        model._plotArea = plotArea;\r\n\r\n        var title = Title.buildTitle(options.title);\r\n        var subtitle = Title.buildTitle(options.subtitle, {\r\n            align: options.title.align,\r\n            position: options.title.position\r\n        });\r\n        model.append.apply(model, Title.orderTitles([title, subtitle]));\r\n\r\n        if (options.legend && options.legend.visible) {\r\n            model.append(new Legend(plotArea.options.legend, this.chartService));\r\n        }\r\n        model.append(plotArea);\r\n        model.reflow();\r\n\r\n        return model;\r\n    };\r\n\r\n    Chart.prototype._modelOptions = function _modelOptions () {\r\n        var options = this.options;\r\n        var size = this.getSize();\r\n\r\n        return deepExtend({\r\n            transitions: options.transitions,\r\n            width: size.width || DEFAULT_WIDTH,\r\n            height: size.height || DEFAULT_HEIGHT\r\n        }, options.chartArea);\r\n    };\r\n\r\n    Chart.prototype._createPlotArea = function _createPlotArea (skipSeries) {\r\n        var options = this.options;\r\n\r\n        var plotArea = PlotAreaFactory.current.create(skipSeries ? [] : options.series, options, this.chartService);\r\n\r\n        return plotArea;\r\n    };\r\n\r\n    Chart.prototype._setupSelection = function _setupSelection () {\r\n        var this$1 = this;\r\n\r\n        var ref = this;\r\n        var axes = ref._plotArea.axes;\r\n        var selections = this._selections = [];\r\n\r\n        for (var i = 0; i < axes.length; i++) {\r\n            var axis = axes[i];\r\n            var options = axis.options;\r\n            if (axis instanceof CategoryAxis && options.select && !options.vertical) {\r\n                var range = axis.range();\r\n\r\n                var selection = new Selection(this$1, axis,\r\n                    deepExtend({ min: range.min, max: range.max }, options.select)\r\n                );\r\n\r\n                selections.push(selection);\r\n            }\r\n        }\r\n    };\r\n\r\n    Chart.prototype._selectStart = function _selectStart (e) {\r\n        return this.trigger(SELECT_START, e);\r\n    };\r\n\r\n    Chart.prototype._select = function _select (e) {\r\n        return this.trigger(SELECT, e);\r\n    };\r\n\r\n    Chart.prototype._selectEnd = function _selectEnd (e) {\r\n        return this.trigger(SELECT_END, e);\r\n    };\r\n\r\n    Chart.prototype._initHandlers = function _initHandlers () {\r\n        this._clickHandler = this._click.bind(this);\r\n        this._mousewheelHandler = this._mousewheel.bind(this);\r\n        this._mouseleaveHandler = this._mouseleave.bind(this);\r\n        this._surfaceMouseenterHandler = this._mouseover.bind(this);\r\n        this._surfaceMouseleaveHandler = this._mouseout.bind(this);\r\n\r\n        this._mousemove = throttle(\r\n            this._mousemove.bind(this),\r\n            MOUSEMOVE_DELAY\r\n        );\r\n    };\r\n\r\n    Chart.prototype.addObserver = function addObserver (observer) {\r\n        if (observer) {\r\n            this.observers.push(observer);\r\n        }\r\n    };\r\n\r\n    Chart.prototype.removeObserver = function removeObserver (observer) {\r\n        var index = this.observers.indexOf(observer);\r\n        if (index >= 0) {\r\n            this.observers.splice(index, 1);\r\n        }\r\n    };\r\n\r\n    Chart.prototype.requiresHandlers = function requiresHandlers (eventNames) {\r\n        var observers = this.observers;\r\n        for (var idx = 0; idx < observers.length; idx++) {\r\n            if (observers[idx].requiresHandlers(eventNames)) {\r\n                return true;\r\n            }\r\n        }\r\n    };\r\n\r\n    Chart.prototype.trigger = function trigger (name, args) {\r\n        if ( args === void 0 ) args = {};\r\n\r\n        if (name === SHOW_TOOLTIP) {\r\n            args.anchor.point = this._toDocumentCoordinates(args.anchor.point);\r\n        }\r\n        args.sender = this;\r\n\r\n        var observers = this.observers;\r\n        var isDefaultPrevented = false;\r\n        for (var idx = 0; idx < observers.length; idx++) {\r\n            if (observers[idx].trigger(name, args)) {\r\n                isDefaultPrevented = true;\r\n            }\r\n        }\r\n\r\n        return isDefaultPrevented;\r\n    };\r\n\r\n    Chart.prototype._attachEvents = function _attachEvents () {\r\n        var obj, obj$1;\r\n\r\n        var element = this.element;\r\n\r\n        this._touchAction = element.style.touchAction;\r\n\r\n        bindEvents(element, ( obj = {}, obj[ CONTEXTMENU ] = this._clickHandler, obj[ MOUSEWHEEL ] = this._mousewheelHandler, obj[ MOUSELEAVE ] = this._mouseleaveHandler, obj ));\r\n\r\n        if (this._shouldAttachMouseMove()) {\r\n            bindEvents(element, ( obj$1 = {}, obj$1[ MOUSEMOVE ] = this._mousemove, obj$1 ));\r\n        }\r\n\r\n        this.domEvents = DomEventsBuilder.create(this.element, {\r\n            start: this._start.bind(this),\r\n            move: this._move.bind(this),\r\n            end: this._end.bind(this),\r\n            tap: this._tap.bind(this),\r\n            gesturestart: this._gesturestart.bind(this),\r\n            gesturechange: this._gesturechange.bind(this),\r\n            gestureend: this._gestureend.bind(this)\r\n        });\r\n\r\n        this._toggleDragZoomEvents();\r\n    };\r\n\r\n    Chart.prototype._mouseleave = function _mouseleave (e) {\r\n        if (this._hoveredPoint) {\r\n            this._hoveredPoint.out(this, e);\r\n            this._hoveredPoint = null;\r\n        }\r\n\r\n        if (this._plotAreaHovered) {\r\n            this._plotAreaHovered = false;\r\n            this.trigger(PLOT_AREA_LEAVE);\r\n        }\r\n    };\r\n\r\n    Chart.prototype._cancelDomEvents = function _cancelDomEvents () {\r\n        if (this.domEvents && this.domEvents.cancel) {\r\n            this.domEvents.cancel();\r\n        }\r\n    };\r\n\r\n    Chart.prototype._gesturestart = function _gesturestart (e) {\r\n        if (this._mousewheelZoom && !this._stopChartHandlers(e)) {\r\n            this._gestureDistance = e.distance;\r\n            this._unsetActivePoint();\r\n            this.surface.suspendTracking();\r\n        }\r\n    };\r\n\r\n    Chart.prototype._gestureend = function _gestureend (e) {\r\n        if (this._zooming && !this._stopChartHandlers(e)) {\r\n            if (this.surface) {\r\n                this.surface.resumeTracking();\r\n            }\r\n            this._zooming = false;\r\n            this.trigger(ZOOM_END, {});\r\n        }\r\n    };\r\n\r\n    Chart.prototype._gesturechange = function _gesturechange (e) {\r\n        var mousewheelZoom = this._mousewheelZoom;\r\n\r\n        if (mousewheelZoom && !this._stopChartHandlers(e)) {\r\n            e.preventDefault();\r\n            var previousGestureDistance = this._gestureDistance;\r\n            var scaleDelta = -e.distance / previousGestureDistance + 1;\r\n\r\n            if (Math.abs(scaleDelta) >= 0.1) {\r\n                scaleDelta = Math.round(scaleDelta * 10);\r\n\r\n                this._gestureDistance = e.distance;\r\n                var args = { delta: scaleDelta, axisRanges: axisRanges(this._plotArea.axes), originalEvent: e };\r\n                if (this._zooming || !this.trigger(ZOOM_START, args)) {\r\n                    var coords = this._eventCoordinates(e);\r\n\r\n                    if (!this._zooming) {\r\n                        this._zooming = true;\r\n                    }\r\n\r\n                    var ranges = args.axisRanges = mousewheelZoom.updateRanges(scaleDelta, coords);\r\n                    if (ranges && !this.trigger(ZOOM, args)) {\r\n                        mousewheelZoom.zoom();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    Chart.prototype._mouseout = function _mouseout (e) {\r\n        if (e.element) {\r\n            var element = this._drawingChartElement(e.element, e);\r\n\r\n            if (element && element.leave) {\r\n                element.leave(this, e.originalEvent);\r\n            }\r\n        }\r\n    };\r\n\r\n    Chart.prototype._start = function _start (e) {\r\n        var coords = this._eventCoordinates(e);\r\n\r\n        if (this._stopChartHandlers(e) || !this._plotArea.backgroundContainsPoint(coords)) {\r\n            return;\r\n        }\r\n\r\n\r\n        if (this.requiresHandlers([ DRAG_START, DRAG, DRAG_END ])) {\r\n            this._startNavigation(e, coords, DRAG_START);\r\n        }\r\n\r\n        if (this._pannable && this._pannable.start(e)) {\r\n            this.surface.suspendTracking();\r\n            this._unsetActivePoint();\r\n            this._suppressHover = true;\r\n            this.chartService.panning = true;\r\n        }\r\n\r\n        if (this._zoomSelection) {\r\n            if (this._zoomSelection.start(e)) {\r\n                this.trigger(ZOOM_START, { axisRanges: axisRanges(this._plotArea.axes), originalEvent: e });\r\n            }\r\n        }\r\n    };\r\n\r\n    Chart.prototype._move = function _move (e) {\r\n        var ref = this;\r\n        var state = ref._navState;\r\n        var pannable = ref._pannable;\r\n\r\n        if (this._stopChartHandlers(e)) {\r\n            return;\r\n        }\r\n\r\n        if (pannable) {\r\n            var ranges = pannable.move(e);\r\n\r\n            if (ranges && !this.trigger(DRAG, { axisRanges: ranges, originalEvent: e })) {\r\n                pannable.pan();\r\n            }\r\n        } else if (state) {\r\n            var ranges$1 = {};\r\n            var axes = state.axes;\r\n\r\n            for (var i = 0; i < axes.length; i++) {\r\n                var currentAxis = axes[i];\r\n                var axisName = currentAxis.options.name;\r\n                if (axisName) {\r\n                    var axis = currentAxis.options.vertical ? e.y : e.x;\r\n                    var delta = axis.startLocation - axis.location;\r\n\r\n                    if (delta !== 0) {\r\n                        ranges$1[currentAxis.options.name] = currentAxis.translateRange(delta);\r\n                    }\r\n                }\r\n            }\r\n\r\n            state.axisRanges = ranges$1;\r\n            this.trigger(DRAG, {\r\n                axisRanges: ranges$1,\r\n                originalEvent: e\r\n            });\r\n        }\r\n\r\n        if (this._zoomSelection) {\r\n            this._zoomSelection.move(e);\r\n        }\r\n    };\r\n\r\n    Chart.prototype._end = function _end (e) {\r\n        if (this._stopChartHandlers(e)) {\r\n            return;\r\n        }\r\n\r\n        var pannable = this._pannable;\r\n        if (pannable && pannable.end(e)) {\r\n            this.surface.resumeTracking();\r\n            this.trigger(DRAG_END, {\r\n                axisRanges: axisRanges(this._plotArea.axes),\r\n                originalEvent: e\r\n            });\r\n            this._suppressHover = false;\r\n            this.chartService.panning = false;\r\n        } else {\r\n            this._endNavigation(e, DRAG_END);\r\n        }\r\n\r\n        if (this._zoomSelection) {\r\n            var ranges = this._zoomSelection.end(e);\r\n            if (ranges && !this.trigger(ZOOM, { axisRanges: ranges, originalEvent: e })) {\r\n                this._zoomSelection.zoom();\r\n                this.trigger(ZOOM_END, { axisRanges: ranges, originalEvent: e });\r\n            }\r\n        }\r\n    };\r\n\r\n    Chart.prototype._stopChartHandlers = function _stopChartHandlers (e) {\r\n        var selections = this._selections || [];\r\n        if (!selections.length) {\r\n            return false;\r\n        }\r\n\r\n        var coords = this._eventCoordinates(e);\r\n        var pane = this._plotArea.paneByPoint(coords);\r\n        if (pane) {\r\n            for (var idx = 0; idx < selections.length; idx++) {\r\n                if (selections[idx].onPane(pane)) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    Chart.prototype._mousewheelZoomRate = function _mousewheelZoomRate () {\r\n        var zoomable = this.options.zoomable;\r\n        var mousewheel = (zoomable || {}).mousewheel || {};\r\n        return valueOrDefault(mousewheel.rate, MOUSEWHEEL_ZOOM_RATE);\r\n    };\r\n\r\n    Chart.prototype._mousewheel = function _mousewheel (e) {\r\n        var this$1 = this;\r\n\r\n        var delta = mousewheelDelta(e);\r\n        var mousewheelZoom = this._mousewheelZoom;\r\n        var coords = this._eventCoordinates(e);\r\n\r\n        if (this._stopChartHandlers(e) || !this._plotArea.backgroundContainsPoint(coords)) {\r\n            return;\r\n        }\r\n\r\n        if (mousewheelZoom) {\r\n            var args = { delta: delta, axisRanges: axisRanges(this._plotArea.axes), originalEvent: e };\r\n            if (this._zooming || !this.trigger(ZOOM_START, args)) {\r\n                e.preventDefault();\r\n\r\n                if (!this._zooming) {\r\n                    this._unsetActivePoint();\r\n                    this.surface.suspendTracking();\r\n                    this._zooming = true;\r\n                }\r\n\r\n                if (this._mwTimeout) {\r\n                    clearTimeout(this._mwTimeout);\r\n                }\r\n\r\n                args.axisRanges = mousewheelZoom.updateRanges(delta, coords);\r\n                if (args.axisRanges && !this.trigger(ZOOM, args)) {\r\n                    mousewheelZoom.zoom();\r\n                }\r\n\r\n                this._mwTimeout = setTimeout(function () {\r\n                    this$1.trigger(ZOOM_END, args);\r\n                    this$1._zooming = false;\r\n                    if (this$1.surface) {\r\n                        this$1.surface.resumeTracking();\r\n                    }\r\n                }, MOUSEWHEEL_DELAY);\r\n            }\r\n        } else {\r\n            var state = this._navState;\r\n            if (!state) {\r\n                var prevented = this._startNavigation(e, coords, ZOOM_START);\r\n                if (!prevented) {\r\n                    state = this._navState;\r\n                }\r\n            }\r\n\r\n            if (state) {\r\n                var totalDelta = state.totalDelta || delta;\r\n                state.totalDelta = totalDelta + delta;\r\n\r\n                var axes = this._navState.axes;\r\n                var ranges = {};\r\n\r\n                for (var i = 0; i < axes.length; i++) {\r\n                    var currentAxis = axes[i];\r\n                    var axisName = currentAxis.options.name;\r\n                    if (axisName) {\r\n                        ranges[axisName] = currentAxis.scaleRange(-totalDelta * this$1._mousewheelZoomRate(), coords);\r\n                    }\r\n                }\r\n\r\n                this.trigger(ZOOM, {\r\n                    delta: delta,\r\n                    axisRanges: ranges,\r\n                    originalEvent: e\r\n                });\r\n\r\n                if (this._mwTimeout) {\r\n                    clearTimeout(this._mwTimeout);\r\n                }\r\n\r\n                this._mwTimeout = setTimeout(function () {\r\n                    this$1._endNavigation(e, ZOOM_END);\r\n                }, MOUSEWHEEL_DELAY);\r\n            }\r\n        }\r\n    };\r\n\r\n    Chart.prototype._startNavigation = function _startNavigation (e, coords, chartEvent) {\r\n        var plotArea = this._model._plotArea;\r\n        var pane = plotArea.findPointPane(coords);\r\n        var axes = plotArea.axes.slice(0);\r\n\r\n        if (!pane) {\r\n            return;\r\n        }\r\n\r\n        var ranges = axisRanges(axes);\r\n\r\n        var prevented = this.trigger(chartEvent, {\r\n            axisRanges: ranges,\r\n            originalEvent: e\r\n        });\r\n\r\n        if (prevented) {\r\n            this._cancelDomEvents();\r\n        } else {\r\n            this._suppressHover = true;\r\n            this._unsetActivePoint();\r\n            this._navState = {\r\n                axisRanges: ranges,\r\n                pane: pane,\r\n                axes: axes\r\n            };\r\n        }\r\n    };\r\n\r\n    Chart.prototype._endNavigation = function _endNavigation (e, chartEvent) {\r\n        if (this._navState) {\r\n            this.trigger(chartEvent, {\r\n                axisRanges: this._navState.axisRanges,\r\n                originalEvent: e\r\n            });\r\n            this._suppressHover = false;\r\n            this._navState = null;\r\n        }\r\n    };\r\n\r\n    Chart.prototype._getChartElement = function _getChartElement (e, match) {\r\n        var element = this.surface.eventTarget(e);\r\n        if (element) {\r\n            return this._drawingChartElement(element, e, match);\r\n        }\r\n    };\r\n\r\n    Chart.prototype._drawingChartElement = function _drawingChartElement (element, e, match) {\r\n        var current = element;\r\n        var chartElement;\r\n        while (current && !chartElement) {\r\n            chartElement = current.chartElement;\r\n            current = current.parent;\r\n        }\r\n\r\n        if (chartElement) {\r\n            if (chartElement.aliasFor) {\r\n                chartElement = chartElement.aliasFor(e, this._eventCoordinates(e));\r\n            }\r\n\r\n            if (match) {\r\n                chartElement = chartElement.closest(match);\r\n                if (chartElement && chartElement.aliasFor) {\r\n                    chartElement = chartElement.aliasFor();\r\n                }\r\n            }\r\n\r\n            return chartElement;\r\n        }\r\n    };\r\n\r\n    Chart.prototype._eventCoordinates = function _eventCoordinates (e) {\r\n        var coordinates = eventCoordinates(e);\r\n        return this._toModelCoordinates(coordinates.x, coordinates.y);\r\n    };\r\n\r\n    Chart.prototype._elementPadding = function _elementPadding () {\r\n        if (!this._padding) {\r\n            var ref = elementStyles(this.element, [ \"paddingLeft\", \"paddingTop\" ]);\r\n            var paddingLeft = ref.paddingLeft;\r\n            var paddingTop = ref.paddingTop;\r\n            this._padding = {\r\n                top: paddingTop,\r\n                left: paddingLeft\r\n            };\r\n        }\r\n\r\n        return this._padding;\r\n    };\r\n\r\n    Chart.prototype._toDocumentCoordinates = function _toDocumentCoordinates (point) {\r\n        var padding = this._elementPadding();\r\n        var offset = elementOffset(this.element);\r\n\r\n        return {\r\n            left: round(point.x + padding.left + offset.left),\r\n            top: round(point.y + padding.top + offset.top)\r\n        };\r\n    };\r\n\r\n    // TODO: Breaking change due to peer version change\r\n    // Reuse by exposing _surfacePoint on Surface\r\n    Chart.prototype._toModelCoordinates = function _toModelCoordinates (clientX, clientY) {\r\n        var element = this.element;\r\n        var offset = elementOffset(element);\r\n        var padding = this._elementPadding();\r\n        var inverseTransform = elementScale(element).invert();\r\n        var point = new geometry.Point(\r\n            clientX - offset.left - padding.left,\r\n            clientY - offset.top - padding.top\r\n        ).transform(inverseTransform);\r\n\r\n        return new Point(point.x, point.y);\r\n    };\r\n\r\n    Chart.prototype._tap = function _tap (e) {\r\n        var this$1 = this;\r\n\r\n        var drawingElement = this.surface.eventTarget(e);\r\n        var element = this._drawingChartElement(drawingElement, e);\r\n        var sharedTooltip = this._sharedTooltip();\r\n\r\n        if (!this._startHover(drawingElement, e) && !sharedTooltip) {\r\n            this._unsetActivePoint();\r\n        }\r\n\r\n        if (sharedTooltip) {\r\n            this._trackSharedTooltip(this._eventCoordinates(e), e, true);\r\n        }\r\n\r\n        this._propagateClick(element, e);\r\n\r\n        //part of fix for hover issue on windows touch\r\n        this.handlingTap = true;\r\n        setTimeout(function () {\r\n            this$1.handlingTap = false;\r\n        }, 0);\r\n    };\r\n\r\n    Chart.prototype._click = function _click (e) {\r\n        var element = this._getChartElement(e);\r\n        this._propagateClick(element, e);\r\n    };\r\n\r\n    Chart.prototype._propagateClick = function _propagateClick (element, e) {\r\n        var this$1 = this;\r\n\r\n        var current = element;\r\n        while (current) {\r\n            if (current.click) {\r\n                current.click(this$1, e);\r\n            }\r\n\r\n            current = current.parent;\r\n        }\r\n    };\r\n\r\n    Chart.prototype._startHover = function _startHover (element, e) {\r\n        if (this._suppressHover) {\r\n            return false;\r\n        }\r\n\r\n        var point = this._drawingChartElement(element, e, function(element) {\r\n            return (element.hover || element.over) && !(element instanceof PlotAreaBase);\r\n        });\r\n\r\n        var activePoint = this._activePoint;\r\n        var multipleSeries = this._plotArea.series.length > 1;\r\n        var hasInactiveOpacity = this._hasInactiveOpacity();\r\n\r\n        this._updateHoveredPoint(point, e);\r\n\r\n        if (point && activePoint !== point && point.hover) {\r\n            this._activePoint = point;\r\n\r\n            if (!this._sharedTooltip() && !point.hover(this, e)) {\r\n                this._displayTooltip(point);\r\n\r\n                if (hasInactiveOpacity) {\r\n                    this._displayInactiveOpacity(point, multipleSeries);\r\n                } else {\r\n                    this._highlight.show(point);\r\n                }\r\n            }\r\n        } else if (!point && hasInactiveOpacity) {\r\n            if (multipleSeries && this._activeChartInstance) {\r\n                this._updateSeriesOpacity(point, true);\r\n                this._applySeriesOpacity(this._activeChartInstance.children, null, true);\r\n                this._activeChartInstance = null;\r\n            }\r\n            this._highlight && this._highlight.hide();\r\n            this._activePoint = null;\r\n        }\r\n\r\n        return point;\r\n    };\r\n\r\n    Chart.prototype._displayTooltip = function _displayTooltip (point) {\r\n        var tooltipOptions = deepExtend({}, this.options.tooltip, point.options.tooltip);\r\n        if (tooltipOptions.visible) {\r\n            this._tooltip.show(point);\r\n        }\r\n    };\r\n\r\n    Chart.prototype._displayInactiveOpacity = function _displayInactiveOpacity (activePoint, multipleSeries, highlightPoints) {\r\n        var chartInstance = this._activeChartInstance = this._chartInstanceFromPoint(activePoint);\r\n        if (!chartInstance) {\r\n            return;\r\n        }\r\n\r\n        if (multipleSeries) {\r\n            this._updateSeriesOpacity(activePoint);\r\n            this._applySeriesOpacity(chartInstance.children, null, true);\r\n            this._applySeriesOpacity(chartInstance.children, activePoint.series);\r\n            this._highlight.show(highlightPoints || activePoint);\r\n        } else {\r\n            var inactivePoints;\r\n\r\n            if (!chartInstance.supportsPointInactiveOpacity()) {\r\n                this._highlight.show(activePoint);\r\n                return;\r\n            }\r\n\r\n            inactivePoints = this._getInactivePoints(activePoint, chartInstance);\r\n\r\n            if (inactivePoints && inactivePoints.length) {\r\n                this._highlight.show(inactivePoints, 1 - this._getInactiveOpacityForSeries(activePoint.series));\r\n            }\r\n        }\r\n    };\r\n\r\n    Chart.prototype._getInactivePoints = function _getInactivePoints (activePoint, chartInstance) {\r\n        var allPoints = this._getAllPointsOfType(chartInstance, activePoint.constructor);\r\n\r\n        return allPoints.filter(function (point) { return point !== activePoint; });\r\n    };\r\n\r\n    Chart.prototype._getAllPointsOfType = function _getAllPointsOfType (container, type) {\r\n        var this$1 = this;\r\n\r\n        var points = [];\r\n\r\n        for (var i = 0; i < container.children.length; i++) {\r\n            var element = container.children[i];\r\n\r\n            if (element.constructor === type) {\r\n                points.push(element);\r\n            } else if (element.children && element.children.length) {\r\n                points = points.concat(this$1._getAllPointsOfType(element, type));\r\n            }\r\n        }\r\n\r\n        return points;\r\n    };\r\n\r\n    Chart.prototype._updateHoveredPoint = function _updateHoveredPoint (point, e) {\r\n        var hoveredPoint = this._hoveredPoint;\r\n\r\n        if (hoveredPoint && hoveredPoint !== point) {\r\n            hoveredPoint.out(this, e);\r\n            this._hoveredPoint = null;\r\n        }\r\n\r\n        if (point && hoveredPoint !== point && point.over) {\r\n            this._hoveredPoint = point;\r\n            point.over(this, e);\r\n        }\r\n    };\r\n\r\n    Chart.prototype._updateSeriesOpacity = function _updateSeriesOpacity (point, resetOpacity) {\r\n        var this$1 = this;\r\n\r\n        var plotArea = this._plotArea;\r\n        var length = plotArea.series.length;\r\n\r\n        for (var i = 0; i < length; i++) {\r\n            var currSeries = plotArea.series[i];\r\n            var defaultOpacity = this$1._getDefaultOpacityForSeries(currSeries);\r\n            var inactiveOpacity = this$1._getInactiveOpacityForSeries(currSeries);\r\n\r\n            if (!resetOpacity && currSeries !== point.series) {\r\n                currSeries.defaultOpacity = defaultOpacity;\r\n                currSeries.opacity = inactiveOpacity;\r\n\r\n                if (currSeries.line) {\r\n                    currSeries.line.opacity = inactiveOpacity;\r\n                }\r\n            } else {\r\n                currSeries.opacity = defaultOpacity;\r\n\r\n                if (currSeries.line) {\r\n                    currSeries.line.opacity = defaultOpacity;\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    Chart.prototype._applySeriesOpacity = function _applySeriesOpacity (elements, activeSeries, reset, series) {\r\n        var this$1 = this;\r\n\r\n        for (var i = 0; i < elements.length; i++) {\r\n            var element = elements[i];\r\n            var currSeries = element.series || series;\r\n            var shouldHighlight = currSeries && (currSeries.highlight || {}).visible;\r\n\r\n            if (shouldHighlight && element.visual) {\r\n                var opacity = series ? series.opacity : element.series.opacity;\r\n                if (currSeries !== activeSeries || reset) {\r\n                    element.visual.opacity(reset ? 1 : opacity);\r\n                }\r\n            }\r\n\r\n            if (element.children && element.children.length) {\r\n                this$1._applySeriesOpacity(element.children, activeSeries, reset, element.series);\r\n            }\r\n        }\r\n    };\r\n\r\n    Chart.prototype._chartInstanceFromPoint = function _chartInstanceFromPoint (point) {\r\n        var chartInstance = point.parent;\r\n\r\n        while (chartInstance && !chartInstance.plotArea) {\r\n            chartInstance = chartInstance.parent;\r\n        }\r\n\r\n        return chartInstance;\r\n    };\r\n\r\n    Chart.prototype._hasInactiveOpacity = function _hasInactiveOpacity () {\r\n        var hasDefaultInactiveOpacity = this.options.seriesDefaults.highlight.inactiveOpacity !== undefined;\r\n        var hasInactiveOpacity = this.options.series.filter(function (s) { return s.highlight.inactiveOpacity !== undefined; } ).length > 0;\r\n        return hasDefaultInactiveOpacity || hasInactiveOpacity;\r\n    };\r\n\r\n    Chart.prototype._getInactiveOpacityForSeries = function _getInactiveOpacityForSeries (series) {\r\n        var defaultInactiveOpacity = this.options.seriesDefaults.highlight.inactiveOpacity;\r\n        var seriesInactiveOpacity = series.highlight.inactiveOpacity;\r\n        return seriesInactiveOpacity || defaultInactiveOpacity || series.opacity || DEFAULT_SERIES_OPACITY;\r\n    };\r\n\r\n    Chart.prototype._getDefaultOpacityForSeries = function _getDefaultOpacityForSeries (series) {\r\n        return series.defaultOpacity || series.opacity || DEFAULT_SERIES_OPACITY;\r\n    };\r\n\r\n    Chart.prototype._mouseover = function _mouseover (e) {\r\n        var obj;\r\n\r\n        var point = this._startHover(e.element, e.originalEvent);\r\n\r\n        if (point && point.tooltipTracking && !this._mouseMoveTrackHandler && !this._sharedTooltip()) {\r\n            this._mouseMoveTrackHandler = this._mouseMoveTracking.bind(this);\r\n            bindEvents(document, ( obj = {}, obj[ MOUSEMOVE ] = this._mouseMoveTrackHandler, obj ));\r\n        }\r\n    };\r\n\r\n    Chart.prototype._mouseMoveTracking = function _mouseMoveTracking (e) {\r\n        var obj;\r\n\r\n        var ref = this;\r\n        var options = ref.options;\r\n        var tooltip = ref._tooltip;\r\n        var highlight = ref._highlight;\r\n        var point = ref._activePoint;\r\n        var coords = this._eventCoordinates(e);\r\n\r\n        if (this._plotArea.box.containsPoint(coords)) {\r\n            if (point && point.tooltipTracking && point.series && point.parent.getNearestPoint) {\r\n                var seriesPoint = point.parent.getNearestPoint(coords.x, coords.y, point.seriesIx);\r\n                if (seriesPoint && seriesPoint !== point) {\r\n                    this._activePoint = seriesPoint;\r\n\r\n                    if (!seriesPoint.hover(this, e)) {\r\n                        var tooltipOptions = deepExtend({}, options.tooltip, seriesPoint.options.tooltip);\r\n                        if (tooltipOptions.visible) {\r\n                            tooltip.show(seriesPoint);\r\n                        }\r\n\r\n                        highlight.show(seriesPoint);\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            unbindEvents(document, ( obj = {}, obj[ MOUSEMOVE ] = this._mouseMoveTrackHandler, obj ));\r\n            this._unsetActivePoint();\r\n            this._mouseMoveTrackHandler = null;\r\n        }\r\n    };\r\n\r\n    Chart.prototype._mousemove = function _mousemove (e) {\r\n        var coords = this._eventCoordinates(e);\r\n        var plotArea = this._plotArea;\r\n\r\n        this._trackCrosshairs(coords);\r\n\r\n        if (plotArea.hover) {\r\n            var overPlotArea = plotArea.backgroundContainsPoint(coords);\r\n            if (overPlotArea) {\r\n                this._plotAreaHovered = true;\r\n                this._plotArea.hover(this, e);\r\n            } else if (this._plotAreaHovered && !overPlotArea) {\r\n                this._plotAreaHovered = false;\r\n                this.trigger(PLOT_AREA_LEAVE);\r\n            }\r\n        }\r\n\r\n        if (this._sharedTooltip()) {\r\n            this._trackSharedTooltip(coords, e);\r\n        }\r\n    };\r\n\r\n    Chart.prototype._trackCrosshairs = function _trackCrosshairs (coords) {\r\n        var crosshairs = this._plotArea.crosshairs;\r\n\r\n        for (var i = 0; i < crosshairs.length; i++) {\r\n            var current = crosshairs[i];\r\n\r\n            if (current.box.containsPoint(coords)) {\r\n                current.showAt(coords);\r\n            } else {\r\n                current.hide();\r\n            }\r\n        }\r\n    };\r\n\r\n    Chart.prototype._trackSharedTooltip = function _trackSharedTooltip (coords, e, toggle) {\r\n        if (this._suppressHover) {\r\n            return;\r\n        }\r\n\r\n        var ref = this;\r\n        var tooltipOptions = ref.options.tooltip;\r\n        var plotArea = ref._plotArea;\r\n        var categoryAxis = ref._plotArea.categoryAxis;\r\n        var tooltip = ref._tooltip;\r\n        var highlight = ref._highlight;\r\n\r\n        if (plotArea.backgroundContainsPoint(coords)) {\r\n            var index = categoryAxis.pointCategoryIndex(coords);\r\n            if (index !== this._tooltipCategoryIx || (!this._sharedHighlight && toggle)) {\r\n                var points = plotArea.pointsByCategoryIndex(index);\r\n                var pointArgs = points.map(function(point) {\r\n                    return point.eventArgs(e);\r\n                });\r\n                var hoverArgs = pointArgs[0] || {};\r\n                hoverArgs.categoryPoints = pointArgs;\r\n\r\n                if (points.length > 0 && !this.trigger(SERIES_HOVER, hoverArgs)) {\r\n                    if (tooltipOptions.visible) {\r\n                        tooltip.showAt(points, coords);\r\n                    }\r\n\r\n                    highlight.show(points);\r\n\r\n                    this._sharedHighlight = true;\r\n                } else {\r\n                    tooltip.hide();\r\n                }\r\n\r\n                this._tooltipCategoryIx = index;\r\n            } else if (toggle && this._sharedHighlight) {\r\n                highlight.hide();\r\n                tooltip.hide();\r\n                this._sharedHighlight = false;\r\n            }\r\n        } else if (this._sharedHighlight) {\r\n            highlight.hide();\r\n            tooltip.hide();\r\n            this._tooltipCategoryIx = null;\r\n            this._sharedHighlight = false;\r\n        }\r\n    };\r\n\r\n    Chart.prototype.hideElements = function hideElements (options) {\r\n        var plotArea = this._plotArea;\r\n        this._mousemove.cancel();\r\n\r\n        plotArea.hideCrosshairs();\r\n\r\n        this._unsetActivePoint(options);\r\n    };\r\n\r\n    Chart.prototype._unsetActivePoint = function _unsetActivePoint (options) {\r\n        var ref = this;\r\n        var tooltip = ref._tooltip;\r\n        var highlight = ref._highlight;\r\n\r\n        this._activePoint = null;\r\n        this._hoveredPoint = null;\r\n\r\n        if (tooltip && !(options && options.keepTooltipOpen)) {\r\n            tooltip.hide();\r\n        }\r\n\r\n        this._tooltipCategoryIx = null;\r\n        this._sharedHighlight = false;\r\n\r\n        if (highlight) {\r\n            highlight.hide();\r\n        }\r\n    };\r\n\r\n    Chart.prototype._deferRedraw = function _deferRedraw () {\r\n        this._redraw();\r\n    };\r\n\r\n    Chart.prototype._clearRedrawTimeout = function _clearRedrawTimeout () {\r\n        if (this._redrawTimeout) {\r\n            clearInterval(this._redrawTimeout);\r\n            this._redrawTimeout = null;\r\n        }\r\n    };\r\n\r\n    Chart.prototype.bindCategories = function bindCategories () {\r\n        var this$1 = this;\r\n\r\n        var options = this.options;\r\n        var definitions = [].concat(options.categoryAxis);\r\n\r\n        for (var axisIx = 0; axisIx < definitions.length; axisIx++) {\r\n            var axis = definitions[axisIx];\r\n            if (axis.autoBind !== false) {\r\n                this$1.bindCategoryAxisFromSeries(axis, axisIx);\r\n            }\r\n        }\r\n    };\r\n\r\n    Chart.prototype.bindCategoryAxisFromSeries = function bindCategoryAxisFromSeries (axis, axisIx) {\r\n        var this$1 = this;\r\n\r\n        var series = this.options.series;\r\n        var seriesLength = series.length;\r\n        var uniqueCategories = new HashMap();//perf improvement in case type category with dates\r\n        var items = [];\r\n        var bindable = false;\r\n        var dateAxis;\r\n\r\n        for (var seriesIx = 0; seriesIx < seriesLength; seriesIx++) {\r\n            var s = series[seriesIx];\r\n            var onAxis = s.categoryAxis === axis.name || (!s.categoryAxis && axisIx === 0);\r\n            var data = s.data;\r\n            var dataLength = data.length;\r\n            var bind = s.categoryField && onAxis;\r\n            bindable = bind || bindable;\r\n\r\n            if (bind && dataLength > 0) {\r\n                dateAxis = isDateAxis(axis, getField(s.categoryField, data[0]));\r\n\r\n                var getFn = dateAxis ? getDateField : getField;\r\n\r\n                for (var dataIx = 0; dataIx < dataLength; dataIx++) {\r\n                    var dataRow = data[dataIx];\r\n                    var category = getFn(s.categoryField, dataRow, this$1.chartService.intl);\r\n\r\n                    if (dateAxis || !uniqueCategories.get(category)) {\r\n                        items.push([ category, dataRow ]);\r\n\r\n                        if (!dateAxis) {\r\n                            uniqueCategories.set(category, true);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        if (items.length > 0) {\r\n            if (dateAxis) {\r\n                items = uniqueDates(items, function(a, b) {\r\n                    return dateComparer(a[0], b[0]);\r\n                });\r\n            }\r\n\r\n            var result = transpose(items);\r\n            axis.categories = result[0];\r\n        } else if (bindable) {\r\n            axis.categories = [];\r\n        }\r\n    };\r\n\r\n    Chart.prototype._isBindable = function _isBindable (series) {\r\n        var valueFields = SeriesBinder.current.valueFields(series);\r\n        var result = true;\r\n\r\n        for (var i = 0; i < valueFields.length; i++) {\r\n            var field = valueFields[i];\r\n            if (field === VALUE) {\r\n                field = \"field\";\r\n            } else {\r\n                field = field + \"Field\";\r\n            }\r\n\r\n            if (!defined(series[field])) {\r\n                result = false;\r\n                break;\r\n            }\r\n        }\r\n\r\n        return result;\r\n    };\r\n\r\n    Chart.prototype._noTransitionsRedraw = function _noTransitionsRedraw () {\r\n        var options = this.options;\r\n        var transitionsState;\r\n\r\n        if (options.transitions !== false) {\r\n            options.transitions = false;\r\n            transitionsState = true;\r\n        }\r\n\r\n        this._redraw();\r\n\r\n        if (transitionsState) {\r\n            options.transitions = true;\r\n        }\r\n    };\r\n\r\n    Chart.prototype._legendItemHover = function _legendItemHover (seriesIndex, pointIndex) {\r\n        var ref = this;\r\n        var plotArea = ref._plotArea;\r\n        var highlight = ref._highlight;\r\n        var currentSeries = (plotArea.srcSeries || plotArea.series)[seriesIndex];\r\n        var items;\r\n\r\n        if (inArray(currentSeries.type, [ PIE, DONUT, FUNNEL ])) {\r\n            items = plotArea.findPoint(function(point) {\r\n                return point.series.index === seriesIndex && point.index === pointIndex;\r\n            });\r\n        } else {\r\n            items = plotArea.pointsBySeriesIndex(seriesIndex);\r\n        }\r\n\r\n        if (this._hasInactiveOpacity() && currentSeries.visible && items) {\r\n            var multipleSeries = plotArea.series.length > 1;\r\n            var point = items.length ? items[0] : items;\r\n\r\n            this._displayInactiveOpacity(point, multipleSeries, items);\r\n        } else {\r\n            highlight.show(items);\r\n        }\r\n    };\r\n\r\n    Chart.prototype._shouldAttachMouseMove = function _shouldAttachMouseMove () {\r\n        return this._plotArea.crosshairs.length || (this._tooltip && this._sharedTooltip()) || this.requiresHandlers([ PLOT_AREA_HOVER, PLOT_AREA_LEAVE ]);\r\n    };\r\n\r\n    Chart.prototype.updateMouseMoveHandler = function updateMouseMoveHandler () {\r\n        var obj, obj$1;\r\n\r\n        unbindEvents(this.element, ( obj = {}, obj[ MOUSEMOVE ] = this._mousemove, obj ));\r\n\r\n        if (this._shouldAttachMouseMove()) {\r\n            bindEvents(this.element, ( obj$1 = {}, obj$1[ MOUSEMOVE ] = this._mousemove, obj$1 ));\r\n        }\r\n    };\r\n\r\n    Chart.prototype.applyOptions = function applyOptions (options, theme) {\r\n        clearMissingValues(this._originalOptions, options);\r\n        this._originalOptions = deepExtend(this._originalOptions, options);\r\n        this.options = deepExtend({}, this._originalOptions);\r\n\r\n        if (theme) {\r\n            this._theme = theme;\r\n            this.chartService.theme = theme;\r\n        }\r\n        this._initTheme(this.options, this._theme);\r\n\r\n        this._toggleDragZoomEvents();\r\n    };\r\n\r\n    Chart.prototype.setOptions = function setOptions (options, theme) {\r\n        this.applyOptions(options, theme);\r\n        this.bindCategories();\r\n        this.redraw();\r\n        this.updateMouseMoveHandler();\r\n    };\r\n\r\n    Chart.prototype.setDirection = function setDirection (rtl) {\r\n        this.chartService.rtl = Boolean(rtl);\r\n        if (this.surface && this.surface.type === 'svg') {\r\n            this._destroySurface();\r\n        }\r\n    };\r\n\r\n    Chart.prototype.setIntlService = function setIntlService (intl) {\r\n        this.chartService.intl = intl;\r\n    };\r\n\r\n    Chart.prototype.noTransitionsRedraw = function noTransitionsRedraw () {\r\n        this._noTransitionsRedraw();\r\n    };\r\n\r\n    Chart.prototype.destroy = function destroy () {\r\n        var obj, obj$1;\r\n\r\n        this._destroyed = true;\r\n\r\n        unbindEvents(this.element, ( obj = {}, obj[ CONTEXTMENU ] = this._clickHandler, obj[ MOUSEWHEEL ] = this._mousewheelHandler, obj[ MOUSEMOVE ] = this._mousemove, obj[ MOUSELEAVE ] = this._mouseleaveHandler, obj ));\r\n\r\n        if (this.domEvents) {\r\n            this.domEvents.destroy();\r\n            delete this.domEvents;\r\n        }\r\n\r\n        if (this._mouseMoveTrackHandler) {\r\n            unbindEvents(document, ( obj$1 = {}, obj$1[ MOUSEMOVE ] = this._mouseMoveTrackHandler, obj$1 ));\r\n        }\r\n\r\n        this._destroyView();\r\n\r\n        this._destroySurface();\r\n\r\n        this._clearRedrawTimeout();\r\n    };\r\n\r\n    Chart.prototype._destroySurface = function _destroySurface () {\r\n        var surface = this.surface;\r\n        if (surface) {\r\n            surface.unbind(\"mouseenter\", this._surfaceMouseenterHandler);\r\n            surface.unbind(\"mouseleave\", this._surfaceMouseleaveHandler);\r\n            surface.destroy();\r\n\r\n            this.surface = null;\r\n        }\r\n    };\r\n\r\n    Chart.prototype._destroySelections = function _destroySelections () {\r\n        var selections = this._selections;\r\n\r\n        if (selections) {\r\n            while (selections.length > 0) {\r\n                selections.shift().destroy();\r\n            }\r\n        }\r\n    };\r\n\r\n    Chart.prototype._destroyView = function _destroyView () {\r\n        var model = this._model;\r\n\r\n        if (model) {\r\n            model.destroy();\r\n            this._model = null;\r\n        }\r\n\r\n        this._unsetActivePoint();\r\n\r\n        this._destroySelections();\r\n\r\n        if (this._tooltip) {\r\n            this._tooltip.destroy();\r\n        }\r\n\r\n        if (this._highlight) {\r\n            this._highlight.destroy();\r\n        }\r\n\r\n        if (this._zoomSelection) {\r\n            this._zoomSelection.destroy();\r\n            delete this._zoomSelection;\r\n        }\r\n\r\n        if (this._pannable) {\r\n            this._pannable.destroy();\r\n            delete this._pannable;\r\n        }\r\n\r\n        if (this._mousewheelZoom) {\r\n            this._mousewheelZoom.destroy();\r\n            delete this._mousewheelZoom;\r\n        }\r\n    };\r\n\r\n    return Chart;\r\n}(Class));\r\n\r\nfunction resolveAxisAliases(options) {\r\n    var aliases = AXIS_NAMES;\r\n\r\n    for (var idx = 0; idx < aliases.length; idx++) {\r\n        var alias = aliases[idx] + \"Axes\";\r\n        if (options[alias]) {\r\n            options[aliases[idx] + \"Axis\"] = options[alias];\r\n            delete options[alias];\r\n        }\r\n    }\r\n}\r\n\r\nfunction pointByCategoryName(points, name) {\r\n    if (points) {\r\n        for (var idx = 0; idx < points.length; idx++) {\r\n            if (points[idx].category === name) {\r\n                return [ points[idx] ];\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nfunction applyAxisDefaults(options, themeOptions) {\r\n    var themeAxisDefaults = ((themeOptions || {}).axisDefaults) || {};\r\n    var axisName, axisDefaults, axes;\r\n\r\n    function mapAxisOptions(axisOptions) {\r\n        var axisColor = (axisOptions || {}).color || axisDefaults.color;\r\n        var result = deepExtend({},\r\n            themeAxisDefaults,\r\n            themeAxisDefaults[axisName],\r\n            axisDefaults,\r\n            axisDefaults[axisName], {\r\n                line: { color: axisColor },\r\n                labels: { color: axisColor },\r\n                title: { color: axisColor }\r\n            },\r\n            axisOptions\r\n        );\r\n\r\n        delete result[axisName];\r\n\r\n        return result;\r\n    }\r\n\r\n    for (var idx = 0; idx < AXIS_NAMES.length; idx++) {\r\n        axisName = AXIS_NAMES[idx] + \"Axis\";\r\n        axisDefaults = options.axisDefaults || {};\r\n        axes = [].concat(options[axisName]);\r\n\r\n        axes = axes.map(mapAxisOptions);\r\n\r\n        options[axisName] = axes.length > 1 ? axes : axes[0];\r\n    }\r\n}\r\n\r\nfunction applySeriesDefaults(options, themeOptions) {\r\n    var series = options.series;\r\n    var seriesLength = series.length;\r\n    var seriesDefaults = options.seriesDefaults;\r\n    var commonDefaults = deepExtend({}, options.seriesDefaults);\r\n    var themeSeriesDefaults = themeOptions ? deepExtend({}, themeOptions.seriesDefaults) : {};\r\n    var commonThemeDefaults = deepExtend({}, themeSeriesDefaults);\r\n\r\n    cleanupNestedSeriesDefaults(commonDefaults);\r\n    cleanupNestedSeriesDefaults(commonThemeDefaults);\r\n\r\n    for (var i = 0; i < seriesLength; i++) {\r\n        var seriesType = series[i].type || options.seriesDefaults.type;\r\n\r\n        var baseOptions = deepExtend(\r\n            { data: [] },\r\n            commonThemeDefaults,\r\n            themeSeriesDefaults[seriesType],\r\n            { tooltip: options.tooltip },\r\n            commonDefaults,\r\n            seriesDefaults[seriesType]\r\n        );\r\n\r\n        series[i]._defaults = baseOptions;\r\n        series[i] = deepExtend({}, baseOptions, series[i]);\r\n        series[i].data = series[i].data || [];\r\n    }\r\n}\r\n\r\nfunction cleanupNestedSeriesDefaults(seriesDefaults) {\r\n    delete seriesDefaults.bar;\r\n    delete seriesDefaults.column;\r\n    delete seriesDefaults.rangeColumn;\r\n    delete seriesDefaults.line;\r\n    delete seriesDefaults.verticalLine;\r\n    delete seriesDefaults.pie;\r\n    delete seriesDefaults.donut;\r\n    delete seriesDefaults.area;\r\n    delete seriesDefaults.verticalArea;\r\n    delete seriesDefaults.scatter;\r\n    delete seriesDefaults.scatterLine;\r\n    delete seriesDefaults.bubble;\r\n    delete seriesDefaults.candlestick;\r\n    delete seriesDefaults.ohlc;\r\n    delete seriesDefaults.boxPlot;\r\n    delete seriesDefaults.bullet;\r\n    delete seriesDefaults.verticalBullet;\r\n    delete seriesDefaults.polarArea;\r\n    delete seriesDefaults.polarLine;\r\n    delete seriesDefaults.radarArea;\r\n    delete seriesDefaults.radarLine;\r\n    delete seriesDefaults.waterfall;\r\n}\r\n\r\n\r\nfunction axisRanges(axes) {\r\n    var ranges = {};\r\n\r\n    for (var i = 0; i < axes.length; i++) {\r\n        var axis = axes[i];\r\n        var axisName = axis.options.name;\r\n        if (axisName) {\r\n            ranges[axisName] = axis.range();\r\n        }\r\n    }\r\n\r\n    return ranges;\r\n}\r\n\r\nfunction sortDates(dates, comparer) {\r\n    if ( comparer === void 0 ) comparer = dateComparer;\r\n\r\n    for (var i = 1, length = dates.length; i < length; i++) {\r\n        if (comparer(dates[i], dates[i - 1]) < 0) {\r\n            dates.sort(comparer);\r\n            break;\r\n        }\r\n    }\r\n\r\n    return dates;\r\n}\r\n\r\nfunction uniqueDates(srcDates, comparer) {\r\n    if ( comparer === void 0 ) comparer = dateComparer;\r\n\r\n    var dates = sortDates(srcDates, comparer);\r\n    var length = dates.length;\r\n    var result = length > 0 ? [ dates[0] ] : [];\r\n\r\n    for (var i = 1; i < length; i++) {\r\n        if (comparer(dates[i], last(result)) !== 0) {\r\n            result.push(dates[i]);\r\n        }\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\nfunction transpose(rows) {\r\n    var rowCount = rows.length;\r\n    var result = [];\r\n\r\n    for (var rowIx = 0; rowIx < rowCount; rowIx++) {\r\n        var row = rows[rowIx];\r\n        var colCount = row.length;\r\n\r\n        for (var colIx = 0; colIx < colCount; colIx++) {\r\n            result[colIx] = result[colIx] || [];\r\n            result[colIx].push(row[colIx]);\r\n        }\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\nvar DATA_FIELDS = [ 'data', 'categories' ];\r\n\r\nfunction clearMissingValues(originalOptions, options) {\r\n    for (var field in options) {\r\n        if (!inArray(field, DATA_FIELDS) && options.hasOwnProperty(field)) {\r\n            var fieldValue = options[field];\r\n            var originalValue = originalOptions[field];\r\n            if (defined(originalValue)) {\r\n                var nullValue = fieldValue === null;\r\n                if ((nullValue || !defined(fieldValue))) {\r\n                    delete originalOptions[field];\r\n                    if (nullValue) {\r\n                        delete options[field];\r\n                    }\r\n                } else if (originalValue && isObject(fieldValue)) {\r\n                    if (isObject(originalValue)) {\r\n                        clearMissingValues(originalValue, fieldValue);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nfunction triggerPaneRender(panes) {\r\n    for (var idx = 0; idx < panes.length; idx++) {\r\n        panes[idx].notifyRender();\r\n    }\r\n}\r\n\r\nsetDefaultOptions(Chart, {\r\n    renderAs: \"\",\r\n    chartArea: {},\r\n    legend: {\r\n        visible: true,\r\n        labels: {}\r\n    },\r\n    categoryAxis: {},\r\n    seriesDefaults: {\r\n        type: COLUMN,\r\n        data: [],\r\n        highlight: {\r\n            visible: true\r\n        },\r\n        labels: {},\r\n        negativeValues: {\r\n            visible: false\r\n        }\r\n    },\r\n    series: [],\r\n    seriesColors: null,\r\n    tooltip: {\r\n        visible: false\r\n    },\r\n    transitions: true,\r\n    valueAxis: {},\r\n    plotArea: {},\r\n    title: {},\r\n    xAxis: {},\r\n    yAxis: {},\r\n    panes: [ {} ],\r\n    pannable: false,\r\n    zoomable: false\r\n});\r\n\r\nexport default Chart;\r\n"]},"metadata":{},"sourceType":"module"}